var Dw=Object.create;var ec=Object.defineProperty,Ew=Object.defineProperties,Iw=Object.getOwnPropertyDescriptor,Sw=Object.getOwnPropertyDescriptors,Mw=Object.getOwnPropertyNames,_h=Object.getOwnPropertySymbols,Aw=Object.getPrototypeOf,Eh=Object.prototype.hasOwnProperty,Tw=Object.prototype.propertyIsEnumerable;var Xl=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var Dh=(t,e,n)=>e in t?ec(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})Eh.call(e,n)&&Dh(t,n,e[n]);if(_h)for(var n of _h(e))Tw.call(e,n)&&Dh(t,n,e[n]);return t},U=(t,e)=>Ew(t,Sw(e));var Nw=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var xw=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Mw(e))!Eh.call(t,i)&&i!==n&&ec(t,i,{get:()=>e[i],enumerable:!(r=Iw(e,i))||r.enumerable});return t};var Ow=(t,e,n)=>(n=t!=null?Dw(Aw(t)):{},xw(e||!t||!t.__esModule?ec(n,"default",{value:t,enumerable:!0}):n,t));var N=(t,e,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(c){i(c)}},s=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())}),kw=function(t,e){this[0]=t,this[1]=e};var y=t=>{var e=t[Xl("asyncIterator")],n=!1,r,i={};return e==null?(e=t[Xl("iterator")](),r=o=>i[o]=s=>e[o](s)):(e=e.call(t),r=o=>i[o]=s=>{if(n){if(n=!1,o==="throw")throw s;return s}return n=!0,{done:!1,value:new kw(new Promise(a=>{var l=e[o](s);if(!(l instanceof Object))throw TypeError("Object expected");a(l)}),1)}}),i[Xl("iterator")]=()=>i,r("next"),"throw"in e?r("throw"):i.throw=o=>{throw o},"return"in e&&r("return"),i};var zy=Nw((yf,vf)=>{"use strict";(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof yf<"u"?e():(e(),t.FileSaver={})})(yf,function(){"use strict";function t(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,l,c){var u=new XMLHttpRequest;u.open("GET",a),u.responseType="blob",u.onload=function(){s(u.response,l,c)},u.onerror=function(){console.error("could not download file")},u.send()}function n(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(a,l,c){var u=i.URL||i.webkitURL,d=document.createElement("a");l=l||a.name||"download",d.download=l,d.rel="noopener",typeof a=="string"?(d.href=a,d.origin===location.origin?r(d):n(d.href)?e(a,l,c):r(d,d.target="_blank")):(d.href=u.createObjectURL(a),setTimeout(function(){u.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,c){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(t(a,c),l);else if(n(a))e(a,l,c);else{var u=document.createElement("a");u.href=a,u.target="_blank",setTimeout(function(){r(u)})}}:function(a,l,c,u){if(u=u||open("","_blank"),u&&(u.document.title=u.document.body.innerText="downloading..."),typeof a=="string")return e(a,l,c);var d=a.type==="application/octet-stream",f=/constructor/i.test(i.HTMLElement)||i.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||d&&f||o)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var v=m.result;v=h?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=v:location=v,u=null},m.readAsDataURL(a)}else{var p=i.URL||i.webkitURL,g=p.createObjectURL(a);u?u.location=g:location.href=g,u=null,setTimeout(function(){p.revokeObjectURL(g)},4e4)}});i.saveAs=s.saveAs=s,typeof vf<"u"&&(vf.exports=s)})});var Ih=null;var tc=1,nc=Symbol("SIGNAL");function Ne(t){let e=Ih;return Ih=t,e}var Sh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Rw(t){if(!(oc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===tc)){if(!t.producerMustRecompute(t)&&!rc(t)){t.dirty=!1,t.lastCleanEpoch=tc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=tc}}function Mh(t){return t&&(t.nextProducerIndex=0),Ne(t)}function Ah(t,e){if(Ne(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(oc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ic(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function rc(t){ss(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Rw(n),r!==n.version))return!0}return!1}function Th(t){if(ss(t),oc(t))for(let e=0;e<t.producerNode.length;e++)ic(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ic(t,e){if(Pw(t),ss(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)ic(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ss(i),i.producerIndexOfThis[r]=e}}function oc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ss(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Pw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Fw(){throw new Error}var Lw=Fw;function Nh(t){Lw=t}function F(t){return typeof t=="function"}function _r(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var as=_r(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ai(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var De=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(o){e=o instanceof as?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{xh(o)}catch(s){e=e??[],s instanceof as?e=[...e,...s.errors]:e.push(s)}}if(e)throw new as(e)}}add(e){var n;if(e&&e!==this)if(this.closed)xh(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ai(n,e)}remove(e){let{_finalizers:n}=this;n&&Ai(n,e),e instanceof t&&e._removeParent(this)}};De.EMPTY=(()=>{let t=new De;return t.closed=!0,t})();var sc=De.EMPTY;function ls(t){return t instanceof De||t&&"closed"in t&&F(t.remove)&&F(t.add)&&F(t.unsubscribe)}function xh(t){F(t)?t():t.unsubscribe()}var pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Dr={setTimeout(t,e,...n){let{delegate:r}=Dr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Dr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function cs(t){Dr.setTimeout(()=>{let{onUnhandledError:e}=pt;if(e)e(t);else throw t})}function Ti(){}var Oh=ac("C",void 0,void 0);function kh(t){return ac("E",void 0,t)}function Rh(t){return ac("N",t,void 0)}function ac(t,e,n){return{kind:t,value:e,error:n}}var Bn=null;function Er(t){if(pt.useDeprecatedSynchronousErrorHandling){let e=!Bn;if(e&&(Bn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bn;if(Bn=null,n)throw r}}else t()}function Ph(t){pt.useDeprecatedSynchronousErrorHandling&&Bn&&(Bn.errorThrown=!0,Bn.error=t)}var Un=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ls(e)&&e.add(this)):this.destination=jw}static create(e,n,r){return new Ir(e,n,r)}next(e){this.isStopped?cc(Rh(e),this):this._next(e)}error(e){this.isStopped?cc(kh(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cc(Oh,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Vw=Function.prototype.bind;function lc(t,e){return Vw.call(t,e)}var uc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){us(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){us(r)}else us(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){us(n)}}},Ir=class extends Un{constructor(e,n,r){super();let i;if(F(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&pt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&lc(e.next,o),error:e.error&&lc(e.error,o),complete:e.complete&&lc(e.complete,o)}):i=e}this.destination=new uc(i)}};function us(t){pt.useDeprecatedSynchronousErrorHandling?Ph(t):cs(t)}function $w(t){throw t}function cc(t,e){let{onStoppedNotification:n}=pt;n&&Dr.setTimeout(()=>n(t,e))}var jw={closed:!0,next:Ti,error:$w,complete:Ti};var Sr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qe(t){return t}function dc(...t){return fc(t)}function fc(t){return t.length===0?Qe:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Uw(n)?n:new Ir(n,r,i);return Er(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Fh(r),new r((i,o)=>{let s=new Ir({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Sr](){return this}pipe(...n){return fc(n)(this)}toPromise(n){return n=Fh(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Fh(t){var e;return(e=t??pt.Promise)!==null&&e!==void 0?e:Promise}function Bw(t){return t&&F(t.next)&&F(t.error)&&F(t.complete)}function Uw(t){return t&&t instanceof Un||Bw(t)&&ls(t)}function hc(t){return F(t?.lift)}function Z(t){return e=>{if(hc(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new pc(t,e,n,r,i)}var pc=class extends Un{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mr(){return Z((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ar=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,hc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new De;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=De.EMPTY)}return e}refCount(){return Mr()(this)}};var Lh=_r(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ds(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Lh}next(n){Er(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Er(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Er(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?sc:(this.currentObservers=null,o.push(n),new De(()=>{this.currentObservers=null,Ai(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new ds(e,n),t})(),ds=class extends Ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:sc}};var pe=class extends Ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var nt=new oe(t=>t.complete());function Vh(t){return t&&F(t.schedule)}function $h(t){return t[t.length-1]}function fs(t){return F($h(t))?t.pop():void 0}function vn(t){return Vh($h(t))?t.pop():void 0}function Bh(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function jh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hn(t){return this instanceof Hn?(this.v=t,this):new Hn(t)}function Uh(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(m,p){o.push([f,h,m,p])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(m){d(o[0][3],m)}}function l(f){f.value instanceof Hn?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Hh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jh=="function"?jh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var hs=t=>t&&typeof t.length=="number"&&typeof t!="function";function ps(t){return F(t?.then)}function ms(t){return F(t[Sr])}function gs(t){return Symbol.asyncIterator&&F(t?.[Symbol.asyncIterator])}function ys(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Hw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vs=Hw();function ws(t){return F(t?.[vs])}function bs(t){return Uh(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Hn(n.read());if(i)return yield Hn(void 0);yield yield Hn(r)}}finally{n.releaseLock()}})}function Cs(t){return F(t?.getReader)}function Ce(t){if(t instanceof oe)return t;if(t!=null){if(ms(t))return Gw(t);if(hs(t))return qw(t);if(ps(t))return zw(t);if(gs(t))return Gh(t);if(ws(t))return Ww(t);if(Cs(t))return Yw(t)}throw ys(t)}function Gw(t){return new oe(e=>{let n=t[Sr]();if(F(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qw(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function zw(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,cs)})}function Ww(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Gh(t){return new oe(e=>{Kw(t,e).catch(n=>e.error(n))})}function Yw(t){return Gh(bs(t))}function Kw(t,e){var n,r,i,o;return Bh(this,void 0,void 0,function*(){try{for(n=Hh(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function ze(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function _s(t,e=0){return Z((n,r)=>{n.subscribe(Y(r,i=>ze(r,t,()=>r.next(i),e),()=>ze(r,t,()=>r.complete(),e),i=>ze(r,t,()=>r.error(i),e)))})}function Ds(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function qh(t,e){return Ce(t).pipe(Ds(e),_s(e))}function zh(t,e){return Ce(t).pipe(Ds(e),_s(e))}function Wh(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Yh(t,e){return new oe(n=>{let r;return ze(n,e,()=>{r=t[vs](),ze(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function Es(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{ze(n,e,()=>{let r=t[Symbol.asyncIterator]();ze(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Kh(t,e){return Es(bs(t),e)}function Qh(t,e){if(t!=null){if(ms(t))return qh(t,e);if(hs(t))return Wh(t,e);if(ps(t))return zh(t,e);if(gs(t))return Es(t,e);if(ws(t))return Yh(t,e);if(Cs(t))return Kh(t,e)}throw ys(t)}function ve(t,e){return e?Qh(t,e):Ce(t)}function V(...t){let e=vn(t);return ve(t,e)}function Tr(t,e){let n=F(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function mc(t){return!!t&&(t instanceof oe||F(t.lift)&&F(t.subscribe))}var Jt=_r(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function K(t,e){return Z((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Qw}=Array;function Zw(t,e){return Qw(e)?t(...e):t(e)}function Is(t){return K(e=>Zw(t,e))}var{isArray:Jw}=Array,{getPrototypeOf:Xw,prototype:e0,keys:t0}=Object;function Ss(t){if(t.length===1){let e=t[0];if(Jw(e))return{args:e,keys:null};if(n0(e)){let n=t0(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function n0(t){return t&&typeof t=="object"&&Xw(t)===e0}function Ms(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function As(...t){let e=vn(t),n=fs(t),{args:r,keys:i}=Ss(t);if(r.length===0)return ve([],e);let o=new oe(r0(r,e,i?s=>Ms(i,s):Qe));return n?o.pipe(Is(n)):o}function r0(t,e,n=Qe){return r=>{Zh(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Zh(e,()=>{let c=ve(t[l],e),u=!1;c.subscribe(Y(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Zh(t,e,n){t?ze(n,t,e):e()}function Jh(t,e,n,r,i,o,s,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=p=>c<r?m(p):l.push(p),m=p=>{o&&e.next(p),c++;let g=!1;Ce(n(p,u++)).subscribe(Y(e,v=>{i?.(v),o?h(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){let v=l.shift();s?ze(e,s,()=>m(v)):m(v)}f()}catch(v){e.error(v)}}))};return t.subscribe(Y(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Ee(t,e,n=1/0){return F(e)?Ee((r,i)=>K((o,s)=>e(r,o,i,s))(Ce(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>Jh(r,i,t,n)))}function gc(t=1/0){return Ee(Qe,t)}function Xh(){return gc(1)}function Nr(...t){return Xh()(ve(t,vn(t)))}function Ts(t){return new oe(e=>{Ce(t()).subscribe(e)})}function yc(...t){let e=fs(t),{args:n,keys:r}=Ss(t),i=new oe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;Ce(n[u]).subscribe(Y(o,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?Ms(r,a):a),o.complete())}))}});return e?i.pipe(Is(e)):i}function mt(t,e){return Z((n,r)=>{let i=0;n.subscribe(Y(r,o=>t.call(e,o,i++)&&r.next(o)))})}function wn(t){return Z((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Y(n,void 0,void 0,s=>{o=Ce(t(s,wn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function ep(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(Y(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function xr(t,e){return F(e)?Ee(t,e,1):Ee(t,1)}function bn(t){return Z((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Xt(t){return t<=0?()=>nt:Z((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function vc(t){return K(()=>t)}function Ns(t=i0){return Z((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function i0(){return new Jt}function Ni(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Rt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?mt((i,o)=>t(i,o,r)):Qe,Xt(1),n?bn(e):Ns(()=>new Jt))}function Or(t){return t<=0?()=>nt:Z((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function wc(t,e){let n=arguments.length>=2;return r=>r.pipe(t?mt((i,o)=>t(i,o,r)):Qe,Or(1),n?bn(e):Ns(()=>new Jt))}function bc(t,e){return Z(ep(t,e,arguments.length>=2,!0))}function Cc(...t){let e=vn(t);return Z((n,r)=>{(e?Nr(t,n,e):Nr(t,n)).subscribe(r)})}function gt(t,e){return Z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Y(r,l=>{i?.unsubscribe();let c=0,u=o++;Ce(t(l,u)).subscribe(i=Y(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function _c(t){return Z((e,n)=>{Ce(t).subscribe(Y(n,()=>n.complete(),Ti)),!n.closed&&e.subscribe(n)})}function Ae(t,e,n){let r=F(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Qe}var Fp="https://g.co/ng/security#xss",x=class extends Error{constructor(e,n){super(Ou(e,n)),this.code=e}};function Ou(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var jc=class extends Ze{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Dc(o),i&&(i=Dc(i)),s&&(s=Dc(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof De&&e.add(a),a}};function Dc(t){return e=>{setTimeout(t,void 0,e)}}var Te=jc;var G=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(G||{});function We(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(We).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function tp(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Lp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Lp||{}),Lt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Lt||{});function ra(t){return{toString:t}.toString()}var xi=globalThis;var Lr={},it=[];function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function o0(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var s0=fe({\u0275cmp:fe}),a0=fe({\u0275dir:fe}),l0=fe({\u0275pipe:fe}),c0=fe({\u0275mod:fe}),$s=fe({\u0275fac:fe}),Oi=fe({__NG_ELEMENT_ID__:fe}),np=fe({__NG_ENV_ID__:fe}),Le=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Le||{});function Vp(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Bc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];d0(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function u0(t){return t===3||t===4||t===6}function d0(t){return t.charCodeAt(0)===64}function Pi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?rp(t,n,i,null,e[++r]):rp(t,n,i,null,null))}}return t}function rp(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var $p="ng-template";function f0(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&Vp(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function jp(t){return t.type===4&&t.value!==$p}function h0(t,e,n){let r=t.type===4&&!n?$p:t.value;return e===r}function p0(t,e,n){let r=4,i=t.attrs||[],o=y0(i),s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!yt(r)&&!yt(l))return!1;if(s&&yt(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!h0(t,l,n)||l===""&&e.length===1){if(yt(r))return!1;s=!0}}else{let c=r&8?l:e[++a];if(r&8&&t.attrs!==null){if(!f0(t.attrs,c,n)){if(yt(r))return!1;s=!0}continue}let u=r&8?"class":l,d=m0(u,i,jp(t),n);if(d===-1){if(yt(r))return!1;s=!0;continue}if(c!==""){let f;d>o?f="":f=i[d+1].toLowerCase();let h=r&8?f:null;if(h&&Vp(h,c,0)!==-1||r&2&&c!==f){if(yt(r))return!1;s=!0}}}}return yt(r)||s}function yt(t){return(t&1)===0}function m0(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return v0(e,t)}function g0(t,e,n=!1){for(let r=0;r<e.length;r++)if(p0(t,e[r],n))return!0;return!1}function y0(t){for(let e=0;e<t.length;e++){let n=t[e];if(u0(n))return e}return t.length}function v0(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ip(t,e){return t?":not("+e.trim()+")":e}function w0(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yt(s)&&(e+=ip(o,i),i=""),r=s,o=o||!yt(r);n++}return i!==""&&(e+=ip(o,i)),e}function b0(t){return t.map(w0).join(",")}function C0(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!yt(i))break;i=o}r++}return{attrs:e,classes:n}}function Ve(t){return ra(()=>{let e=qp(t),n=U(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Lp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Lt.Emulated,styles:t.styles||it,_:null,schemas:t.schemas||null,tView:null,id:""});zp(n);let r=t.dependencies;return n.directiveDefs=sp(r,!1),n.pipeDefs=sp(r,!0),n.id=E0(n),n})}function _0(t){return zn(t)||Bp(t)}function D0(t){return t!==null}function tr(t){return ra(()=>({type:t.type,bootstrap:t.bootstrap||it,declarations:t.declarations||it,imports:t.imports||it,exports:t.exports||it,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function op(t,e){if(t==null)return Lr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Le.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Le.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Je(t){return ra(()=>{let e=qp(t);return zp(e),e})}function zn(t){return t[s0]||null}function Bp(t){return t[a0]||null}function Up(t){return t[l0]||null}function Hp(t){let e=zn(t)||Bp(t)||Up(t);return e!==null?e.standalone:!1}function Gp(t,e){let n=t[c0]||null;if(!n&&e===!0)throw new Error(`Type ${We(t)} does not have '\u0275mod' property.`);return n}function qp(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Lr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||it,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:op(t.inputs,e),outputs:op(t.outputs),debugInfo:null}}function zp(t){t.features?.forEach(e=>e(t))}function sp(t,e){if(!t)return null;let n=e?Up:_0;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(D0)}function E0(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var on=0,L=1,k=2,xe=3,vt=4,bt=5,Fi=6,Li=7,Pe=8,Vr=9,en=10,Ie=11,Vi=12,ap=13,Gr=14,wt=15,Zi=16,kr=17,tn=18,ia=19,Wp=20,ki=21,Ec=22,Wn=23,ot=25,Yp=1;var Yn=7,js=8,$r=9,Fe=10,ku=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ku||{});function Gn(t){return Array.isArray(t)&&typeof t[Yp]=="object"}function sn(t){return Array.isArray(t)&&t[Yp]===!0}function Kp(t){return(t.flags&4)!==0}function oa(t){return t.componentOffset>-1}function Ru(t){return(t.flags&1)===1}function _n(t){return!!t.template}function I0(t){return(t[k]&512)!==0}var S0="svg",M0="math",A0=!1;function T0(){return A0}function Vt(t){for(;Array.isArray(t);)t=t[on];return t}function Qp(t,e){return Vt(e[t])}function Ct(t,e){return Vt(e[t.index])}function Pu(t,e){return t.data[e]}function N0(t,e){return t[e]}function En(t,e){let n=e[t];return Gn(n)?n:n[on]}function x0(t){return(t[k]&4)===4}function Fu(t){return(t[k]&128)===128}function O0(t){return sn(t[xe])}function Bs(t,e){return e==null?null:t[e]}function Zp(t){t[kr]=0}function k0(t){t[k]&1024||(t[k]|=1024,Fu(t)&&$i(t))}function R0(t,e){for(;t>0;)e=e[Gr],t--;return e}function Lu(t){return!!(t[k]&9216||t[Wn]?.dirty)}function Uc(t){Lu(t)?$i(t):t[k]&64&&(T0()?(t[k]|=1024,$i(t)):t[en].changeDetectionScheduler?.notify())}function $i(t){t[en].changeDetectionScheduler?.notify();let e=ji(t);for(;e!==null&&!(e[k]&8192||(e[k]|=8192,!Fu(e)));)e=ji(e)}function P0(t,e){if((t[k]&256)===256)throw new x(911,!1);t[ki]===null&&(t[ki]=[]),t[ki].push(e)}function ji(t){let e=t[xe];return sn(e)?e[xe]:e}var q={lFrame:im(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function F0(){return q.lFrame.elementDepthCount}function L0(){q.lFrame.elementDepthCount++}function V0(){q.lFrame.elementDepthCount--}function Jp(){return q.bindingsEnabled}function $0(){return q.skipHydrationRootTNode!==null}function j0(t){return q.skipHydrationRootTNode===t}function B0(){q.skipHydrationRootTNode=null}function se(){return q.lFrame.lView}function He(){return q.lFrame.tView}function ce(t){return q.lFrame.contextLView=t,t[Pe]}function ue(t){return q.lFrame.contextLView=null,t}function Xe(){let t=Xp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Xp(){return q.lFrame.currentTNode}function U0(){let t=q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ji(t,e){let n=q.lFrame;n.currentTNode=t,n.isParent=e}function em(){return q.lFrame.isParent}function H0(){q.lFrame.isParent=!1}function G0(){return q.lFrame.contextLView}function q0(t){return q.lFrame.bindingIndex=t}function Xi(){return q.lFrame.bindingIndex++}function z0(t){let e=q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function W0(){return q.lFrame.inI18n}function Y0(t,e){let n=q.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hc(e)}function K0(){return q.lFrame.currentDirectiveIndex}function Hc(t){q.lFrame.currentDirectiveIndex=t}function Q0(t){let e=q.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function tm(){return q.lFrame.currentQueryIndex}function Vu(t){q.lFrame.currentQueryIndex=t}function Z0(t){let e=t[L];return e.type===2?e.declTNode:e.type===1?t[bt]:null}function nm(t,e,n){if(n&G.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&G.Host);)if(i=Z0(o),i===null||(o=o[Gr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=q.lFrame=rm();return r.currentTNode=e,r.lView=t,!0}function $u(t){let e=rm(),n=t[L];q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function rm(){let t=q.lFrame,e=t===null?null:t.child;return e===null?im(t):e}function im(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function om(){let t=q.lFrame;return q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var sm=om;function ju(){let t=om();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function J0(t){return(q.lFrame.contextLView=R0(t,q.lFrame.contextLView))[Pe]}function nr(){return q.lFrame.selectedIndex}function Kn(t){q.lFrame.selectedIndex=t}function Bu(){let t=q.lFrame;return Pu(t.tView,t.selectedIndex)}function X0(){return q.lFrame.currentNamespace}var am=!0;function Uu(){return am}function Hu(t){am=t}function eb(){return qr(Xe(),se())}function qr(t,e){return new $t(Ct(t,e))}var $t=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=eb;let t=e;return t})();function tb(t){return t instanceof $t?t.nativeElement:t}function nb(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function rb(t){return t.flat(Number.POSITIVE_INFINITY)}function Gu(t,e){t.forEach(n=>Array.isArray(n)?Gu(n,e):e(n))}function lm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Us(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ib(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function ob(t,e,n){let r=eo(t,e);return r>=0?t[r|1]=n:(r=~r,ib(t,r,e,n)),r}function Ic(t,e){let n=eo(t,e);if(n>=0)return t[n|1]}function eo(t,e){return sb(t,e,1)}function sb(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}function ab(){return this._results[Symbol.iterator]()}var Gc=class t{get changes(){return this._changes??=new Te}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=ab)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=rb(e);(this._changesDetected=!nb(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function cm(t){return(t.flags&128)===128}var qc;function um(t){qc=t}function lb(){if(qc!==void 0)return qc;if(typeof document<"u")return document;throw new x(210,!1)}function P(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rr(t){return{providers:t.providers||[],imports:t.imports||[]}}function sa(t){return lp(t,fm)||lp(t,hm)}function dm(t){return sa(t)!==null}function lp(t,e){return t.hasOwnProperty(e)?t[e]:null}function cb(t){let e=t&&(t[fm]||t[hm]);return e||null}function cp(t){return t&&(t.hasOwnProperty(up)||t.hasOwnProperty(ub))?t[up]:null}var fm=fe({\u0275prov:fe}),up=fe({\u0275inj:fe}),hm=fe({ngInjectableDef:fe}),ub=fe({ngInjectorDef:fe}),j=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},qu=new j("",{providedIn:"root",factory:()=>db}),db="ng",zu=new j(""),zr=new j("",{providedIn:"platform",factory:()=>"unknown"});var Wu=new j("",{providedIn:"root",factory:()=>lb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fb=fe({__forward_ref__:fe});function ir(t){return t.__forward_ref__=ir,t.toString=function(){return We(this())},t}function Ue(t){return pm(t)?t():t}function pm(t){return typeof t=="function"&&t.hasOwnProperty(fb)&&t.__forward_ref__===ir}function mm(t){return t&&!!t.\u0275providers}function Yu(t){return typeof t=="string"?t:t==null?"":String(t)}function hb(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yu(t)}function pb(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new x(-200,t)}function Ku(t,e){throw new x(-201,!1)}var zc;function mb(){return zc}function rt(t){let e=zc;return zc=t,e}function gm(t,e,n){let r=sa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&G.Optional)return null;if(e!==void 0)return e;Ku(t,"Injector")}var gb={},Bi=gb,yb="__NG_DI_FLAG__",Hs="ngTempTokenPath",vb="ngTokenPath",wb=/\n/gm,bb="\u0275",dp="__source",Ri;function Cn(t){let e=Ri;return Ri=t,e}function Cb(t,e=G.Default){if(Ri===void 0)throw new x(-203,!1);return Ri===null?gm(t,void 0,e):Ri.get(t,e&G.Optional?null:void 0,e)}function J(t,e=G.Default){return(mb()||Cb)(Ue(t),e)}function A(t,e=G.Default){return J(t,aa(e))}function aa(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Wc(t){let e=[];for(let n=0;n<t.length;n++){let r=Ue(t[n]);if(Array.isArray(r)){if(r.length===0)throw new x(900,!1);let i,o=G.Default;for(let s=0;s<r.length;s++){let a=r[s],l=_b(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(J(i,o))}else e.push(J(r))}return e}function _b(t){return t[yb]}function Db(t,e,n,r){let i=t[Hs];throw e[dp]&&i.unshift(e[dp]),t.message=Eb(`
`+t.message,i,n,r),t[vb]=i,t[Hs]=null,t}function Eb(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==bb?t.slice(2):t;let i=We(e);if(Array.isArray(e))i=e.map(We).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):We(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wb,`
  `)}`}var Ib="h",Sb="b";var Mb=()=>null;function Qu(t,e,n=!1){return Mb(t,e,n)}function jr(t,e){let n=t.hasOwnProperty($s);return n?t[$s]:null}var Br=new j(""),ym=new j("",-1),vm=new j(""),Gs=class{get(e,n=Bi){if(n===Bi){let r=new Error(`NullInjectorError: No provider for ${We(e)}!`);throw r.name="NullInjectorError",r}return n}};function la(t){return{\u0275providers:t}}function Ab(...t){return{\u0275providers:wm(!0,t),\u0275fromNgModule:!0}}function wm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Gu(e,s=>{let a=s;Yc(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&bm(i,o),n}function bm(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Zu(i,o=>{e(o,r)})}}function Yc(t,e,n,r){if(t=Ue(t),!t)return!1;let i=null,o=cp(t),s=!o&&zn(t);if(!o&&!s){let l=t.ngModule;if(o=cp(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Yc(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Gu(o.imports,u=>{Yc(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&bm(c,e)}if(!a){let c=jr(i)||(()=>new i);e({provide:i,useFactory:c,deps:it},i),e({provide:vm,useValue:i,multi:!0},i),e({provide:Br,useValue:()=>J(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=t;Zu(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Zu(t,e){for(let n of t)mm(n)&&(n=n.\u0275providers),Array.isArray(n)?Zu(n,e):e(n)}var Tb=fe({provide:String,useValue:fe});function Cm(t){return t!==null&&typeof t=="object"&&Tb in t}function Nb(t){return!!(t&&t.useExisting)}function xb(t){return!!(t&&t.useFactory)}function Ur(t){return typeof t=="function"}function Ob(t){return!!t.useClass}var ca=new j(""),ks={},kb={},Sc;function Ju(){return Sc===void 0&&(Sc=new Gs),Sc}var st=class{},Ui=class extends st{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qc(e,s=>this.processProvider(s)),this.records.set(ym,Rr(void 0,this)),i.has("environment")&&this.records.set(st,Rr(void 0,this));let o=this.records.get(ca);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(vm,it,G.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Cn(this),r=rt(void 0),i;try{return e()}finally{Cn(n),rt(r)}}get(e,n=Bi,r=G.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(np))return e[np](this);r=aa(r);let i,o=Cn(this),s=rt(void 0);try{if(!(r&G.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=Vb(e)&&sa(e);c&&this.injectableDefInScope(c)?l=Rr(Kc(e),ks):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&G.Self?Ju():this.parent;return n=r&G.Optional&&n===Bi?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Hs]=a[Hs]||[]).unshift(We(e)),o)throw a;return Db(a,e,"R3InjectorError",this.source)}else throw a}finally{rt(s),Cn(o)}}resolveInjectorInitializers(){let e=Cn(this),n=rt(void 0),r;try{let i=this.get(Br,it,G.Self);for(let o of i)o()}finally{Cn(e),rt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(We(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){e=Ue(e);let n=Ur(e)?e:Ue(e&&e.provide),r=Pb(e);if(!Ur(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Rr(void 0,ks,!0),i.factory=()=>Wc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===ks&&(n.value=kb,n.value=n.factory()),typeof n.value=="object"&&n.value&&Lb(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ue(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Kc(t){let e=sa(t),n=e!==null?e.factory:jr(t);if(n!==null)return n;if(t instanceof j)throw new x(204,!1);if(t instanceof Function)return Rb(t);throw new x(204,!1)}function Rb(t){if(t.length>0)throw new x(204,!1);let n=cb(t);return n!==null?()=>n.factory(t):()=>new t}function Pb(t){if(Cm(t))return Rr(void 0,t.useValue);{let e=_m(t);return Rr(e,ks)}}function _m(t,e,n){let r;if(Ur(t)){let i=Ue(t);return jr(i)||Kc(i)}else if(Cm(t))r=()=>Ue(t.useValue);else if(xb(t))r=()=>t.useFactory(...Wc(t.deps||[]));else if(Nb(t))r=()=>J(Ue(t.useExisting));else{let i=Ue(t&&(t.useClass||t.provide));if(Fb(t))r=()=>new i(...Wc(t.deps));else return jr(i)||Kc(i)}return r}function Rr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fb(t){return!!t.deps}function Lb(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Vb(t){return typeof t=="function"||typeof t=="object"&&t instanceof j}function Qc(t,e){for(let n of t)Array.isArray(n)?Qc(n,e):n&&mm(n)?Qc(n.\u0275providers,e):e(n)}function or(t,e){t instanceof Ui&&t.assertNotDestroyed();let n,r=Cn(t),i=rt(void 0);try{return e()}finally{Cn(r),rt(i)}}function $b(t){return typeof t=="function"}var Zc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Dm(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function sr(){return Em}function Em(t){return t.type.prototype.ngOnChanges&&(t.setInput=Bb),jb}sr.ngInherit=!0;function jb(){let t=Sm(this),e=t?.current;if(e){let n=t.previous;if(n===Lr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Bb(t,e,n,r,i){let o=this.declaredInputs[r],s=Sm(t)||Ub(t,{previous:Lr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Zc(c&&c.currentValue,n,l===Lr),Dm(t,e,i,n)}var Im="__ngSimpleChanges__";function Sm(t){return t[Im]||null}function Ub(t,e){return t[Im]=e}var fp=null;var Pt=function(t,e,n){fp?.(t,e,n)};function Hb(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Em(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Xu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Rs(t,e,n){Mm(t,e,3,n)}function Ps(t,e,n,r){(t[k]&3)===n&&Mm(t,e,n,r)}function Mc(t,e){let n=t[k];(n&3)===e&&(n&=16383,n+=1,t[k]=n)}function Mm(t,e,n,r){let i=r!==void 0?t[kr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[kr]+=65536),(a<o||o==-1)&&(Gb(t,n,e,l),t[kr]=(t[kr]&4294901760)+l+2),l++}function hp(t,e){Pt(4,t,e);let n=Ne(null);try{e.call(t)}finally{Ne(n),Pt(5,t,e)}}function Gb(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[k]>>14<t[kr]>>16&&(t[k]&3)===e&&(t[k]+=16384,hp(a,o)):hp(a,o)}var Fr=-1,Qn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function qb(t){return t instanceof Qn}function zb(t){return(t.flags&8)!==0}function Wb(t){return(t.flags&16)!==0}function Am(t){return t!==Fr}function qs(t){return t&32767}function Yb(t){return t>>16}function zs(t,e){let n=Yb(t),r=e;for(;n>0;)r=r[Gr],n--;return r}var Jc=!0;function pp(t){let e=Jc;return Jc=t,e}var Kb=256,Tm=Kb-1,Nm=5,Qb=0,Ft={};function Zb(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Oi)&&(r=n[Oi]),r==null&&(r=n[Oi]=Qb++);let i=r&Tm,o=1<<i;e.data[t+(i>>Nm)]|=o}function Ws(t,e){let n=xm(t,e);if(n!==-1)return n;let r=e[L];r.firstCreatePass&&(t.injectorIndex=e.length,Ac(r.data,t),Ac(e,null),Ac(r.blueprint,null));let i=ed(t,e),o=t.injectorIndex;if(Am(i)){let s=qs(i),a=zs(i,e),l=a[L].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Ac(t,e){t.push(0,0,0,0,0,0,0,0,e)}function xm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ed(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Fm(i),r===null)return Fr;if(n++,i=i[Gr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fr}function Xc(t,e,n){Zb(t,e,n)}function Om(t,e,n){if(n&G.Optional||t!==void 0)return t;Ku(e,"NodeInjector")}function km(t,e,n,r){if(n&G.Optional&&r===void 0&&(r=null),!(n&(G.Self|G.Host))){let i=t[Vr],o=rt(void 0);try{return i?i.get(e,r,n&G.Optional):gm(e,r,n&G.Optional)}finally{rt(o)}}return Om(r,e,n)}function Rm(t,e,n,r=G.Default,i){if(t!==null){if(e[k]&2048&&!(r&G.Self)){let s=tC(t,e,n,r,Ft);if(s!==Ft)return s}let o=Pm(t,e,n,r,Ft);if(o!==Ft)return o}return km(e,n,r,i)}function Pm(t,e,n,r,i){let o=Xb(n);if(typeof o=="function"){if(!nm(e,t,r))return r&G.Host?Om(i,n,r):km(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&G.Optional))Ku(n);else return s}finally{sm()}}else if(typeof o=="number"){let s=null,a=xm(t,e),l=Fr,c=r&G.Host?e[wt][bt]:null;for((a===-1||r&G.SkipSelf)&&(l=a===-1?ed(t,e):e[a+8],l===Fr||!gp(r,!1)?a=-1:(s=e[L],a=qs(l),e=zs(l,e)));a!==-1;){let u=e[L];if(mp(o,a,u.data)){let d=Jb(a,e,n,s,r,c);if(d!==Ft)return d}l=e[a+8],l!==Fr&&gp(r,e[L].data[a+8]===c)&&mp(o,a,e)?(s=u,a=qs(l),e=zs(l,e)):a=-1}}return i}function Jb(t,e,n,r,i,o){let s=e[L],a=s.data[t+8],l=r==null?oa(a)&&Jc:r!=s&&(a.type&3)!==0,c=i&G.Host&&o===a,u=Fs(a,s,n,l,c);return u!==null?Zn(e,s,u,a):Ft}function Fs(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let m=s[h];if(h<l&&n===m||h>=l&&m.type===n)return h}if(i){let h=s[l];if(h&&_n(h)&&h.type===n)return l}return null}function Zn(t,e,n,r){let i=t[n],o=e.data;if(qb(i)){let s=i;s.resolving&&pb(hb(o[n]));let a=pp(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?rt(s.injectImpl):null,u=nm(t,r,G.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Hb(n,o[n],e)}finally{c!==null&&rt(c),pp(a),s.resolving=!1,sm()}}return i}function Xb(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Oi)?t[Oi]:void 0;return typeof e=="number"?e>=0?e&Tm:eC:e}function mp(t,e,n){let r=1<<t;return!!(n[e+(t>>Nm)]&r)}function gp(t,e){return!(t&G.Self)&&!(t&G.Host&&e)}var qn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Rm(this._tNode,this._lView,e,aa(r),n)}};function eC(){return new qn(Xe(),se())}function to(t){return ra(()=>{let e=t.prototype.constructor,n=e[$s]||eu(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[$s]||eu(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function eu(t){return pm(t)?()=>{let e=eu(Ue(t));return e&&e()}:jr(t)}function tC(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[k]&2048&&!(s[k]&512);){let a=Pm(o,s,n,r|G.Self,Ft);if(a!==Ft)return a;let l=o.parent;if(!l){let c=s[Wp];if(c){let u=c.get(n,Ft,r);if(u!==Ft)return u}l=Fm(s),s=s[Gr]}o=l}return i}function Fm(t){let e=t[L],n=e.type;return n===2?e.declTNode:n===1?t[bt]:null}function yp(t,e=null,n=null,r){let i=Lm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Lm(t,e=null,n=null,r,i=new Set){let o=[n||it,Ab(t)];return r=r||(typeof t=="object"?void 0:We(t)),new Ui(o,e||Ju(),r||null,i)}var Wr=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return yp({name:""},i,r,"");{let o=r.name??"";return yp({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Bi,e.NULL=new Gs,e.\u0275prov=P({token:e,providedIn:"any",factory:()=>J(ym)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})(),nC="ngOriginalError";function Tc(t){return t[nC]}var nn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Tc(e);for(;n&&Tc(n);)n=Tc(n);return n||null}},Vm=new j("",{providedIn:"root",factory:()=>A(nn).handleError.bind(void 0)});var $m=!1,rC=new j("",{providedIn:"root",factory:()=>$m});var Ys=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fp})`}};function ua(t){return t instanceof Ys?t.changingThisBreaksApplicationSecurity:t}function jm(t,e){let n=iC(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Fp})`)}return n===e}function iC(t){return t instanceof Ys&&t.getTypeName()||null}var oC=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bm(t){return t=String(t),t.match(oC)?t:"unsafe:"+t}var td=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(td||{});function Um(t){let e=sC();return e?e.sanitize(td.URL,t)||"":jm(t,"URL")?ua(t):Bm(Yu(t))}function sC(){let t=se();return t&&t[en].sanitizer}var Hm=new Map,aC=0;function lC(){return aC++}function cC(t){Hm.set(t[ia],t)}function uC(t){Hm.delete(t[ia])}var vp="__ngContext__";function Jn(t,e){Gn(e)?(t[vp]=e[ia],cC(e)):t[vp]=e}function Gm(t){return t instanceof Function?t():t}var rn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(rn||{}),dC;function nd(t,e){return dC(t,e)}function Pr(t,e,n,r,i){if(r!=null){let o,s=!1;sn(r)?o=r:Gn(r)&&(s=!0,r=r[on]);let a=Vt(r);t===0&&n!==null?i==null?Ym(e,n,a):Ks(e,n,a,i||null,!0):t===1&&n!==null?Ks(e,n,a,i||null,!0):t===2?AC(e,a,s):t===3&&e.destroyNode(a),o!=null&&NC(e,t,o,n,i)}}function fC(t,e){return t.createText(e)}function hC(t,e,n){t.setValue(e,n)}function qm(t,e,n){return t.createElement(e,n)}function pC(t,e){zm(t,e),e[on]=null,e[bt]=null}function mC(t,e,n,r,i,o){r[on]=i,r[bt]=e,fa(t,r,n,1,i,o)}function zm(t,e){fa(t,e,e[Ie],2,null,null)}function gC(t){let e=t[Vi];if(!e)return Nc(t[L],t);for(;e;){let n=null;if(Gn(e))n=e[Vi];else{let r=e[Fe];r&&(n=r)}if(!n){for(;e&&!e[vt]&&e!==t;)Gn(e)&&Nc(e[L],e),e=e[xe];e===null&&(e=t),Gn(e)&&Nc(e[L],e),n=e&&e[vt]}e=n}}function yC(t,e,n,r){let i=Fe+r,o=n.length;r>0&&(n[i-1][vt]=e),r<o-Fe?(e[vt]=n[i],lm(n,Fe+r,e)):(n.push(e),e[vt]=null),e[xe]=n;let s=e[Zi];s!==null&&n!==s&&vC(s,e);let a=e[tn];a!==null&&a.insertView(t),Uc(e),e[k]|=128}function vC(t,e){let n=t[$r],i=e[xe][xe][wt];e[wt]!==i&&(t[k]|=ku.HasTransplantedViews),n===null?t[$r]=[e]:n.push(e)}function Wm(t,e){let n=t[$r],r=n.indexOf(e);n.splice(r,1)}function Hi(t,e){if(t.length<=Fe)return;let n=Fe+e,r=t[n];if(r){let i=r[Zi];i!==null&&i!==t&&Wm(i,r),e>0&&(t[n-1][vt]=r[vt]);let o=Us(t,Fe+e);pC(r[L],r);let s=o[tn];s!==null&&s.detachView(o[L]),r[xe]=null,r[vt]=null,r[k]&=-129}return r}function da(t,e){if(!(e[k]&256)){let n=e[Ie];n.destroyNode&&fa(t,e,n,3,null,null),gC(e)}}function Nc(t,e){if(!(e[k]&256)){e[k]&=-129,e[k]|=256,e[Wn]&&Th(e[Wn]),bC(t,e),wC(t,e),e[L].type===1&&e[Ie].destroy();let n=e[Zi];if(n!==null&&sn(e[xe])){n!==e[xe]&&Wm(n,e);let r=e[tn];r!==null&&r.detachView(t)}uC(e)}}function wC(t,e){let n=t.cleanup,r=e[Li];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Li]=null);let i=e[ki];if(i!==null){e[ki]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function bC(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Qn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Pt(4,a,l);try{l.call(a)}finally{Pt(5,a,l)}}else{Pt(4,i,o);try{o.call(i)}finally{Pt(5,i,o)}}}}}function CC(t,e,n){return _C(t,e.parent,n)}function _C(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[on];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Lt.None||o===Lt.Emulated)return null}return Ct(r,n)}}function Ks(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Ym(t,e,n){t.appendChild(e,n)}function wp(t,e,n,r,i){r!==null?Ks(t,e,n,r,i):Ym(t,e,n)}function DC(t,e,n,r){t.removeChild(e,n,r)}function rd(t,e){return t.parentNode(e)}function EC(t,e){return t.nextSibling(e)}function IC(t,e,n){return MC(t,e,n)}function SC(t,e,n){return t.type&40?Ct(t,n):null}var MC=SC,bp;function id(t,e,n,r){let i=CC(t,r,e),o=e[Ie],s=r.parent||e[bt],a=IC(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)wp(o,i,n[l],a,!1);else wp(o,i,n,a,!1);bp!==void 0&&bp(o,r,e,n,i)}function Ls(t,e){if(e!==null){let n=e.type;if(n&3)return Ct(e,t);if(n&4)return tu(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ls(t,r);{let i=t[e.index];return sn(i)?tu(-1,i):Vt(i)}}else{if(n&32)return nd(e,t)()||Vt(t[e.index]);{let r=Km(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ji(t[wt]);return Ls(i,r)}else return Ls(t,e.next)}}}return null}function Km(t,e){if(e!==null){let r=t[wt][bt],i=e.projection;return r.projection[i]}return null}function tu(t,e){let n=Fe+t+1;if(n<e.length){let r=e[n],i=r[L].firstChild;if(i!==null)return Ls(r,i)}return e[Yn]}function AC(t,e,n){let r=rd(t,e);r&&DC(t,r,e,n)}function od(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],l=n.type;if(s&&e===0&&(a&&Jn(Vt(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)od(t,e,n.child,r,i,o,!1),Pr(e,t,i,a,o);else if(l&32){let c=nd(n,r),u;for(;u=c();)Pr(e,t,i,u,o);Pr(e,t,i,a,o)}else l&16?TC(t,e,r,n,i,o):Pr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function fa(t,e,n,r,i,o){od(n,r,t.firstChild,e,i,o,!1)}function TC(t,e,n,r,i,o){let s=n[wt],l=s[bt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Pr(e,t,i,u,o)}else{let c=l,u=s[xe];cm(r)&&(c.flags|=128),od(t,e,c,u,i,o,!0)}}function NC(t,e,n,r,i){let o=n[Yn],s=Vt(n);o!==s&&Pr(e,t,r,o,i);for(let a=Fe;a<n.length;a++){let l=n[a];fa(l[L],l,t,e,r,o)}}function xC(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:rn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=rn.Important),t.setStyle(n,r,i,o))}}function OC(t,e,n){t.setAttribute(e,"style",n)}function Qm(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Zm(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Bc(t,e,r),i!==null&&Qm(t,e,i),o!==null&&OC(t,e,o)}var ar={};function de(t=1){Jm(He(),se(),nr()+t,!1)}function Jm(t,e,n,r){if(!r)if((e[k]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Rs(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ps(e,o,0,n)}Kn(n)}function z(t,e=G.Default){let n=se();if(n===null)return J(t,e);let r=Xe();return Rm(r,n,Ue(t),e)}function Xm(t,e,n,r,i,o){let s=Ne(null);try{let a=null;i&Le.SignalBased&&(a=e[r][nc]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Le.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):Dm(e,a,r,o)}finally{Ne(s)}}function kC(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Kn(~i);else{let o=i,s=n[++r],a=n[++r];Y0(s,o);let l=e[o];a(2,l)}}}finally{Kn(-1)}}function ha(t,e,n,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[on]=i,d[k]=r|4|128|8|64,(c!==null||t&&t[k]&2048)&&(d[k]|=2048),Zp(d),d[xe]=d[Gr]=t,d[Pe]=n,d[en]=s||t&&t[en],d[Ie]=a||t&&t[Ie],d[Vr]=l||t&&t[Vr]||null,d[bt]=o,d[ia]=lC(),d[Fi]=u,d[Wp]=c,d[wt]=e.type==2?t[wt]:d,d}function pa(t,e,n,r,i){let o=t.data[e];if(o===null)o=RC(t,e,n,r,i),W0()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=U0();o.injectorIndex=s===null?-1:s.injectorIndex}return Ji(o,!0),o}function RC(t,e,n,r,i){let o=Xp(),s=em(),a=s?o:o&&o.parent,l=t.data[e]=jC(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function eg(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function tg(t,e,n,r,i){let o=nr(),s=r&2;try{Kn(-1),s&&e.length>ot&&Jm(t,e,ot,!1),Pt(s?2:0,i),n(r,i)}finally{Kn(o),Pt(s?3:1,i)}}function ng(t,e,n){if(Kp(e)){let r=Ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{Ne(r)}}}function rg(t,e,n){Jp()&&(zC(t,e,n,Ct(n,e)),(n.flags&64)===64&&lg(t,e,n))}function ig(t,e,n=Ct){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function og(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=sd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function sd(t,e,n,r,i,o,s,a,l,c,u){let d=ot+r,f=d+i,h=PC(d,f),m=typeof c=="function"?c():c;return h[L]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}function PC(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ar);return n}function FC(t,e,n,r){let o=r.get(rC,$m)||n===Lt.ShadowDom,s=t.selectRootElement(e,o);return LC(s),s}function LC(t){VC(t)}var VC=()=>null;function $C(t,e,n,r){let i=dg(e);i.push(n),t.firstCreatePass&&fg(t).push(r,i.length-1)}function jC(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return $0()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Cp(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=Le.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?_p(r,n,c,a,l):_p(r,n,c,a)}return r}function _p(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function BC(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,m=f?f.outputs:null;l=Cp(0,d.inputs,u,l,h),c=Cp(1,d.outputs,u,c,m);let p=l!==null&&s!==null&&!jp(e)?t_(l,u,s):null;a.push(p)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function UC(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function ad(t,e,n,r,i,o,s,a){let l=Ct(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(ld(t,n,u,r,i),oa(e)&&HC(n,e.index)):e.type&3?(r=UC(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function HC(t,e){let n=En(e,t);n[k]&16||(n[k]|=64)}function sg(t,e,n,r){if(Jp()){let i=r===null?null:{"":-1},o=YC(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&ag(t,e,n,s,i,a),i&&KC(n,r,i)}n.mergedAttrs=Pi(n.mergedAttrs,n.attrs)}function ag(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Xc(Ws(n,e),t,r[c].type);ZC(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=eg(t,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];n.mergedAttrs=Pi(n.mergedAttrs,u.hostAttrs),JC(t,n,e,l,u),QC(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}BC(t,n,o)}function GC(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;qC(s)!=a&&s.push(a),s.push(n,r,o)}}function qC(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function zC(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;oa(n)&&XC(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ws(n,e),Jn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let l=t.data[a],c=Zn(e,t,a,n);if(Jn(c,e),s!==null&&e_(e,a-i,c,l,n,s),_n(l)){let u=En(n.index,e);u[Pe]=Zn(e,t,a,n)}}}function lg(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=K0();try{Kn(o);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];Hc(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&WC(l,c)}}finally{Kn(-1),Hc(s)}}function WC(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function YC(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(g0(e,s.selectors,!1))if(r||(r=[]),_n(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;nu(t,e,l)}else r.unshift(s),nu(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function nu(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function KC(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new x(-301,!1);r.push(e[i],o)}}}function QC(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_n(e)&&(n[""]=t)}}function ZC(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function JC(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=jr(i.type,!0)),s=new Qn(o,_n(i),z);t.blueprint[r]=s,n[r]=s,GC(t,e,r,eg(t,n,i.hostVars,ar),i)}function XC(t,e,n){let r=Ct(e,t),i=og(n),o=t[en].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ma(t,ha(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function e_(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];Xm(r,n,l,c,u,d)}}function t_(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function cg(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ug(t,e){let n=t.contentQueries;if(n!==null){let r=Ne(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Vu(o),a.contentQueries(2,e[s],s)}}}finally{Ne(r)}}}function ma(t,e){return t[Vi]?t[ap][vt]=e:t[Vi]=e,t[ap]=e,e}function ru(t,e,n){Vu(0);let r=Ne(null);try{e(t,n)}finally{Ne(r)}}function dg(t){return t[Li]||(t[Li]=[])}function fg(t){return t.cleanup||(t.cleanup=[])}function hg(t,e){let n=t[Vr],r=n?n.get(nn,null):null;r&&r.handleError(e)}function ld(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=e[s],u=t.data[s];Xm(u,c,r,a,l,i)}}function n_(t,e,n){let r=Qp(e,t);hC(t[Ie],r,n)}function r_(t,e){let n=En(e,t),r=n[L];i_(r,n);let i=n[on];i!==null&&n[Fi]===null&&(n[Fi]=Qu(i,n[Vr])),cd(r,n,n[Pe])}function i_(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function cd(t,e,n){$u(e);try{let r=t.viewQuery;r!==null&&ru(1,r,n);let i=t.template;i!==null&&tg(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[tn]?.finishViewCreation(t),t.staticContentQueries&&ug(t,e),t.staticViewQueries&&ru(2,t.viewQuery,n);let o=t.components;o!==null&&o_(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[k]&=-5,ju()}}function o_(t,e){for(let n=0;n<e.length;n++)r_(t,e[n])}function ga(t,e,n,r){let i=e.tView,s=t[k]&4096?4096:16,a=ha(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),l=t[e.index];a[Zi]=l;let c=t[tn];return c!==null&&(a[tn]=c.createEmbeddedView(i)),cd(i,a,n),a}function pg(t,e){let n=Fe+e;if(n<t.length)return t[n]}function Gi(t,e){return!e||e.firstChild===null||cm(t)}function ya(t,e,n,r=!0){let i=e[L];if(yC(i,e,t,n),r){let s=tu(n,t),a=e[Ie],l=rd(a,t[Yn]);l!==null&&mC(i,t[bt],a,e,l,s)}let o=e[Fi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function mg(t,e){let n=Hi(t,e);return n!==void 0&&da(n[L],n),n}function Qs(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Vt(o)),sn(o)&&s_(o,r);let s=n.type;if(s&8)Qs(t,e,n.child,r);else if(s&32){let a=nd(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=Km(e,n);if(Array.isArray(a))r.push(...a);else{let l=ji(e[wt]);Qs(l[L],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function s_(t,e){for(let n=Fe;n<t.length;n++){let r=t[n],i=r[L].firstChild;i!==null&&Qs(r[L],r,i,e)}t[Yn]!==t[on]&&e.push(t[Yn])}var gg=[];function a_(t){return t[Wn]??l_(t)}function l_(t){let e=gg.pop()??Object.create(u_);return e.lView=t,e}function c_(t){t.lView[Wn]!==t&&(t.lView=null,gg.push(t))}var u_=U(_({},Sh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{$i(t.lView)},consumerOnSignalRead(){this.lView[Wn]=this}});function yg(t){return wg(t[Vi])}function vg(t){return wg(t[vt])}function wg(t){for(;t!==null&&!sn(t);)t=t[vt];return t}var bg=100;function Cg(t,e=!0,n=0){let r=t[en],i=r.rendererFactory,o=!1;o||i.begin?.();try{d_(t,n)}catch(s){throw e&&hg(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function d_(t,e){iu(t,e);let n=0;for(;Lu(t);){if(n===bg)throw new x(103,!1);n++,iu(t,1)}}function f_(t,e,n,r){let i=e[k];if((i&256)===256)return;let o=!1;!o&&e[en].inlineEffectRunner?.flush(),$u(e);let s=null,a=null;!o&&h_(t)&&(a=a_(e),s=Mh(a));try{Zp(e),q0(t.bindingStartIndex),n!==null&&tg(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let d=t.preOrderCheckHooks;d!==null&&Rs(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Ps(e,d,0,null),Mc(e,0)}if(p_(e),_g(e,0),t.contentQueries!==null&&ug(t,e),!o)if(l){let d=t.contentCheckHooks;d!==null&&Rs(e,d)}else{let d=t.contentHooks;d!==null&&Ps(e,d,1),Mc(e,1)}kC(t,e);let c=t.components;c!==null&&Eg(e,c,0);let u=t.viewQuery;if(u!==null&&ru(2,u,r),!o)if(l){let d=t.viewCheckHooks;d!==null&&Rs(e,d)}else{let d=t.viewHooks;d!==null&&Ps(e,d,2),Mc(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ec]){for(let d of e[Ec])d();e[Ec]=null}o||(e[k]&=-73)}catch(l){throw $i(e),l}finally{a!==null&&(Ah(a,s),c_(a)),ju()}}function h_(t){return t.type!==2}function _g(t,e){for(let n=yg(t);n!==null;n=vg(n))for(let r=Fe;r<n.length;r++){let i=n[r];Dg(i,e)}}function p_(t){for(let e=yg(t);e!==null;e=vg(e)){if(!(e[k]&ku.HasTransplantedViews))continue;let n=e[$r];for(let r=0;r<n.length;r++){let i=n[r],o=i[xe];k0(i)}}}function m_(t,e,n){let r=En(e,t);Dg(r,n)}function Dg(t,e){Fu(t)&&iu(t,e)}function iu(t,e){let r=t[L],i=t[k],o=t[Wn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&rc(o)),o&&(o.dirty=!1),t[k]&=-9217,s)f_(r,t,r.template,t[Pe]);else if(i&8192){_g(t,1);let a=r.components;a!==null&&Eg(t,a,1)}}function Eg(t,e,n){for(let r=0;r<e.length;r++)m_(t,e[r],n)}function ud(t){for(t[en].changeDetectionScheduler?.notify();t;){t[k]|=64;let e=ji(t);if(I0(t)&&!e)return t;t=e}return null}var Xn=class{get rootNodes(){let e=this._lView,n=e[L];return Qs(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pe]}set context(e){this._lView[Pe]=e}get destroyed(){return(this._lView[k]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xe];if(sn(e)){let n=e[js],r=n?n.indexOf(this):-1;r>-1&&(Hi(e,r),Us(n,r))}this._attachedToViewContainer=!1}da(this._lView[L],this._lView)}onDestroy(e){P0(this._lView,e)}markForCheck(){ud(this._cdRefInjectingView||this._lView)}detach(){this._lView[k]&=-129}reattach(){Uc(this._lView),this._lView[k]|=128}detectChanges(){this._lView[k]|=1024,Cg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,zm(this._lView[L],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e,Uc(this._lView)}},qi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=v_;let t=e;return t})(),g_=qi,y_=class extends g_{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=ga(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Xn(i)}};function v_(){return dd(Xe(),se())}function dd(t,e){return t.type&4?new y_(e,t,qr(t,e)):null}var Ck=new RegExp(`^(\\d+)*(${Sb}|${Ib})*(.*)`);var w_=()=>null;function zi(t,e){return w_(t,e)}var ou=class{},su=class{},Zs=class{};function b_(t){let e=Error(`No component factory found for ${We(t)}.`);return e[C_]=t,e}var C_="ngComponent";var au=class{resolveComponentFactory(e){throw b_(e)}},va=(()=>{let e=class e{};e.NULL=new au;let t=e;return t})(),Wi=class{},Yr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>__();let t=e;return t})();function __(){let t=se(),e=Xe(),n=En(e.index,t);return(Gn(n)?n:t)[Ie]}var D_=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),xc={};function E_(t){return typeof t=="function"&&t[nc]!==void 0}var Dp=new Set;function wa(t){Dp.has(t)||(Dp.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Ig(t){return E_(t)&&typeof t.set=="function"}var lr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=I_;let t=e;return t})();function I_(t){return S_(Xe(),se(),(t&16)===16)}function S_(t,e,n){if(oa(t)&&!n){let r=En(t.index,e);return new Xn(r,r)}else if(t.type&47){let r=e[wt];return new Xn(r,e)}return null}function Ep(...t){}function M_(){let t=typeof xi.requestAnimationFrame=="function",e=xi[t?"requestAnimationFrame":"setTimeout"],n=xi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var _e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=M_().nativeRequestAnimationFrame,N_(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new x(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,A_,Ep,Ep);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},A_={};function fd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function T_(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(xi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,lu(t),t.isCheckStableRunning=!0,fd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),lu(t))}function N_(t){let e=()=>{T_(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(x_(a))return n.invokeTask(i,o,s,a);try{return Ip(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Sp(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return Ip(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Sp(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,lu(t),fd(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function lu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Ip(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Sp(t){t._nesting--,fd(t)}function x_(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Sg=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function cu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=tp(i,a);else if(o==2){let l=a,c=e[++s];r=tp(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Js=class extends va{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=zn(e);return new Yi(n,this.ngModule)}};function Mp(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function O_(t){let e=t.toLowerCase();return e==="svg"?S0:e==="math"?M0:null}var uu=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=aa(r);let i=this.injector.get(e,xc,r);return i!==xc||n===xc?i:this.parentInjector.get(e,n,r)}},Yi=class extends Zs{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Mp(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Mp(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=b0(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof st?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new uu(e,o):e,a=s.get(Wi,null);if(a===null)throw new x(407,!1);let l=s.get(D_,null),c=s.get(Sg,null),u=s.get(ou,null),d={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:u},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",m=r?FC(f,r,this.componentDef.encapsulation,s):qm(f,h,O_(h)),p=512;this.componentDef.signals?p|=4096:this.componentDef.onPush||(p|=16);let g=null;m!==null&&(g=Qu(m,s,!0));let v=sd(0,null,null,1,0,null,null,null,null,null,null),w=ha(null,v,null,p,null,null,d,f,s,null,g);$u(w);let b,D;try{let T=this.componentDef,C,te=null;T.findHostDirectiveDefs?(C=[],te=new Map,T.findHostDirectiveDefs(T,C,te),C.push(T)):C=[T];let le=k_(w,m),we=R_(le,m,T,C,w,d,f);D=Pu(v,ot),m&&L_(f,T,m,r),n!==void 0&&V_(D,this.ngContentSelectors,n),b=F_(we,T,C,te,w,[$_]),cd(v,w,null)}finally{ju()}return new du(this.componentType,b,qr(D,w),w,D)}},du=class extends su{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Xn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;ld(o[L],o,i,e,n),this.previousInputValues.set(e,n);let s=En(this._tNode.index,o);ud(s)}}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function k_(t,e){let n=t[L],r=ot;return t[r]=e,pa(n,r,2,"#host",null)}function R_(t,e,n,r,i,o,s){let a=i[L];P_(r,t,e,s);let l=null;e!==null&&(l=Qu(e,i[Vr]));let c=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=ha(i,og(n),null,u,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&nu(a,t,r.length-1),ma(i,d),i[t.index]=d}function P_(t,e,n,r){for(let i of t)e.mergedAttrs=Pi(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(cu(e,e.mergedAttrs,!0),n!==null&&Zm(r,n,e))}function F_(t,e,n,r,i,o){let s=Xe(),a=i[L],l=Ct(s,i);ag(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Zn(i,a,d,s);Jn(f,i)}lg(a,i,s),l&&Jn(l,i);let c=Zn(i,a,s.directiveStart+s.componentOffset,s);if(t[Pe]=i[Pe]=c,o!==null)for(let u of o)u(c,e);return ng(a,s,i),c}function L_(t,e,n,r){if(r)Bc(t,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=C0(e.selectors[0]);i&&Bc(t,n,i),o&&o.length>0&&Qm(t,n,o.join(" "))}}function V_(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function $_(){let t=Xe();Xu(se()[L],t)}var Kr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=j_;let t=e;return t})();function j_(){let t=Xe();return Ag(t,se())}var B_=Kr,Mg=class extends B_{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return qr(this._hostTNode,this._hostLView)}get injector(){return new qn(this._hostTNode,this._hostLView)}get parentInjector(){let e=ed(this._hostTNode,this._hostLView);if(Am(e)){let n=zs(e,this._hostLView),r=qs(e),i=n[L].data[r+8];return new qn(i,n)}else return new qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Ap(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Fe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=zi(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Gi(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!$b(e),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let l=s?e:new Yi(zn(e)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let p=(s?c:this.parentInjector).get(st,null);p&&(o=p)}let u=zn(l.componentType??{}),d=zi(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,o);return this.insertImpl(h.hostView,a,Gi(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(O0(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[xe],c=new Mg(l,l[bt],l[xe]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ya(s,i,o,r),e.attachToViewContainerRef(),lm(Oc(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Ap(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Hi(this._lContainer,n);r&&(Us(Oc(this._lContainer),n),da(r[L],r))}detach(e){let n=this._adjustIndex(e,-1),r=Hi(this._lContainer,n);return r&&Us(Oc(this._lContainer),n)!=null?new Xn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Ap(t){return t[js]}function Oc(t){return t[js]||(t[js]=[])}function Ag(t,e){let n,r=e[t.index];return sn(r)?n=r:(n=cg(r,e,null,t),e[t.index]=n,ma(e,n)),H_(n,e,t,r),new Mg(n,t,e)}function U_(t,e){let n=t[Ie],r=n.createComment(""),i=Ct(e,t),o=rd(n,i);return Ks(n,o,r,EC(n,i),!1),r}var H_=z_,G_=()=>!1;function q_(t,e,n){return G_(t,e,n)}function z_(t,e,n,r){if(t[Yn])return;let i;n.type&8?i=Vt(r):i=U_(e,n),t[Yn]=i}var fu=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},hu=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)hd(e,n).matches!==null&&this.queries[n].setDirty()}},pu=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=eD(e):this.predicate=e}},mu=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},gu=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,W_(n,o)),this.matchTNodeWithReadOption(e,n,Fs(n,e,o,!1,!1))}else r===qi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Fs(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===$t||i===Kr||i===qi&&n.type&4)this.addMatch(n.index,-2);else{let o=Fs(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function W_(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function Y_(t,e){return t.type&11?qr(t,e):t.type&4?dd(t,e):null}function K_(t,e,n,r){return n===-1?Y_(e,t):n===-2?Q_(t,e,r):Zn(t,t[L],n,e)}function Q_(t,e,n){if(n===$t)return qr(e,t);if(n===qi)return dd(e,t);if(n===Kr)return Ag(e,t)}function Tg(t,e,n,r){let i=e[tn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(K_(e,u,s[l+1],n.metadata.read))}}i.matches=a}return i.matches}function yu(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Tg(t,e,i,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=Fe;d<u.length;d++){let f=u[d];f[Zi]===f[xe]&&yu(f[L],f,c,r)}if(u[$r]!==null){let d=u[$r];for(let f=0;f<d.length;f++){let h=d[f];yu(h[L],h,c,r)}}}}}return r}function Z_(t,e){return t[tn].queries[e].queryList}function J_(t,e,n){let r=new Gc((n&4)===4);return $C(t,e,r,r.destroy),(e[tn]??=new hu).queries.push(new fu(r))-1}function X_(t,e,n){let r=He();return r.firstCreatePass&&(tD(r,new pu(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),J_(r,se(),e)}function eD(t){return t.split(",").map(e=>e.trim())}function tD(t,e,n){t.queries===null&&(t.queries=new mu),t.queries.track(new gu(e,n))}function hd(t,e){return t.queries.getByIndex(e)}function nD(t,e){let n=t[L],r=hd(n,e);return r.crossesNgTemplate?yu(n,t,e,[]):Tg(n,t,r,e)}function rD(t){return Object.getPrototypeOf(t.prototype).constructor}function an(t){let e=rD(t.type),n=!0,r=[t];for(;e;){let i;if(_n(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=xs(t.inputs),s.inputTransforms=xs(t.inputTransforms),s.declaredInputs=xs(t.declaredInputs),s.outputs=xs(t.outputs);let a=i.hostBindings;a&&lD(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&sD(t,l),c&&aD(t,c),iD(t,i),o0(t.outputs,i.outputs),_n(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===an&&(n=!1)}}e=Object.getPrototypeOf(e)}oD(r)}function iD(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function oD(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pi(i.hostAttrs,n=Pi(n,i.hostAttrs))}}function xs(t){return t===Lr?{}:t===it?[]:t}function sD(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function aD(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function lD(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Dn=class{},Ki=class{};var vu=class extends Dn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Js(this);let i=Gp(e);this._bootstrapComponents=Gm(i.bootstrap),this._r3Injector=Lm(e,n,[{provide:Dn,useValue:this},{provide:va,useValue:this.componentFactoryResolver},...r],We(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wu=class extends Ki{constructor(e){super(),this.moduleType=e}create(e){return new vu(this.moduleType,e,[])}};var Xs=class extends Dn{constructor(e){super(),this.componentFactoryResolver=new Js(this),this.instance=null;let n=new Ui([...e.providers,{provide:Dn,useValue:this},{provide:va,useValue:this.componentFactoryResolver}],e.parent||Ju(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pd(t,e,n=null){return new Xs({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ba=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Qr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function cD(t,e,n,r,i,o,s,a,l){let c=e.consts,u=pa(e,t,4,s||null,Bs(c,a));sg(e,n,u,Bs(c,l)),Xu(e,u);let d=u.tView=sd(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function ge(t,e,n,r,i,o,s,a){let l=se(),c=He(),u=t+ot,d=c.firstCreatePass?cD(u,c,l,e,n,r,i,o,s):c.data[u];Ji(d,!1);let f=uD(c,l,d,t);Uu()&&id(c,l,f,d),Jn(f,l);let h=cg(f,l,f,d);return l[u]=h,ma(l,h),q_(h,d,l),Ru(d)&&rg(c,l,d),s!=null&&ig(l,d,a),ge}var uD=dD;function dD(t,e,n,r){return Hu(!0),e[Ie].createComment("")}function Ng(t,e,n,r){return Qr(t,Xi(),n)?e+Yu(n)+r:ar}function Os(t,e){return t<<17|e<<2}function er(t){return t>>17&32767}function fD(t){return(t&2)==2}function hD(t,e){return t&131071|e<<17}function bu(t){return t|2}function Hr(t){return(t&131068)>>2}function kc(t,e){return t&-131069|e<<2}function pD(t){return(t&1)===1}function Cu(t){return t|1}function mD(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=er(s),l=Hr(s);t[r]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||eo(d,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let f=er(t[a+1]);t[r+1]=Os(f,a),f!==0&&(t[f+1]=kc(t[f+1],r)),t[a+1]=hD(t[a+1],r)}else t[r+1]=Os(a,0),a!==0&&(t[a+1]=kc(t[a+1],r)),a=r;else t[r+1]=Os(l,0),a===0?a=r:t[l+1]=kc(t[l+1],r),l=r;c&&(t[r+1]=bu(t[r+1])),Tp(t,u,r,!0),Tp(t,u,r,!1),gD(e,u,t,r,o),s=Os(a,l),o?e.classBindings=s:e.styleBindings=s}function gD(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&eo(o,e)>=0&&(n[r+1]=Cu(n[r+1]))}function Tp(t,e,n,r){let i=t[n+1],o=e===null,s=r?er(i):Hr(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];yD(l,e)&&(a=!0,t[s+1]=r?Cu(c):bu(c)),s=r?er(c):Hr(c)}a&&(t[n+1]=r?bu(i):Cu(i))}function yD(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?eo(t,e)>=0:!1}function ln(t,e,n){let r=se(),i=Xi();if(Qr(r,i,e)){let o=He(),s=Bu();ad(o,s,r,t,e,r[Ie],n,!1)}return ln}function Np(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";ld(t,n,o[s],s,r)}function Ca(t,e){return vD(t,e,null,!0),Ca}function vD(t,e,n,r){let i=se(),o=He(),s=z0(2);if(o.firstUpdatePass&&bD(o,t,s,r),e!==ar&&Qr(i,s,e)){let a=o.data[nr()];ID(o,a,i,i[Ie],t,i[s+1]=SD(e,n),r,s)}}function wD(t,e){return e>=t.expandoStartIndex}function bD(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[nr()],s=wD(t,n);MD(o,r)&&e===null&&!s&&(e=!1),e=CD(i,o,e,r),mD(i,o,e,n,s,r)}}function CD(t,e,n,r){let i=Q0(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Rc(null,t,e,n,r),n=Qi(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Rc(i,t,e,n,r),o===null){let l=_D(t,e,r);l!==void 0&&Array.isArray(l)&&(l=Rc(null,t,e,l[1],r),l=Qi(l,e.attrs,r),DD(t,e,r,l))}else o=ED(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function _D(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Hr(r)!==0)return t[er(r)]}function DD(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[er(i)]=r}function ED(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Qi(r,s,n)}return Qi(r,e.attrs,n)}function Rc(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Qi(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Qi(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ob(t,s,n?!0:e[++o]))}return t===void 0?null:t}function ID(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=pD(c)?xp(l,e,n,i,Hr(c),s):void 0;if(!ea(u)){ea(o)||fD(c)&&(o=xp(l,null,n,i,a,s));let d=Qp(nr(),n);xC(r,s,d,i,o)}}function xp(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=n[i+1];f===ar&&(f=d?it:void 0);let h=d?Ic(f,r):u===r?f:void 0;if(c&&!ea(h)&&(h=Ic(l,r)),ea(h)&&(a=h,s))return a;let m=t[i+1];i=s?er(m):Hr(m)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Ic(l,r))}return a}function ea(t){return t!==void 0}function SD(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=We(ua(t)))),t}function MD(t,e){return(t.flags&(e?8:16))!==0}var _u=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Pc(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function AD(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let l=t.at(o),c=e[o],u=Pc(o,l,o,c,n);if(u!==0){u<0&&t.updateValue(o,c),o++;continue}let d=t.at(s),f=e[a],h=Pc(s,d,a,f,n);if(h!==0){h<0&&t.updateValue(s,f),s--,a--;continue}let m=n(o,l),p=n(s,d),g=n(o,c);if(Object.is(g,p)){let v=n(a,f);Object.is(v,m)?(t.swap(o,s),t.updateValue(s,f),a--,s--):t.move(s,o),t.updateValue(o,c),o++;continue}if(r??=new ta,i??=kp(t,o,s,n),Du(t,r,o,g))t.updateValue(o,c),o++,s++;else if(i.has(g))r.set(m,t.detach(o)),s--;else{let v=t.create(o,e[o]);t.attach(o,v),o++,s++}}for(;o<=a;)Op(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),l=a.next();for(;!l.done&&o<=s;){let c=t.at(o),u=l.value,d=Pc(o,c,o,u,n);if(d!==0)d<0&&t.updateValue(o,u),o++,l=a.next();else{r??=new ta,i??=kp(t,o,s,n);let f=n(o,u);if(Du(t,r,o,f))t.updateValue(o,u),o++,s++,l=a.next();else if(!i.has(f))t.attach(o,t.create(o,u)),o++,s++,l=a.next();else{let h=n(o,c);r.set(h,t.detach(o)),s--}}}for(;!l.done;)Op(t,r,n,t.length,l.value),l=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function Du(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Op(t,e,n,r,i){if(Du(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function kp(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ta=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Se(t,e,n){wa("NgControlFlow");let r=se(),i=Xi(),o=Mu(r,ot+t),s=0;if(Qr(r,i,e)){let a=Ne(null);try{if(mg(o,s),e!==-1){let l=Au(r[L],ot+e),c=zi(o,l.tView.ssrId),u=ga(r,l,n,{dehydratedView:c});ya(o,u,s,Gi(l,c))}}finally{Ne(a)}}else{let a=pg(o,s);a!==void 0&&(a[Pe]=n)}}var Eu=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Fe}};function xg(t,e){return e}var Iu=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Og(t,e,n,r,i,o,s,a,l,c,u,d,f){wa("NgControlFlow");let h=l!==void 0,m=se(),p=a?s.bind(m[wt][Pe]):s,g=new Iu(h,p);m[ot+t]=g,ge(t+1,e,n,r,i,o),h&&ge(t+2,l,c,u,d,f)}var Su=class extends _u{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Fe}at(e){return this.getLView(e)[Pe].$implicit}attach(e,n){let r=n[Fi];this.needsIndexUpdate||=e!==this.length,ya(this.lContainer,n,e,Gi(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,TD(this.lContainer,e)}create(e,n){let r=zi(this.lContainer,this.templateTNode.tView.ssrId);return ga(this.hostLView,this.templateTNode,new Eu(this.lContainer,n,e),{dehydratedView:r})}destroy(e){da(e[L],e)}updateValue(e,n){this.getLView(e)[Pe].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Pe].$index=e}getLView(e){return ND(this.lContainer,e)}};function kg(t){let e=Ne(null),n=nr();try{let r=se(),i=r[L],o=r[n];if(o.liveCollection===void 0){let a=n+1,l=Mu(r,a),c=Au(i,a);o.liveCollection=new Su(l,r,c)}else o.liveCollection.reset();let s=o.liveCollection;if(AD(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Xi(),l=s.length===0;if(Qr(r,a,l)){let c=n+2,u=Mu(r,c);if(l){let d=Au(i,c),f=zi(u,d.tView.ssrId),h=ga(r,d,void 0,{dehydratedView:f});ya(u,h,0,Gi(d,f))}else mg(u,0)}}}finally{Ne(e)}}function Mu(t,e){return t[e]}function TD(t,e){return Hi(t,e)}function ND(t,e){return pg(t,e)}function Au(t,e){return Pu(t,e)}function xD(t,e,n,r,i,o){let s=e.consts,a=Bs(s,i),l=pa(e,t,2,r,a);return sg(e,n,l,Bs(s,o)),l.attrs!==null&&cu(l,l.attrs,!1),l.mergedAttrs!==null&&cu(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function I(t,e,n,r){let i=se(),o=He(),s=ot+t,a=i[Ie],l=o.firstCreatePass?xD(s,o,i,e,n,r):o.data[s],c=OD(o,i,l,a,e,t);i[s]=c;let u=Ru(l);return Ji(l,!0),Zm(a,c,l),(l.flags&32)!==32&&Uu()&&id(o,i,c,l),F0()===0&&Jn(c,i),L0(),u&&(rg(o,i,l),ng(o,l,i)),r!==null&&ig(i,l),I}function M(){let t=Xe();em()?H0():(t=t.parent,Ji(t,!1));let e=t;j0(e)&&B0(),V0();let n=He();return n.firstCreatePass&&(Xu(n,t),Kp(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&zb(e)&&Np(n,e,se(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Wb(e)&&Np(n,e,se(),e.stylesWithoutHost,!1),M}function Oe(t,e,n,r){return I(t,e,n,r),M(),Oe}var OD=(t,e,n,r,i,o)=>(Hu(!0),qm(r,i,X0()));function Ge(){return se()}var na="en-US";var kD=na;function RD(t){typeof t=="string"&&(kD=t.toLowerCase().replace(/_/g,"-"))}function ne(t,e,n,r){let i=se(),o=He(),s=Xe();return Rg(o,i,i[Ie],s,t,e,r),ne}function PD(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Li],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function Rg(t,e,n,r,i,o,s){let a=Ru(r),c=t.firstCreatePass&&fg(t),u=e[Pe],d=dg(e),f=!0;if(r.type&3||s){let p=Ct(r,e),g=s?s(p):p,v=d.length,w=s?D=>s(Vt(D[r.index])):r.index,b=null;if(!s&&a&&(b=PD(t,e,i,r.index)),b!==null){let D=b.__ngLastListenerFn__||b;D.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,f=!1}else{o=Pp(r,e,u,o,!1);let D=n.listen(g,i,o);d.push(o,D),c&&c.push(i,w,v,v+1)}}else o=Pp(r,e,u,o,!1);let h=r.outputs,m;if(f&&h!==null&&(m=h[i])){let p=m.length;if(p)for(let g=0;g<p;g+=2){let v=m[g],w=m[g+1],T=e[v][w].subscribe(o),C=d.length;if(d.push(o,T),c){let te=typeof T=="function"?C+1:-(C+1);c.push(i,r.index,C,te)}}}}function Rp(t,e,n,r){try{return Pt(6,e,n),n(r)!==!1}catch(i){return hg(t,i),!1}finally{Pt(7,e,n)}}function Pp(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?En(t.index,e):e;ud(a);let l=Rp(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)l=Rp(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function O(t=1){return J0(t)}function md(t,e,n){return Pg(t,"",e,"",n),md}function Pg(t,e,n,r,i){let o=se(),s=Ng(o,e,n,r);if(s!==ar){let a=He(),l=Bu();ad(a,l,o,t,s,o[Ie],i,!1)}return Pg}function Zr(t,e,n){X_(t,e,n)}function cr(t){let e=se(),n=He(),r=tm();Vu(r+1);let i=hd(n,r);if(t.dirty&&x0(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=nD(e,r);t.reset(o,tb),t.notifyOnChanges()}return!0}return!1}function ur(){return Z_(se(),tm())}function gd(t){let e=G0();return N0(e,ot+t)}function E(t,e=""){let n=se(),r=He(),i=t+ot,o=r.firstCreatePass?pa(r,i,1,e,null):r.data[i],s=FD(r,n,o,e,t);n[i]=s,Uu()&&id(r,n,s,o),Ji(o,!1)}var FD=(t,e,n,r,i)=>(Hu(!0),fC(e[Ie],r));function Jr(t){return $e("",t,""),Jr}function $e(t,e,n){let r=se(),i=Ng(r,t,e,n);return i!==ar&&n_(r,nr(),i),$e}function no(t,e,n){Ig(e)&&(e=e());let r=se(),i=Xi();if(Qr(r,i,e)){let o=He(),s=Bu();ad(o,s,r,t,e,r[Ie],n,!1)}return no}function _a(t,e){let n=Ig(t);return n&&t.set(e),n}function ro(t,e){let n=se(),r=He(),i=Xe();return Rg(r,n,n[Ie],i,t,e),ro}function LD(t,e,n){let r=He();if(r.firstCreatePass){let i=_n(t);Tu(n,r.data,r.blueprint,i,!0),Tu(e,r.data,r.blueprint,i,!1)}}function Tu(t,e,n,r,i){if(t=Ue(t),Array.isArray(t))for(let o=0;o<t.length;o++)Tu(t[o],e,n,r,i);else{let o=He(),s=se(),a=Xe(),l=Ur(t)?t:Ue(t.provide),c=_m(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Ur(t)||!t.multi){let h=new Qn(c,i,z),m=Lc(l,e,i?u:u+f,d);m===-1?(Xc(Ws(a,s),o,l),Fc(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[m]=h,s[m]=h)}else{let h=Lc(l,e,u+f,d),m=Lc(l,e,u,u+f),p=h>=0&&n[h],g=m>=0&&n[m];if(i&&!g||!i&&!p){Xc(Ws(a,s),o,l);let v=jD(i?$D:VD,n.length,i,r,c);!i&&g&&(n[m].providerFactory=v),Fc(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)}else{let v=Fg(n[i?m:h],c,!i&&r);Fc(o,t,h>-1?h:m,v)}!i&&r&&g&&n[m].componentProviders++}}}function Fc(t,e,n,r){let i=Ur(e),o=Ob(e);if(i||o){let l=(o?Ue(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function Fg(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lc(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function VD(t,e,n,r){return Nu(this.multi,[])}function $D(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Zn(n,n[L],this.providerFactory.index,r);o=a.slice(0,s),Nu(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Nu(i,o);return o}function Nu(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function jD(t,e,n,r,i){let o=new Qn(t,n,z);return o.multi=[],o.index=e,o.componentProviders=0,Fg(o,i,r&&!n),o}function io(t,e=[]){return n=>{n.providersResolver=(r,i)=>LD(r,i?i(t):t,e)}}var BD=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=wm(!1,r.type),o=i.length>0?pd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(J(st))});let t=e;return t})();function je(t){wa("NgStandalone"),t.getStandaloneInjector=e=>e.get(BD).getOrCreateStandaloneInjector(t)}var Da=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Lg=new j("");function dr(t){return!!t&&typeof t.then=="function"}function Vg(t){return!!t&&typeof t.subscribe=="function"}var $g=new j(""),jg=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=A($g,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(dr(s))r.push(s);else if(Vg(s)){let a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yd=new j("");function UD(){Nh(()=>{throw new x(600,!1)})}function HD(t){return t.isBoundToModule}function GD(t,e,n){try{let r=n();return dr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var oo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=A(Vm),this.afterRenderEffectManager=A(Sg),this.componentTypes=[],this.components=[],this.isStable=A(ba).hasPendingTasks.pipe(K(r=>!r)),this._injector=A(st)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Zs;if(!this._injector.get(jg).done){let h=!o&&Hp(r),m=!1;throw new x(405,m)}let a;o?a=r:a=this._injector.get(va).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=HD(a)?void 0:this._injector.get(Dn),c=i||a.selector,u=a.create(Wr.NULL,[],c,l),d=u.location.nativeElement,f=u.injector.get(Lg,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Vc(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new x(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===bg)throw new x(103,!1);let o=r===0;for(let{_lView:s,notifyErrorHandler:a}of this._views)!o&&!$c(s)||this.detectChangesInView(s,a,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:s})=>$c(s))&&(i.execute(),!this._views.some(({_lView:s})=>$c(s))))break}}detectChangesInView(r,i,o){let s;o?(s=0,r[k]|=1024):r[k]&64?s=0:s=1,Cg(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Vc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(yd,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Vc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new x(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Vc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function $c(t){return Lu(t)}var xu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},vd=(()=>{let e=class e{compileModuleSync(r){return new wu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Gp(r),s=Gm(o.declarations).reduce((a,l)=>{let c=zn(l);return c&&a.push(new Yi(c)),a},[]);return new xu(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qD=(()=>{let e=class e{constructor(){this.zone=A(_e),this.applicationRef=A(oo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zD(t){return[{provide:_e,useFactory:t},{provide:Br,multi:!0,useFactory:()=>{let e=A(qD,{optional:!0});return()=>e.initialize()}},{provide:Br,multi:!0,useFactory:()=>{let e=A(QD);return()=>{e.initialize()}}},{provide:Vm,useFactory:WD}]}function WD(){let t=A(_e),e=A(nn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function YD(t){let e=zD(()=>new _e(KD(t)));return la([[],e])}function KD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var QD=(()=>{let e=class e{constructor(){this.subscription=new De,this.initialized=!1,this.zone=A(_e),this.pendingTasks=A(ba)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZD(){return typeof $localize<"u"&&$localize.locale||na}var wd=new j("",{providedIn:"root",factory:()=>A(wd,G.Optional|G.SkipSelf)||ZD()});var Bg=new j("");var Vs=null;function JD(t=[],e){return Wr.create({name:e,providers:[{provide:ca,useValue:"platform"},{provide:Bg,useValue:new Set([()=>Vs=null])},...t]})}function XD(t=[]){if(Vs)return Vs;let e=JD(t);return Vs=e,UD(),eE(e),e}function eE(t){t.get(zu,null)?.forEach(n=>n())}function Ug(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=XD(r),o=[YD(),...n||[]],a=new Xs({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(_e);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(nn,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:h=>{c.handleError(h)}})});let d=()=>a.destroy(),f=i.get(Bg);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),GD(c,l,()=>{let h=a.get(jg);return h.runInitializers(),h.donePromise.then(()=>{let m=a.get(wd,na);RD(m||na);let p=a.get(oo);return e!==void 0&&p.bootstrap(e),p})})})}catch(e){return Promise.reject(e)}}function Ea(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var qg=null;function cn(){return qg}function zg(t){qg??=t}var Ia=class{};var lt=new j(""),Wg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>A(rE),providedIn:"platform"});let t=e;return t})();var rE=(()=>{let e=class e extends Wg{constructor(){super(),this._doc=A(lt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cn().getBaseHref(this._doc)}onPopState(r){let i=cn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=cn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Yg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Hg(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function fr(t){return t&&t[0]!=="?"?"?"+t:t}var Ma=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>A(Kg),providedIn:"root"});let t=e;return t})(),iE=new j(""),Kg=(()=>{let e=class e extends Ma{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??A(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Yg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+fr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+fr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+fr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(J(Wg),J(iE,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var so=(()=>{let e=class e{constructor(r){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=aE(Hg(Gg(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+fr(i))}normalize(r){return e.stripTrailingSlash(sE(this._basePath,Gg(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+fr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+fr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=fr,e.joinWithSlash=Yg,e.stripTrailingSlash=Hg,e.\u0275fac=function(i){return new(i||e)(J(Ma))},e.\u0275prov=P({token:e,factory:()=>oE(),providedIn:"root"});let t=e;return t})();function oE(){return new so(J(Ma))}function sE(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Gg(t){return t.replace(/\/index.html$/,"")}function aE(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Qg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Zg="browser",lE="server";function Cd(t){return t===lE}var Sa=class{};var Ed=class extends Ia{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Id=class t extends Ed{static makeCurrent(){zg(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=uE();return n==null?null:dE(n)}resetBaseElement(){ao=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qg(document.cookie,e)}},ao=null;function uE(){return ao=ao||document.querySelector("base"),ao?ao.getAttribute("href"):null}function dE(t){return new URL(t,document.baseURI).pathname}var fE=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Sd=new j(""),ty=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new x(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(J(Sd),J(_e))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Aa=class{constructor(e){this._doc=e}},_d="ng-app-id",ny=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Cd(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${_d}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(_d),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(_d,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(J(lt),J(qu),J(Wu,8),J(zr))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Dd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ad=/%COMP%/g,ry="%COMP%",hE=`_nghost-${ry}`,pE=`_ngcontent-${ry}`,mE=!0,gE=new j("",{providedIn:"root",factory:()=>mE});function yE(t){return pE.replace(Ad,t)}function vE(t){return hE.replace(Ad,t)}function iy(t,e){return e.map(n=>n.replace(Ad,t))}var Jg=(()=>{let e=class e{constructor(r,i,o,s,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Cd(l),this.defaultRenderer=new lo(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Lt.ShadowDom&&(i=U(_({},i),{encapsulation:Lt.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Ta?o.applyToHost(r):o instanceof co&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Lt.Emulated:s=new Ta(c,u,i,this.appId,d,a,l,f);break;case Lt.ShadowDom:return new Md(c,u,r,i,a,l,this.nonce,f);default:s=new co(c,u,i,d,a,l,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(J(ty),J(ny),J(qu),J(gE),J(lt),J(zr),J(_e),J(Wu))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),lo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Dd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Xg(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Xg(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Dd[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Dd[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(rn.DashCase|rn.Important)?e.style.setProperty(n,r,i&rn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&rn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=cn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Xg(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Md=class extends lo{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=iy(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},co=class extends lo{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?iy(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ta=class extends co{constructor(e,n,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=yE(c),this.hostAttr=vE(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},wE=(()=>{let e=class e extends Aa{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(J(lt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),ey=["alt","control","meta","shift"],bE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CE={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},_E=(()=>{let e=class e extends Aa{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),ey.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=bE[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ey.forEach(a=>{if(a!==o){let l=CE[a];l(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(J(lt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function oy(t,e){return Ug(_({rootComponent:t},DE(e)))}function DE(t){return{appProviders:[...AE,...t?.providers??[]],platformProviders:ME}}function EE(){Id.makeCurrent()}function IE(){return new nn}function SE(){return um(document),document}var ME=[{provide:zr,useValue:Zg},{provide:zu,useValue:EE,multi:!0},{provide:lt,useFactory:SE,deps:[]}];var AE=[{provide:ca,useValue:"root"},{provide:nn,useFactory:IE,deps:[]},{provide:Sd,useClass:wE,multi:!0,deps:[lt,_e,zr]},{provide:Sd,useClass:_E,multi:!0,deps:[lt]},Jg,ny,ty,{provide:Wi,useExisting:Jg},{provide:Sa,useClass:fE,deps:[]},[]];var sy=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(J(lt))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var B="primary",Io=Symbol("RouteTitle"),kd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ri(t){return new kd(t)}function xE(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function OE(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!jt(t[n],e[n]))return!1;return!0}function jt(t,e){let n=t?Rd(t):void 0,r=e?Rd(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!fy(t[i],e[i]))return!1;return!0}function Rd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function fy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function hy(t){return t.length>0?t[t.length-1]:null}function Mn(t){return mc(t)?t:dr(t)?ve(Promise.resolve(t)):V(t)}var kE={exact:my,subset:gy},py={exact:RE,subset:PE,ignored:()=>!0};function ay(t,e,n){return kE[n.paths](t.root,e.root,n.matrixParams)&&py[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function RE(t,e){return jt(t,e)}function my(t,e,n){if(!pr(t.segments,e.segments)||!Oa(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!my(t.children[r],e.children[r],n))return!1;return!0}function PE(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>fy(t[n],e[n]))}function gy(t,e,n){return yy(t,e,e.segments,n)}function yy(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!pr(i,n)||e.hasChildren()||!Oa(i,n,r))}else if(t.segments.length===n.length){if(!pr(t.segments,n)||!Oa(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!gy(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!pr(t.segments,i)||!Oa(t.segments,i,r)||!t.children[B]?!1:yy(t.children[B],e,o,r)}}function Oa(t,e,n){return e.every((r,i)=>py[n](t[i].parameters,r.parameters))}var In=class{constructor(e=new ae([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ri(this.queryParams),this._queryParamMap}toString(){return VE.serialize(this)}},ae=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ka(this)}},hr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ri(this.parameters),this._parameterMap}toString(){return wy(this)}};function FE(t,e){return pr(t,e)&&t.every((n,r)=>jt(n.parameters,e[r].parameters))}function pr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function LE(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===B&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==B&&(n=n.concat(e(i,r)))}),n}var af=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new Pa,providedIn:"root"});let t=e;return t})(),Pa=class{parse(e){let n=new Fd(e);return new In(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${uo(e.root,!0)}`,r=BE(e.queryParams),i=typeof e.fragment=="string"?`#${$E(e.fragment)}`:"";return`${n}${r}${i}`}},VE=new Pa;function ka(t){return t.segments.map(e=>wy(e)).join("/")}function uo(t,e){if(!t.hasChildren())return ka(t);if(e){let n=t.children[B]?uo(t.children[B],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==B&&r.push(`${i}:${uo(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=LE(t,(r,i)=>i===B?[uo(t.children[B],!1)]:[`${i}:${uo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[B]!=null?`${ka(t)}/${n[0]}`:`${ka(t)}/(${n.join("//")})`}}function vy(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Na(t){return vy(t).replace(/%3B/gi,";")}function $E(t){return encodeURI(t)}function Pd(t){return vy(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ra(t){return decodeURIComponent(t)}function ly(t){return Ra(t.replace(/\+/g,"%20"))}function wy(t){return`${Pd(t.path)}${jE(t.parameters)}`}function jE(t){return Object.entries(t).map(([e,n])=>`;${Pd(e)}=${Pd(n)}`).join("")}function BE(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Na(n)}=${Na(i)}`).join("&"):`${Na(n)}=${Na(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var UE=/^[^\/()?;#]+/;function Td(t){let e=t.match(UE);return e?e[0]:""}var HE=/^[^\/()?;=#]+/;function GE(t){let e=t.match(HE);return e?e[0]:""}var qE=/^[^=?&#]+/;function zE(t){let e=t.match(qE);return e?e[0]:""}var WE=/^[^&#]+/;function YE(t){let e=t.match(WE);return e?e[0]:""}var Fd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ae([],{}):new ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[B]=new ae(e,n)),r}parseSegment(){let e=Td(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new hr(Ra(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=GE(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Td(this.remaining);i&&(r=i,this.capture(r))}e[Ra(n)]=Ra(r)}parseQueryParam(e){let n=zE(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=YE(this.remaining);s&&(r=s,this.capture(r))}let i=ly(n),o=ly(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Td(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new x(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=B);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[B]:new ae([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}};function by(t){return t.segments.length>0?new ae([],{[B]:t}):t}function Cy(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Cy(i);if(r===B&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ae(t.segments,e);return KE(n)}function KE(t){if(t.numberOfChildren===1&&t.children[B]){let e=t.children[B];return new ae(t.segments.concat(e.segments),e.children)}return t}function ii(t){return t instanceof In}function QE(t,e,n=null,r=null){let i=_y(t);return Dy(i,e,n,r)}function _y(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new ae(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=by(r);return e??i}function Dy(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Nd(i,i,i,n,r);let o=ZE(e);if(o.toRoot())return Nd(i,i,new ae([],{}),n,r);let s=JE(o,i,t),a=s.processChildren?po(s.segmentGroup,s.index,o.commands):Iy(s.segmentGroup,s.index,o.commands);return Nd(i,s.segmentGroup,a,n,r)}function Fa(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function yo(t){return typeof t=="object"&&t!=null&&t.outlets}function Nd(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=Ey(t,e,n);let a=by(Cy(s));return new In(a,o,i)}function Ey(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Ey(o,e,n)}),new ae(t.segments,r)}var La=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fa(r[0]))throw new x(4003,!1);let i=r.find(yo);if(i&&i!==hy(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ZE(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new La(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new La(n,e,r)}var ti=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function JE(t,e,n){if(t.isAbsolute)return new ti(e,!0,0);if(!n)return new ti(e,!1,NaN);if(n.parent===null)return new ti(n,!0,0);let r=Fa(t.commands[0])?0:1,i=n.segments.length-1+r;return XE(n,i,t.numberOfDoubleDots)}function XE(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new ti(r,!1,i-o)}function eI(t){return yo(t[0])?t[0].outlets:{[B]:t}}function Iy(t,e,n){if(t??=new ae([],{}),t.segments.length===0&&t.hasChildren())return po(t,e,n);let r=tI(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ae(t.segments.slice(0,r.pathIndex),{});return o.children[B]=new ae(t.segments.slice(r.pathIndex),t.children),po(o,0,i)}else return r.match&&i.length===0?new ae(t.segments,{}):r.match&&!t.hasChildren()?Ld(t,e,n):r.match?po(t,0,i):Ld(t,e,n)}function po(t,e,n){if(n.length===0)return new ae(t.segments,{});{let r=eI(n),i={};if(Object.keys(r).some(o=>o!==B)&&t.children[B]&&t.numberOfChildren===1&&t.children[B].segments.length===0){let o=po(t.children[B],e,n);return new ae(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Iy(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ae(t.segments,i)}}function tI(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(yo(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!uy(l,c,s))return o;r+=2}else{if(!uy(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ld(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(yo(o)){let l=nI(o.outlets);return new ae(r,l)}if(i===0&&Fa(n[0])){let l=t.segments[e];r.push(new hr(l.path,cy(n[0]))),i++;continue}let s=yo(o)?o.outlets[B]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Fa(a)?(r.push(new hr(s,cy(a))),i+=2):(r.push(new hr(s,{})),i++)}return new ae(r,{})}function nI(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ld(new ae([],{}),0,r))}),e}function cy(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function uy(t,e,n){return t==n.path&&jt(e,n.parameters)}var mo="imperative",ke=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ke||{}),ut=class{constructor(e,n){this.id=e,this.url=n}},vo=class extends ut{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ke.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mr=class extends ut{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ke.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ct=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ct||{}),Vd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Vd||{}),Sn=class extends ut{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ke.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gr=class extends ut{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ke.NavigationSkipped}},wo=class extends ut{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ke.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Va=class extends ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class extends ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class extends ut{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ke.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bd=class extends ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class extends ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hd=class{constructor(e){this.route=e,this.type=ke.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gd=class{constructor(e){this.route=e,this.type=ke.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qd=class{constructor(e){this.snapshot=e,this.type=ke.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zd=class{constructor(e){this.snapshot=e,this.type=ke.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wd=class{constructor(e){this.snapshot=e,this.type=ke.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yd=class{constructor(e){this.snapshot=e,this.type=ke.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var bo=class{},Co=class{constructor(e){this.url=e}};var Kd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ga,this.attachRef=null}},Ga=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Kd,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$a=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Qd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Qd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Zd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zd(e,this._root).map(n=>n.value)}};function Qd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Qd(t,n);if(r)return r}return null}function Zd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Zd(t,n);if(r.length)return r.unshift(e),r}return[]}var et=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ei(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ja=class extends $a{constructor(e,n){super(e),this.snapshot=n,cf(this,e)}toString(){return this.snapshot.toString()}};function Sy(t){let e=rI(t),n=new pe([new hr("",{})]),r=new pe({}),i=new pe({}),o=new pe({}),s=new pe(""),a=new oi(n,r,o,s,i,B,t,e.root);return a.snapshot=e.root,new ja(new et(a,[]),e)}function rI(t){let e={},n={},r={},i="",o=new _o([],e,r,i,n,B,t,null,{});return new Ba("",new et(o,[]))}var oi=class{constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(K(c=>c[Io]))??V(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>ri(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>ri(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function lf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&Ay(i)&&(r.resolve[Io]=i.title),r}var _o=class{get title(){return this.data?.[Io]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ri(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ri(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ba=class extends $a{constructor(e,n){super(n),this.url=e,cf(this,n)}toString(){return My(this._root)}};function cf(t,e){e.value._routerState=t,e.children.forEach(n=>cf(t,n))}function My(t){let e=t.children.length>0?` { ${t.children.map(My).join(", ")} } `:"";return`${t.value}${e}`}function xd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,jt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),jt(e.params,n.params)||t.paramsSubject.next(n.params),OE(e.url,n.url)||t.urlSubject.next(n.url),jt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Jd(t,e){let n=jt(t.params,e.params)&&FE(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Jd(t.parent,e.parent))}function Ay(t){return typeof t.title=="string"||t.title===null}var uf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=B,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.parentContexts=A(Ga),this.location=A(Kr),this.changeDetector=A(lr),this.environmentInjector=A(st),this.inputBinder=A(df,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Xd(r,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Je({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[sr]});let t=e;return t})(),Xd=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===oi?this.route:e===Ga?this.childContexts:this.parent.get(e,n)}},df=new j("");function iI(t,e,n){let r=Do(t,e._root,n?n._root:void 0);return new ja(r,e)}function Do(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=oI(t,e,n);return new et(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Do(t,a)),s}}let r=sI(e.value),i=e.children.map(o=>Do(t,o));return new et(r,i)}}function oI(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Do(t,r,i);return Do(t,r)})}function sI(t){return new oi(new pe(t.url),new pe(t.params),new pe(t.queryParams),new pe(t.fragment),new pe(t.data),t.outlet,t.component,t)}var Ty="ngNavigationCancelingError";function Ny(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ii(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xy(!1,ct.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function xy(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Ty]=!0,n.cancellationCode=e,n}function aI(t){return Oy(t)&&ii(t.url)}function Oy(t){return!!t&&t[Ty]}var lI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ve({type:e,selectors:[["ng-component"]],standalone:!0,features:[je],decls:1,vars:0,template:function(i,o){i&1&&Oe(0,"router-outlet")},dependencies:[uf],encapsulation:2});let t=e;return t})();function cI(t,e){return t.providers&&!t._injector&&(t._injector=pd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ff(t){let e=t.children&&t.children.map(ff),n=e?U(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==B&&(n.component=lI),n}function Bt(t){return t.outlet||B}function uI(t,e){let n=t.filter(r=>Bt(r)===e);return n.push(...t.filter(r=>Bt(r)!==e)),n}function So(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var dI=(t,e,n,r)=>K(i=>(new ef(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ef=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),xd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ei(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ei(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ei(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ei(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Yd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(xd(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),xd(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=So(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Ua=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ni=class{constructor(e,n){this.component=e,this.route=n}};function fI(t,e,n){let r=t._root,i=e?e._root:null;return fo(r,i,n,[r.value])}function hI(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ai(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!dm(t)?t:e.get(t):r}function fo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ei(e);return t.children.forEach(s=>{pI(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>go(a,n.getContext(s),i)),i}function pI(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=mI(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Ua(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fo(t,e,a?a.children:null,r,i):fo(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ni(a.outlet.component,s))}else s&&go(e,a,i),i.canActivateChecks.push(new Ua(r)),o.component?fo(t,null,a?a.children:null,r,i):fo(t,null,n,r,i);return i}function mI(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!pr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pr(t.url,e.url)||!jt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jd(t,e)||!jt(t.queryParams,e.queryParams);case"paramsChange":default:return!Jd(t,e)}}function go(t,e,n){let r=ei(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?go(s,e.children.getContext(o),n):go(s,null,n):go(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ni(e.outlet.component,i)):n.canDeactivateChecks.push(new ni(null,i)):n.canDeactivateChecks.push(new ni(null,i))}function Mo(t){return typeof t=="function"}function gI(t){return typeof t=="boolean"}function yI(t){return t&&Mo(t.canLoad)}function vI(t){return t&&Mo(t.canActivate)}function wI(t){return t&&Mo(t.canActivateChild)}function bI(t){return t&&Mo(t.canDeactivate)}function CI(t){return t&&Mo(t.canMatch)}function ky(t){return t instanceof Jt||t?.name==="EmptyError"}var xa=Symbol("INITIAL_VALUE");function si(){return gt(t=>As(t.map(e=>e.pipe(Xt(1),Cc(xa)))).pipe(K(e=>{for(let n of e)if(n!==!0){if(n===xa)return xa;if(n===!1||n instanceof In)return n}return!0}),mt(e=>e!==xa),Xt(1)))}function _I(t,e){return Ee(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?V(U(_({},n),{guardsResult:!0})):DI(s,r,i,t).pipe(Ee(a=>a&&gI(a)?EI(r,o,t,e):V(a)),K(a=>U(_({},n),{guardsResult:a})))})}function DI(t,e,n,r){return ve(t).pipe(Ee(i=>TI(i.component,i.route,n,e,r)),Rt(i=>i!==!0,!0))}function EI(t,e,n,r){return ve(e).pipe(xr(i=>Nr(SI(i.route.parent,r),II(i.route,r),AI(t,i.path,n),MI(t,i.route,n))),Rt(i=>i!==!0,!0))}function II(t,e){return t!==null&&e&&e(new Wd(t)),V(!0)}function SI(t,e){return t!==null&&e&&e(new qd(t)),V(!0)}function MI(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return V(!0);let i=r.map(o=>Ts(()=>{let s=So(e)??n,a=ai(o,s),l=vI(a)?a.canActivate(e,t):or(s,()=>a(e,t));return Mn(l).pipe(Rt())}));return V(i).pipe(si())}function AI(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>hI(s)).filter(s=>s!==null).map(s=>Ts(()=>{let a=s.guards.map(l=>{let c=So(s.node)??n,u=ai(l,c),d=wI(u)?u.canActivateChild(r,t):or(c,()=>u(r,t));return Mn(d).pipe(Rt())});return V(a).pipe(si())}));return V(o).pipe(si())}function TI(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return V(!0);let s=o.map(a=>{let l=So(e)??i,c=ai(a,l),u=bI(c)?c.canDeactivate(t,e,n,r):or(l,()=>c(t,e,n,r));return Mn(u).pipe(Rt())});return V(s).pipe(si())}function NI(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return V(!0);let o=i.map(s=>{let a=ai(s,t),l=yI(a)?a.canLoad(e,n):or(t,()=>a(e,n));return Mn(l)});return V(o).pipe(si(),Ry(r))}function Ry(t){return dc(Ae(e=>{if(ii(e))throw Ny(t,e)}),K(e=>e===!0))}function xI(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return V(!0);let o=i.map(s=>{let a=ai(s,t),l=CI(a)?a.canMatch(e,n):or(t,()=>a(e,n));return Mn(l)});return V(o).pipe(si(),Ry(r))}var Eo=class{constructor(e){this.segmentGroup=e||null}},Ha=class extends Error{constructor(e){super(),this.urlTree=e}};function Xr(t){return Tr(new Eo(t))}function OI(t){return Tr(new x(4e3,!1))}function kI(t){return Tr(xy(!1,ct.GuardRejected))}var tf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return V(r);if(i.numberOfChildren>1||!i.children[B])return OI(e.redirectTo);i=i.children[B]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Ha(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new In(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new ae(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},nf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RI(t,e,n,r,i){let o=hf(t,e,n);return o.matched?(r=cI(e,r),xI(r,e,n,i).pipe(K(s=>s===!0?o:_({},nf)))):V(o)}function hf(t,e,n){if(e.path==="**")return PI(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},nf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xE)(n,t,e);if(!i)return _({},nf);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function PI(t){return{matched:!0,parameters:t.length>0?hy(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function dy(t,e,n,r){return n.length>0&&VI(t,n,r)?{segmentGroup:new ae(e,LI(r,new ae(n,t.children))),slicedSegments:[]}:n.length===0&&$I(t,n,r)?{segmentGroup:new ae(t.segments,FI(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ae(t.segments,t.children),slicedSegments:n}}function FI(t,e,n,r){let i={};for(let o of n)if(qa(t,e,o)&&!r[Bt(o)]){let s=new ae([],{});i[Bt(o)]=s}return _(_({},r),i)}function LI(t,e){let n={};n[B]=e;for(let r of t)if(r.path===""&&Bt(r)!==B){let i=new ae([],{});n[Bt(r)]=i}return n}function VI(t,e,n){return n.some(r=>qa(t,e,r)&&Bt(r)!==B)}function $I(t,e,n){return n.some(r=>qa(t,e,r))}function qa(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function jI(t,e,n,r){return Bt(t)!==r&&(r===B||!qa(e,n,t))?!1:hf(e,t,n).matched}function BI(t,e,n){return e.length===0&&!t.children[n]}var rf=class{};function UI(t,e,n,r,i,o,s="emptyOnly"){return new of(t,e,n,r,i,s,o).recognize()}var HI=31,of=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new tf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new x(4002,`'${e.segmentGroup}'`)}recognize(){let e=dy(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(n=>{let r=new _o([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},B,this.rootComponentType,null,{}),i=new et(r,n),o=new Ba("",i),s=QE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,B).pipe(wn(r=>{if(r instanceof Ha)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Eo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=lf(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(K(o=>o instanceof et?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ve(i).pipe(xr(o=>{let s=r.children[o],a=uI(n,o);return this.processSegmentGroup(e,a,s,o)}),bc((o,s)=>(o.push(...s),o)),bn(null),wc(),Ee(o=>{if(o===null)return Xr(r);let s=Py(o);return GI(s),V(s)}))}processSegment(e,n,r,i,o,s){return ve(n).pipe(xr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(wn(l=>{if(l instanceof Eo)return V(null);throw l}))),Rt(a=>!!a),wn(a=>{if(ky(a))return BI(r,i,o)?V(new rf):Xr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return jI(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Xr(i):Xr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=hf(n,i,o);if(!a)return Xr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>HI&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ee(f=>this.processSegment(e,r,n,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=RI(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(gt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(gt(({routes:l})=>{let c=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new _o(u,f,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,zI(r),Bt(r),r.component??r._loadedComponent??null,r,WI(r)),{segmentGroup:m,slicedSegments:p}=dy(n,u,d,l);if(p.length===0&&m.hasChildren())return this.processChildren(c,l,m).pipe(K(v=>v===null?null:new et(h,v)));if(l.length===0&&p.length===0)return V(new et(h,[]));let g=Bt(r)===o;return this.processSegment(c,l,m,p,g?B:o,!0).pipe(K(v=>new et(h,v instanceof et?[v]:[])))}))):Xr(n)))}getChildConfig(e,n,r){return n.children?V({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?V({routes:n._loadedRoutes,injector:n._loadedInjector}):NI(e,n,r,this.urlSerializer).pipe(Ee(i=>i?this.configLoader.loadChildren(e,n).pipe(Ae(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):kI(n))):V({routes:[],injector:e})}};function GI(t){t.sort((e,n)=>e.value.outlet===B?-1:n.value.outlet===B?1:e.value.outlet.localeCompare(n.value.outlet))}function qI(t){let e=t.value.routeConfig;return e&&e.path===""}function Py(t){let e=[],n=new Set;for(let r of t){if(!qI(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Py(r.children);e.push(new et(r.value,i))}return e.filter(r=>!n.has(r))}function zI(t){return t.data||{}}function WI(t){return t.resolve||{}}function YI(t,e,n,r,i,o){return Ee(s=>UI(t,e,n,r,s.extractedUrl,i,o).pipe(K(({state:a,tree:l})=>U(_({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function KI(t,e){return Ee(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return V(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of Fy(l))s.add(c);let a=0;return ve(s).pipe(xr(l=>o.has(l)?QI(l,r,t,e):(l.data=lf(l,l.parent,t).resolve,V(void 0))),Ae(()=>a++),Or(1),Ee(l=>a===s.size?V(n):nt))})}function Fy(t){let e=t.children.map(n=>Fy(n)).flat();return[t,...e]}function QI(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Ay(i)&&(o[Io]=i.title),ZI(o,t,e,r).pipe(K(s=>(t._resolvedData=s,t.data=lf(t,t.parent,n).resolve,null)))}function ZI(t,e,n,r){let i=Rd(t);if(i.length===0)return V({});let o={};return ve(i).pipe(Ee(s=>JI(t[s],e,n,r).pipe(Rt(),Ae(a=>{o[s]=a}))),Or(1),vc(o),wn(s=>ky(s)?nt:Tr(s)))}function JI(t,e,n,r){let i=So(e)??r,o=ai(t,i),s=o.resolve?o.resolve(e,n):or(i,()=>o(e,n));return Mn(s)}function Od(t){return gt(e=>{let n=t(e);return n?ve(n).pipe(K(()=>e)):V(e)})}var Ly=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===B);return i}getResolvedTitleForRoute(r){return r.data[Io]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>A(XI),providedIn:"root"});let t=e;return t})(),XI=(()=>{let e=class e extends Ly{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(J(sy))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pf=new j("",{providedIn:"root",factory:()=>({})}),mf=new j(""),eS=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A(vd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return V(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Mn(r.loadComponent()).pipe(K(Vy),Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ni(()=>{this.componentLoaders.delete(r)})),o=new Ar(i,()=>new Ze).pipe(Mr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return V({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=tS(i,this.compiler,r,this.onLoadEndListener).pipe(Ni(()=>{this.childrenLoaders.delete(i)})),a=new Ar(s,()=>new Ze).pipe(Mr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tS(t,e,n,r){return Mn(t.loadChildren()).pipe(K(Vy),Ee(i=>i instanceof Ki||Array.isArray(i)?V(i):ve(e.compileModuleAsync(i))),K(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(mf,[],{optional:!0,self:!0}).flat()),{routes:s.map(ff),injector:o}}))}function nS(t){return t&&typeof t=="object"&&"default"in t}function Vy(t){return nS(t)?t.default:t}var gf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>A(rS),providedIn:"root"});let t=e;return t})(),rS=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iS=new j("");var oS=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ze,this.transitionAbortSubject=new Ze,this.configLoader=A(eS),this.environmentInjector=A(st),this.urlSerializer=A(af),this.rootContexts=A(Ga),this.location=A(so),this.inputBindingEnabled=A(df,{optional:!0})!==null,this.titleStrategy=A(Ly),this.options=A(pf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(gf),this.createViewTransition=A(iS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>V(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Hd(o)),i=o=>this.events.next(new Gd(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(U(_(_({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new pe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:mo,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(s=>s.id!==0),K(s=>U(_({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),gt(s=>{this.currentTransition=s;let a=!1,l=!1;return V(s).pipe(Ae(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?U(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),gt(c=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new gr(c.id,this.urlSerializer.serialize(c.rawUrl),f,Vd.IgnoredSameUrlNavigation)),c.resolve(null),nt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return V(c).pipe(gt(f=>{let h=this.transitions?.getValue();return this.events.next(new vo(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?nt:Promise.resolve(f)}),YI(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ae(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=U(_({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Va(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:h,source:m,restoredState:p,extras:g}=c,v=new vo(f,this.urlSerializer.serialize(h),m,p);this.events.next(v);let w=Sy(this.rootComponentType).snapshot;return this.currentTransition=s=U(_({},c),{targetSnapshot:w,urlAfterRedirects:h,extras:U(_({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,V(s)}else{let f="";return this.events.next(new gr(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Vd.IgnoredByUrlHandlingStrategy)),c.resolve(null),nt}}),Ae(c=>{let u=new $d(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),K(c=>(this.currentTransition=s=U(_({},c),{guards:fI(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),_I(this.environmentInjector,c=>this.events.next(c)),Ae(c=>{if(s.guardsResult=c.guardsResult,ii(c.guardsResult))throw Ny(this.urlSerializer,c.guardsResult);let u=new jd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),mt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ct.GuardRejected),!1)),Od(c=>{if(c.guards.canActivateChecks.length)return V(c).pipe(Ae(u=>{let d=new Bd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),gt(u=>{let d=!1;return V(u).pipe(KI(this.paramsInheritanceStrategy,this.environmentInjector),Ae({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",ct.NoDataFromResolver)}}))}),Ae(u=>{let d=new Ud(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Od(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ae(h=>{d.component=h}),K(()=>{})));for(let h of d.children)f.push(...u(h));return f};return As(u(c.targetSnapshot.root)).pipe(bn(null),Xt(1))}),Od(()=>this.afterPreactivation()),gt(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?ve(d).pipe(K(()=>s)):V(s)}),K(c=>{let u=iI(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=U(_({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ae(()=>{this.events.next(new bo)}),dI(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Xt(1),Ae({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),_c(this.transitionAbortSubject.pipe(Ae(c=>{throw c}))),Ni(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",ct.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),wn(c=>{if(l=!0,Oy(c))this.events.next(new Sn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),aI(c)?this.events.next(new Co(c.url)):s.resolve(!1);else{this.events.next(new wo(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return nt}))}))}cancelNavigationTransition(r,i,o){let s=new Sn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sS(t){return t!==mo}var aS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>A(lS),providedIn:"root"});let t=e;return t})(),sf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},lS=(()=>{let e=class e extends sf{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=to(e)))(o||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$y=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>A(cS),providedIn:"root"});let t=e;return t})(),cS=(()=>{let e=class e extends $y{constructor(){super(...arguments),this.location=A(so),this.urlSerializer=A(af),this.options=A(pf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(gf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new In,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Sy(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof vo)this.stateMemento=this.createStateMemento();else if(r instanceof gr)this.rawUrlTree=i.initialUrl;else if(r instanceof Va){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof bo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Sn&&(r.code===ct.GuardRejected||r.code===ct.NoDataFromResolver)?this.restoreHistory(i):r instanceof wo?this.restoreHistory(i,!0):r instanceof mr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=_(_({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=_(_({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=to(e)))(o||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ho=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ho||{});function uS(t,e){t.events.pipe(mt(n=>n instanceof mr||n instanceof Sn||n instanceof wo||n instanceof gr),K(n=>n instanceof mr||n instanceof gr?ho.COMPLETE:(n instanceof Sn?n.code===ct.Redirect||n.code===ct.SupersededByNewNavigation:!1)?ho.REDIRECTING:ho.FAILED),mt(n=>n!==ho.REDIRECTING),Xt(1)).subscribe(()=>{e()})}function dS(t){throw t}var fS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jy=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=A(Da),this.stateManager=A($y),this.options=A(pf,{optional:!0})||{},this.pendingTasks=A(ba),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(oS),this.urlSerializer=A(af),this.location=A(so),this.urlHandlingStrategy=A(gf),this._events=new Ze,this.errorHandler=this.options.errorHandler||dS,this.navigated=!1,this.routeReuseStrategy=A(aS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(mf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(df,{optional:!0}),this.eventsSubscription=new De,this.isNgZoneEnabled=A(_e)instanceof _e&&_e.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Sn&&i.code!==ct.Redirect&&i.code!==ct.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof mr)this.navigated=!0;else if(i instanceof Co){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||sS(o.source)};this.scheduleNavigation(a,mo,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}mS(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=_({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(ff),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=_(_({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=_y(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return Dy(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=ii(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,mo,null,i)}navigate(r,i={skipLocationChange:!1}){return pS(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=_({},fS):i===!1?o=_({},hS):o=i,ii(r))return ay(this.currentUrlTree,r,o);let s=this.parseUrl(r);return ay(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,h)=>{l=f,c=h});let d=this.pendingTasks.add();return uS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pS(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new x(4008,!1)}function mS(t){return!(t instanceof bo)&&!(t instanceof Co)}var gS=new j("");function By(t,...e){return la([{provide:mf,multi:!0,useValue:t},[],{provide:oi,useFactory:yS,deps:[jy]},{provide:yd,multi:!0,useFactory:vS},e.map(n=>n.\u0275providers)])}function yS(t){return t.routerState.root}function vS(){let t=A(Wr);return e=>{let n=t.get(oo);if(e!==n.components[0])return;let r=t.get(jy),i=t.get(wS);t.get(bS)===1&&r.initialNavigation(),t.get(CS,null,G.Optional)?.setUpPreloading(),t.get(gS,null,G.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var wS=new j("",{factory:()=>new Ze}),bS=new j("",{providedIn:"root",factory:()=>1});var CS=new j("");var Uy=[];var Hy={providers:[By(Uy)]};var XR=new TextDecoder,Gy=new TextEncoder,_S=["#CMDOK","#CMDER","#CMDUN","#CMDSM","#CMDSY"];function tt(t,e){return t.toString(16).toUpperCase().padStart(e,"0")}function Ut(t){return t.reduce((e,n)=>e+tt(n,2),"")}function za(t){return Uint8Array.from(t.match(/.{2}/g).map(e=>parseInt(e,16)))}function To(t,e){t.match(/.{2}/g).map((n,r)=>e[r]=Number.parseInt(n,16))}function qy(t,e){if(_S.includes(t))return;let n;if(t[0]=="#")n=Gy.encode([t].concat(e).join("	")+"	");else if(t[0]=="$")n=Gy.encode([t.slice(1)]+e.join(","));else return;let r=n.reduce((i,o)=>o==33?i:i^o);return tt(r,2)}var Ao=class{constructor({encoded:e,type:n,args:r}){if(this.args=r||[],!e){if(!n)throw new Error("Missing message type");this.type=n,this.checksum_calc=qy(n,this.args);return}if(e[0]=="#"){let i=e.replace(/[\r\n]*$/,"").split("	");this.type=i[0],i.length>1&&(this.checksum_recv=i.at(-1)),i.length>2&&(this.args=i.slice(1,-1))}else if(e[0]=="$"){this.type=e.slice(0,5);let i=e.slice(5).replace(/[\r\n]*$/,"").split("*");this.checksum_recv=i[1],this.args=i[0].split(",")}else throw new Error(`Invalid message ${e}`);this.checksum_calc=qy(this.type,this.args)}toString(){if(!this.checksum_calc)return this.type+`\r
`;let e=this.checksum_recv||this.checksum_calc;if(this.type[0]=="#")return[this.type].concat(this.args).concat([e]).join("	")+`\r
`;if(this.type[0]=="$")return[this.type]+this.args.join(",")+`*${e}\r
`;throw new Error(`Unknown message type ${this.type}`)}validate(){return!this.checksum_calc||!this.checksum_recv||this.checksum_calc==this.checksum_recv}};var bh=Ow(zy());var wf=class{constructor(e,n){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=n}generateVariable(e){let n=[...this.scopes[this.scopes.length-1]];return e&&n.push(e),n.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+`
`}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let n=this.reverseImports.get(e);return n||(n=this.imports.push(e)-1,this.reverseImports.set(e,n)),`${this.importPath}[${n}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){let n=this.references.get(e);n&&(n.resolved=!0)}markRequested(e){e.forEach(n=>{let r=this.references.get(n);r&&(r.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([e,n])=>!n.resolved&&!n.requested).map(([e,n])=>e)}},_t=new Map,yr="___parser_",Dt={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},Wa={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},Ya={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},No=class t{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new t}primitiveGenerateN(e,n){let r=Wa[e],i=Ya[e];n.pushCode(`${n.generateVariable(this.varName)} = dataView.get${r}(offset, ${i});`),n.pushCode(`offset += ${Dt[e]};`)}primitiveN(e,n,r){return this.setNextParser(e,n,r)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,n={}){return this.primitiveN("uint8",e,n)}uint16(e,n={}){return this.primitiveN(this.useThisEndian("uint16"),e,n)}uint16le(e,n={}){return this.primitiveN("uint16le",e,n)}uint16be(e,n={}){return this.primitiveN("uint16be",e,n)}uint32(e,n={}){return this.primitiveN(this.useThisEndian("uint32"),e,n)}uint32le(e,n={}){return this.primitiveN("uint32le",e,n)}uint32be(e,n={}){return this.primitiveN("uint32be",e,n)}int8(e,n={}){return this.primitiveN("int8",e,n)}int16(e,n={}){return this.primitiveN(this.useThisEndian("int16"),e,n)}int16le(e,n={}){return this.primitiveN("int16le",e,n)}int16be(e,n={}){return this.primitiveN("int16be",e,n)}int32(e,n={}){return this.primitiveN(this.useThisEndian("int32"),e,n)}int32le(e,n={}){return this.primitiveN("int32le",e,n)}int32be(e,n={}){return this.primitiveN("int32be",e,n)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,n={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,n)}int64be(e,n={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,n)}int64le(e,n={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,n)}uint64(e,n={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,n)}uint64be(e,n={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,n)}uint64le(e,n={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,n)}floatle(e,n={}){return this.primitiveN("floatle",e,n)}floatbe(e,n={}){return this.primitiveN("floatbe",e,n)}doublele(e,n={}){return this.primitiveN("doublele",e,n)}doublebe(e,n={}){return this.primitiveN("doublebe",e,n)}bitN(e,n,r){return r.length=e,this.setNextParser("bit",n,r)}bit1(e,n={}){return this.bitN(1,e,n)}bit2(e,n={}){return this.bitN(2,e,n)}bit3(e,n={}){return this.bitN(3,e,n)}bit4(e,n={}){return this.bitN(4,e,n)}bit5(e,n={}){return this.bitN(5,e,n)}bit6(e,n={}){return this.bitN(6,e,n)}bit7(e,n={}){return this.bitN(7,e,n)}bit8(e,n={}){return this.bitN(8,e,n)}bit9(e,n={}){return this.bitN(9,e,n)}bit10(e,n={}){return this.bitN(10,e,n)}bit11(e,n={}){return this.bitN(11,e,n)}bit12(e,n={}){return this.bitN(12,e,n)}bit13(e,n={}){return this.bitN(13,e,n)}bit14(e,n={}){return this.bitN(14,e,n)}bit15(e,n={}){return this.bitN(15,e,n)}bit16(e,n={}){return this.bitN(16,e,n)}bit17(e,n={}){return this.bitN(17,e,n)}bit18(e,n={}){return this.bitN(18,e,n)}bit19(e,n={}){return this.bitN(19,e,n)}bit20(e,n={}){return this.bitN(20,e,n)}bit21(e,n={}){return this.bitN(21,e,n)}bit22(e,n={}){return this.bitN(22,e,n)}bit23(e,n={}){return this.bitN(23,e,n)}bit24(e,n={}){return this.bitN(24,e,n)}bit25(e,n={}){return this.bitN(25,e,n)}bit26(e,n={}){return this.bitN(26,e,n)}bit27(e,n={}){return this.bitN(27,e,n)}bit28(e,n={}){return this.bitN(28,e,n)}bit29(e,n={}){return this.bitN(29,e,n)}bit30(e,n={}){return this.bitN(30,e,n)}bit31(e,n={}){return this.bitN(31,e,n)}bit32(e,n={}){return this.bitN(32,e,n)}namely(e){return _t.set(e,this),this.alias=e,this}skip(e,n={}){return this.seek(e,n)}seek(e,n={}){if(n.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,n){if(!n.zeroTerminated&&!n.length&&!n.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((n.zeroTerminated||n.length)&&n.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(n.stripNull&&!(n.length||n.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return n.encoding=n.encoding||"utf8",this.setNextParser("string",e,n)}buffer(e,n){if(!n.length&&!n.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,n)}wrapped(e,n){if(typeof n!="object"&&typeof e=="object"&&(n=e,e=""),!n||!n.wrapper||!n.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!n.length&&!n.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,n)}array(e,n){if(!n.readUntil&&!n.length&&!n.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!n.type)throw new Error("type is required for array.");if(typeof n.type=="string"&&!_t.has(n.type)&&!(n.type in Dt))throw new Error(`Array element type "${n.type}" is unkown.`);return this.setNextParser("array",e,n)}choice(e,n){if(typeof n!="object"&&typeof e=="object"&&(n=e,e=""),!n)throw new Error("tag and choices are are required for choice.");if(!n.tag)throw new Error("tag is requird for choice.");if(!n.choices)throw new Error("choices is required for choice.");for(let r in n.choices){let i=parseInt(r,10),o=n.choices[i];if(isNaN(i))throw new Error(`Choice key "${r}" is not a number.`);if(typeof o=="string"&&!_t.has(o)&&!(o in Dt))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",e,n)}nest(e,n){if(typeof n!="object"&&typeof e=="object"&&(n=e,e=""),!n||!n.type)throw new Error("type is required for nest.");if(!(n.type instanceof t)&&!_t.has(n.type))throw new Error("type must be a known parser name or a Parser object.");if(!(n.type instanceof t)&&!e)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,n)}pointer(e,n){if(!n.offset)throw new Error("offset is required for pointer.");if(!n.type)throw new Error("type is required for pointer.");if(typeof n.type=="string"&&!(n.type in Dt)&&!_t.has(n.type))throw new Error(`Pointer type "${n.type}" is unkown.`);return this.setNextParser("pointer",e,n)}saveOffset(e,n={}){return this.setNextParser("saveOffset",e,n)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){let n=new wf(e,this.useContextVariables);return n.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(n),n.pushCode(`return ${yr+this.alias}(0).result;`)):this.addRawCode(n),n}getCode(){return this.getContext("imports").code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${yr+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){let n=e.getUnresolvedReferences();e.markRequested(n),n.forEach(r=>{var i;(i=_t.get(r))===null||i===void 0||i.addAliasedCode(e)})}compile(){let e="imports",n=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${n.code} };`)(n.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(Dt).indexOf(this.type)>=0)e=Dt[this.type];else if(this.type==="string"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let n=NaN;typeof this.options.type=="string"?n=Dt[this.options.type]:this.options.type instanceof t&&(n=this.options.type.sizeOf()),e=this.options.length*n}else this.type==="seek"?e=this.options.length:this.type==="nest"?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,n,r){let i=new t;return i.type=e,i.varName=n,i.options=r,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e);break}this.type!=="bit"&&this.generateAssert(e)}let n=e.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(e,n,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;let n=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{let r=e.addImport(this.options.assert);e.pushCode(`if (!${r}.call(vars, ${n})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${n}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${n}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${n} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){let n=JSON.parse(JSON.stringify(this));if(n.options=this.options,n.generateAssert=this.generateAssert.bind(this),n.generateFormatter=this.generateFormatter.bind(this),n.varName=e.generateVariable(n.varName),e.bitFields.push(n),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){let r=e.generateTmpVariable();e.pushCode(`var ${r} = 0;`);let i=(u=0)=>{let d=0;for(let f=u;f<e.bitFields.length;f++){let h=e.bitFields[f].options.length;if(d+h>32)break;d+=h}return d},o=u=>(u<=8?(e.pushCode(`${r} = dataView.getUint8(offset);`),u=8):u<=16?(e.pushCode(`${r} = dataView.getUint16(offset);`),u=16):u<=24?(e.pushCode(`${r} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),u=24):(e.pushCode(`${r} = dataView.getUint32(offset);`),u=32),e.pushCode(`offset += ${u/8};`),u),s=0,a=this.endian==="be",l=0,c=0;e.bitFields.forEach((u,d)=>{let f=u.options.length;if(f>c){if(c){let p=-1>>>32-c;e.pushCode(`${u.varName} = (${r} & 0x${p.toString(16)}) << ${f-c};`),f-=c}s=0,c=l=o(i(d)-c)}let h=a?l-s-f:s,m=-1>>>32-f;e.pushCode(`${u.varName} ${f<u.options.length?"|=":"="} ${r} >> ${h} & 0x${m.toString(16)};`),u.options.length===32&&e.pushCode(`${u.varName} >>>= 0`),u.options.assert&&u.generateAssert(e),u.options.formatter&&u.generateFormatter(e,u.varName,u.options.formatter),s+=f,c-=f}),e.bitFields=[]}}generateSeek(e){let n=e.generateOption(this.options.length);e.pushCode(`offset += ${n};`)}generateString(e){let n=e.generateVariable(this.varName),r=e.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",s='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){let a=this.options.length;e.pushCode(`var ${r} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${r} < ${a});`);let l=`offset - ${r} < ${a} ? offset - 1 : offset`;e.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, ${l}), ${s}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, ${l}));`)}else if(this.options.length){let a=e.generateOption(this.options.length);e.pushCode(o?`${n} = Array.from(buffer.subarray(offset, offset + ${a}), ${s}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${a}));`),e.pushCode(`offset += ${a};`)}else this.options.zeroTerminated?(e.pushCode(`var ${r} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, offset - 1), ${s}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${r} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, offset), ${s}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset));`));this.options.stripNull&&e.pushCode(`${n} = ${n}.replace(/\\x00+$/g, '')`)}generateBuffer(e){let n=e.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){let r=this.options.readUntil,i=e.generateTmpVariable(),o=e.generateTmpVariable();e.pushCode(`var ${i} = offset;`),e.pushCode(`var ${o} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${o} = dataView.getUint8(offset);`);let s=e.addImport(r);e.pushCode(`if (${s}.call(${e.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${n} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${n} = buffer.subarray(offset);`);else{let r=e.generateOption(this.options.length);e.pushCode(`${n} = buffer.subarray(offset, offset + ${r});`),e.pushCode(`offset += ${r};`)}this.options.clone&&e.pushCode(`${n} = buffer.constructor.from(${n});`)}generateArray(e){let n=e.generateOption(this.options.length),r=e.generateOption(this.options.lengthInBytes),i=this.options.type,o=e.generateTmpVariable(),s=e.generateVariable(this.varName),a=e.generateTmpVariable(),l=this.options.key,c=typeof l=="string";if(c?e.pushCode(`${s} = {};`):e.pushCode(`${s} = [];`),typeof this.options.readUntil=="function"?e.pushCode("do {"):this.options.readUntil==="eof"?e.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):r!==void 0?e.pushCode(`for (var ${o} = offset + ${r}; offset < ${o}; ) {`):e.pushCode(`for (var ${o} = ${n}; ${o} > 0; ${o}--) {`),typeof i=="string")if(_t.get(i)){let u=e.generateTmpVariable();if(e.pushCode(`var ${u} = ${yr+i}(offset, {`),e.useContextVariables){let d=e.generateVariable();e.pushCode(`$parent: ${d},`),e.pushCode(`$root: ${d}.$root,`),!this.options.readUntil&&r===void 0&&e.pushCode(`$index: ${n} - ${o},`)}e.pushCode("});"),e.pushCode(`var ${a} = ${u}.result; offset = ${u}.offset;`),i!==this.alias&&e.addReference(i)}else{let u=Wa[i],d=Ya[i];e.pushCode(`var ${a} = dataView.get${u}(offset, ${d});`),e.pushCode(`offset += ${Dt[i]};`)}else if(i instanceof t){e.pushCode(`var ${a} = {};`);let u=e.generateVariable();e.pushScope(a),e.useContextVariables&&(e.pushCode(`${a}.$parent = ${u};`),e.pushCode(`${a}.$root = ${u}.$root;`),!this.options.readUntil&&r===void 0&&e.pushCode(`${a}.$index = ${n} - ${o};`)),i.generate(e),e.useContextVariables&&(e.pushCode(`delete ${a}.$parent;`),e.pushCode(`delete ${a}.$root;`),e.pushCode(`delete ${a}.$index;`)),e.popScope()}if(c?e.pushCode(`${s}[${a}.${l}] = ${a};`):e.pushCode(`${s}.push(${a});`),e.pushCode("}"),typeof this.options.readUntil=="function"){let u=this.options.readUntil,d=e.addImport(u);e.pushCode(`while (!${d}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset)));`)}}generateChoiceCase(e,n,r){if(typeof r=="string"){let i=e.generateVariable(this.varName);if(_t.has(r)){let o=e.generateTmpVariable();e.pushCode(`var ${o} = ${yr+r}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${i}.$parent,`),e.pushCode(`$root: ${i}.$root,`)),e.pushCode("});"),e.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),r!==this.alias&&e.addReference(r)}else{let o=Wa[r],s=Ya[r];e.pushCode(`${i} = dataView.get${o}(offset, ${s});`),e.pushCode(`offset += ${Dt[r]}`)}}else r instanceof t&&(e.pushPath(n),r.generate(e),e.popPath(n))}generateChoice(e){let n=e.generateOption(this.options.tag),r=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${r} = {};`),e.useContextVariables)){let i=e.generateVariable();e.pushCode(`${r}.$parent = ${i};`),e.pushCode(`${r}.$root = ${i}.$root;`)}e.pushCode(`switch(${n}) {`);for(let i in this.options.choices){let o=parseInt(i,10),s=this.options.choices[o];e.pushCode(`case ${o}:`),this.generateChoiceCase(e,this.varName,s),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${n} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}generateNest(e){let n=e.generateVariable(this.varName);if(this.options.type instanceof t){if(this.varName&&(e.pushCode(`${n} = {};`),e.useContextVariables)){let r=e.generateVariable();e.pushCode(`${n}.$parent = ${r};`),e.pushCode(`${n}.$root = ${r}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${n}.$parent;`),e.pushCode(`delete ${n}.$root;`))}else if(_t.has(this.options.type)){let r=e.generateTmpVariable();if(e.pushCode(`var ${r} = ${yr+this.options.type}(offset, {`),e.useContextVariables){let i=e.generateVariable();e.pushCode(`$parent: ${i},`),e.pushCode(`$root: ${i}.$root,`)}e.pushCode("});"),e.pushCode(`${n} = ${r}.result; offset = ${r}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){let n=e.generateVariable(this.varName),r=e.generateTmpVariable();if(typeof this.options.readUntil=="function"){let l=this.options.readUntil,c=e.generateTmpVariable(),u=e.generateTmpVariable();e.pushCode(`var ${c} = offset;`),e.pushCode(`var ${u} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${u} = dataView.getUint8(offset);`);let d=e.addImport(l);e.pushCode(`if (${d}.call(${e.generateVariable()}, ${u}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${r} = buffer.subarray(${c}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${r} = buffer.subarray(offset);`);else{let l=e.generateOption(this.options.length);e.pushCode(`${r} = buffer.subarray(offset, offset + ${l});`),e.pushCode(`offset += ${l};`)}this.options.clone&&e.pushCode(`${r} = buffer.constructor.from(${r});`);let i=e.generateTmpVariable(),o=e.generateTmpVariable(),s=e.generateTmpVariable(),a=e.addImport(this.options.wrapper);if(e.pushCode(`${r} = ${a}.call(this, ${r}).subarray(0);`),e.pushCode(`var ${i} = buffer;`),e.pushCode(`var ${o} = offset;`),e.pushCode(`var ${s} = dataView;`),e.pushCode(`buffer = ${r};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof t)this.varName&&e.pushCode(`${n} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(_t.has(this.options.type)){let l=e.generateTmpVariable();e.pushCode(`var ${l} = ${yr+this.options.type}(0);`),e.pushCode(`${n} = ${l}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${i};`),e.pushCode(`dataView = ${s};`),e.pushCode(`offset = ${o};`)}generateFormatter(e,n,r){if(typeof r=="function"){let i=e.addImport(r);e.pushCode(`${n} = ${i}.call(${e.generateVariable()}, ${n});`)}}generatePointer(e){let n=this.options.type,r=e.generateOption(this.options.offset),i=e.generateTmpVariable(),o=e.generateVariable(this.varName);if(e.pushCode(`var ${i} = offset;`),e.pushCode(`offset = ${r};`),this.options.type instanceof t){if(e.pushCode(`${o} = {};`),e.useContextVariables){let s=e.generateVariable();e.pushCode(`${o}.$parent = ${s};`),e.pushCode(`${o}.$root = ${s}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${o}.$parent;`),e.pushCode(`delete ${o}.$root;`))}else if(_t.has(this.options.type)){let s=e.generateTmpVariable();if(e.pushCode(`var ${s} = ${yr+this.options.type}(offset, {`),e.useContextVariables){let a=e.generateVariable();e.pushCode(`$parent: ${a},`),e.pushCode(`$root: ${a}.$root,`)}e.pushCode("});"),e.pushCode(`${o} = ${s}.result; offset = ${s}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(Dt).indexOf(this.options.type)>=0){let s=Wa[n],a=Ya[n];e.pushCode(`${o} = dataView.get${s}(offset, ${a});`),e.pushCode(`offset += ${Dt[n]};`)}e.pushCode(`offset = ${i};`)}generateSaveOffset(e){let n=e.generateVariable(this.varName);e.pushCode(`${n} = offset`)}};function Wy(t){return t.reduce((e,n)=>e^n)}var Ht=function(t){return t[t.UTC=1]="UTC",t[t.VALID=2]="VALID",t[t.LAT=4]="LAT",t[t.LON=8]="LON",t[t.HGT=16]="HGT",t[t.SPD=32]="SPD",t[t.TRK=64]="TRK",t[t.HDOP=1024]="HDOP",t[t.NSAT=4096]="NSAT",t}(Ht||{});function DS(t){let e=0,n=new No().endianness("little"),r=[],i=[];return t&Ht.UTC&&n.int32("utc"),t&Ht.VALID&&n.uint8("valid"),t&Ht.LAT&&n.floatle("lat"),t&Ht.LON&&n.floatle("lon"),t&Ht.HGT&&n.int16("hgt"),t&Ht.SPD&&n.uint16("spd"),t&Ht.TRK&&n.int16("trk"),t&Ht.HDOP&&n.int16("hdop"),t&Ht.NSAT&&n.uint8("nsat"),n.uint8("checksum"),n}var Yy=function(t){return t[t.INVALID=0]="INVALID",t[t.SPS=1]="SPS",t[t.DGPS=2]="DGPS",t[t.PPS=3]="PPS",t[t.RTK=4]="RTK",t[t.FRTK=5]="FRTK",t[t.ESTIMATED=6]="ESTIMATED",t[t.MANUAL=7]="MANUAL",t[t.SIMULATOR=8]="SIMULATOR",t}(Yy||{}),xo=class extends Error{};function ES(t,e=!0){if(t.length<16)throw new Error("Insufficient data for parsing header");let r=new No().endianness("little").uint16("sectorId").uint8("loggingType").uint8("loggingMode").uint16("logContent").uint16("unknown_06").uint16("intervalSetting").uint16("distanceSetting").uint16("speedSetting").uint8("unknown_0e").uint8("checksum").parse(t.slice(0,16));if(e&&r.checksum!==Wy(t.slice(0,15)))throw new xo(`Invalid header checksum in ${Ut(t)}`);return r}function IS(t,e,n=!0){if(e.slice(0,6).every(i=>i===255)||e.slice(0,6).every(i=>i===0))return;let r=t.parse(e);if(n&&r.checksum!==Wy(e.slice(0,e.length-1)))throw new xo(`Checksum mismatch in waypoint data: ${Ut(e)}`);return r}function SS(t,e){let n=DS(t.logContent),r=[];for(let i=0;i<e.length;i+=n.sizeOf())try{let o=IS(n,e.slice(i,i+n.sizeOf()),!0);r.push(o)}catch(o){if(o instanceof xo)break;throw o}return r}var bf=class{constructor(e,n=!0){this.waypoints=[],this.header=ES(e.slice(0,18),n),this.mask=e.slice(17,60),this.unknown_3c=e.slice(60,64),this.waypoints=SS(this.header,e.slice(64))}};function MS(t,e){if(t.push(`<trkpt lat="${e.lat}" lon="${e.lon}">`),t.push(`<ele>${e.hgt}</ele>`),t.push(`<time>${new Date(e.utc*1e3).toISOString().replace("Z","")}</time>`),e.spd||e.trk){let n={};e.spd&&(n.spd=e.spd),e.trk&&(n.trk=e.trk),t.push(`<cmt>${JSON.stringify(n)}</cmt>`)}e.valid==Yy.DGPS&&t.push("<fix>dgps</fix>"),e.nsat&&t.push(`<sat>${e.nsat}</sat>`),e.hdop&&t.push(`<hdop>${e.hdop}</hdop>`),t.push("</trkpt>")}var Ka=class{constructor(e,n=!0){this.sectors=[];for(let r=0;r+4096<=e.length;r+=4096){let i=e.slice(r,r+4096);this.sectors.push(new bf(i,n))}}getGpx(){let e=[`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="Nghx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://www.topografix.com/GPX/1/1"
 xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
`];e.push("<trk><trkseg>");for(let n of this.sectors)for(let r of n.waypoints)r&&MS(e,r);return e.push("</trkseg></trk></gpx>"),e}};var AS=new TextDecoder("utf-8"),Qa=class{constructor(e){this.reader=e,this.chunk="",this.pos=0}_getNextChunk(){return N(this,null,function*(){let e=yield this.reader.read();if(e.done)throw new Error("Stream is done");this.chunk=AS.decode(e.value),this.pos=0})}read(e){return N(this,null,function*(){for(var n="";;)if(this.pos+e-n.length<=this.chunk.length){let r=this.pos+e-n.length;return n+=this.chunk.slice(this.pos,r),this.pos=r,n}else n+=this.chunk.slice(this.pos),yield this._getNextChunk()})}readline(){return N(this,null,function*(){for(var e="";;){if(this.pos<this.chunk.length){let n=this.chunk.indexOf(`
`,this.pos);if(n!=-1)return e+=this.chunk.slice(this.pos,n+1),this.pos=n+1,e;e+=this.chunk.slice(this.pos)}yield this._getNextChunk()}})}flush(){this.chunk=""}};function Ky(t,e){let n=e=="lat"?t.toUpperCase().match(/^ *(\d+) *(N|S) *(\d+)\.(\d+) *$/):t.toUpperCase().match(/^ *(\d+) *(E|W) *(\d+)\.(\d+) *$/);if(n){let[r,i,o,s,a]=n,l=a.slice(0,4).padEnd(4,"0"),c=Number.parseInt(i,10),u=Number.parseInt(s,10)*1e4+Number.parseInt(l,10);return{deg:c,dir:o,min:u}}if(n=e=="lat"?t.toUpperCase().match(/^ *(\d+) *° *(\d+)\.(\d+) *['‘’`]? *(N|S) *$/):t.toUpperCase().match(/^ *(\d+) *° *(\d+)\.(\d+) *['‘’`]? *(E|W) *$/),n){let[r,i,o,s,a]=n,l=s.slice(0,4).padEnd(4,"0"),c=Number.parseInt(i,10),u=Number.parseInt(o,10)*1e4+Number.parseInt(l,10);return{deg:c,dir:a,min:u}}if(n=e=="lat"?t.toUpperCase().match(/^ *(\d+) *° *(\d+) *['‘’`] *(\d+|\d+\.\d+) *["“”]? *(N|S) *$/):t.toUpperCase().match(/^ *(\d+) *° *(\d+) *['‘’`] *(\d+|\d+\.\d+) *["“”]? *(E|W) *$/),n){let[r,i,o,s,a]=n,l=Number.parseInt(i,10),c=Number.parseInt(o,10)*1e4+Math.round(Number.parseFloat(s)*1e4/60);return{deg:l,dir:a,min:c}}if(n=t.match(/^ *([+-]?\d+(\.\d+)?) *$/),n){let[r,i]=n,o=Number.parseFloat(i),s;e=="lat"?s=o>0?"N":"S":s=o>0?"E":"W";let a=Math.floor(Math.abs(o)),l=Math.round((Math.abs(o)-a)*60*1e4);return{deg:a,dir:s,min:l}}}function li(t){let e=Ky(t,"lat");if(e)return{lat_deg:e.deg,lat_dir:e.dir,lat_min:e.min}}function ci(t){let e=Ky(t,"lon");if(e)return{lon_deg:e.deg,lon_dir:e.dir,lon_min:e.min}}var TS=new TextDecoder,NS=new TextEncoder;function un(t){for(var e=t.length-1;e>=0&&[0,255,32].includes(t[e]);e-=1);return TS.decode(t.slice(0,e+1))}function dn(t,e){let n=NS.encodeInto(e,t);t.subarray(n.written).fill(255)}var An=class{constructor(e){this.wp=e}toString(){let e=`${this.wp.id}, ${this.wp.name}, ${this.wp.lat_deg}${this.wp.lat_dir}${this.wp.lat_min}, ${this.wp.lon_deg}${this.wp.lon_dir}${this.wp.lon_min}`;return this.wp.address?`@0x${tt(this.wp.address,4)}: `+e:e}getLat(e){let n=Math.floor(this.wp.lat_min/1e4).toString(10).padStart(2,"0"),r=(this.wp.lat_min%1e4).toString(10).padStart(4,"0");return e?`${this.wp.lat_deg}${this.wp.lat_dir}${n}.${r}`:`${this.wp.lat_deg}\xB0 ${n}.${r}\u2019 ${this.wp.lat_dir}`}getLon(e){let n=Math.floor(this.wp.lon_min/1e4).toString(10).padStart(2,"0"),r=(this.wp.lon_min%1e4).toString(10).padStart(4,"0");return e?`${this.wp.lon_deg}${this.wp.lon_dir}${n}.${r}`:`${this.wp.lon_deg}\xB0 ${n}.${r}\u2019 ${this.wp.lon_dir}`}getMapLink(){let e=(this.wp.lat_dir=="N"?1:-1)*(this.wp.lat_deg+this.wp.lat_min/1e4/60),n=(this.wp.lon_dir=="E"?1:-1)*(this.wp.lon_deg+this.wp.lon_min/1e4/60);return`https://www.google.com/maps/place/${e},${n}`}fillConfig(e,n){if(!this.wp.address)throw new Error("The waypoint must have an address");let r=this.wp.address-n;if(r<0||r>e.length-32)throw new Error(`Waypoint address ${this.wp.address} (offset ${r}) is out of bounds`);let i=this.wp.name;i.length>=15&&(console.log(`Waypoint name too long ${i}, truncating`),i=i.substring(0,14));let o=e.subarray(r,r+32);this.wp.dsc_origin?o.set(this.wp.dsc_origin):o.set([255,255,255,255,240]),o[31]=this.wp.id,dn(o.subarray(16,31),i);let s=o.subarray(5,9),a=this.wp.lat_deg.toString(10).padStart(2,"0");if(a+=this.wp.lat_min.toString(10).padStart(6,"0"),a.length!=8)throw new Error(`Encoded waypoint lat too long ${a}`);To(a,s),o[9]=this.wp.lat_dir.charCodeAt(0);let l=o.subarray(10,15),c=this.wp.lon_deg.toString(10).padStart(4,"0");if(c+=this.wp.lon_min.toString(10).padStart(6,"0"),c.length!=10)throw new Error(`Encoded waypoint lon too long ${c}`);To(c,l),o[15]=this.wp.lon_dir.charCodeAt(0)}},Qy=new TextDecoder;function Za(t,e){let n=t[31];if(n==255)return;let r=un(t.subarray(16,31)),i=Ut(t.slice(5,9)),o=Number(i.slice(0,2)),s=Number(i.slice(2,9)),a=Qy.decode(t.slice(9,10)),l=Ut(t.slice(10,15)).slice(1),c=Number(l.slice(0,3)),u=Number(l.slice(3,10)),d=Qy.decode(t.slice(15,16));return new An({id:n,name:r,lat_deg:o,lat_min:s,lat_dir:a,lon_deg:c,lon_min:u,lon_dir:d,address:e,dsc_origin:t.slice(0,5)})}function Ja({name:t,lat:e,lon:n}){if(t.length==0)throw new Error("No name was provided");if(t.length>=15)throw new Error(`Waypoint name too long "${t}". Consider "${t.trim().substring(0,14).trim()}".`);if(!/^[-!"#%&'*+,.:<>\?\[\]_0-9A-Za-z ]+$/.test(t)){let o=/[^-!"#%&'*+,.:<>\?\[\]_0-9A-Za-z ]/g,s=t.matchAll(o),a="";for(let l of s){let c=l[0];a.includes(c)||(a=a+c)}throw new Error(`Waypoint name cannot contain ${a}`)}let r=li(e),i=ci(n);if(!r||!i)throw new Error(`Unparseable position ${e} ${n}`);if(r.lat_deg>90||r.lat_deg<0||r.lat_min<0||r.lat_min>60*1e4)throw new Error(`Bad latitude ${e}`);if(i.lon_deg>180||i.lon_deg<0||i.lon_min<0||i.lon_min>60*1e4)throw new Error(`Bad longitude ${n}`);if(!["N","S"].includes(r.lat_dir))throw new Error(`Bad latitude direction in ${e}`);if(!["E","W"].includes(i.lon_dir))throw new Error(`Bad longitude direction in ${n}`);return{lat:r,lon:i}}var Tn=32;var Nn=class{constructor(e){this.route={name:e.name,waypointIds:e.waypointIds.slice()}}fillConfig(e,n,r,i){if(n<0||n>e.length-i)throw new Error(`Waypoint offset ${n} is out of bounds`);let o=this.route.name;o.length>=16&&(console.log(`Route name too long ${o}, truncating`),o=o.substring(0,15)),dn(e.subarray(n,n+16),o);let s=this.route.waypointIds;s.length>r&&(console.log(`Too many waypoints in route (${s.length}), truncating to ${r}`),s=s.slice(0,r));let a=e.subarray(n+16,n+i);for(let[l,c]of s.entries())a[l]=c;a.fill(255,s.length,i-16)}};function Xa(t,e){let n=un(t.subarray(0,16));for(var r=e-1;r>=0&&t[16+r]==255;r-=1);if(n==""||r==-1)return;let i=t.subarray(16,16+r+1);return new Nn({name:n,waypointIds:Array.from(i)})}var ui=class{constructor(e,n,r,i){this.deviceConfig=r,this.updateCallback=i,this.dirtyWaypoints=!1,this.dirtyRoutes=!1,this.waypoints=e.slice(),this.routes=Array.from({length:n.length},(o,s)=>new Nn(n[s].route))}maybeUpdateCallback(){this.updateCallback&&this.updateCallback()}deleteWaypoint(e){let n=this.waypoints.findIndex(r=>r.wp.address==e.wp.address);this.waypoints.splice(n,1),this.dirtyWaypoints=!0;for(let r of this.routes){let i=r.route.waypointIds.filter(o=>o!=e.wp.id);i.length!=r.route.waypointIds.length&&(r.route.waypointIds=i,this.dirtyRoutes=!0)}this.routes=this.routes.filter(r=>r.route.waypointIds.length>0),this.maybeUpdateCallback()}editWaypoint(e,n,r,i){if(n.length>15)throw new Error(`Waypoint name too long ${n}`);let o=li(r),s=ci(i);if(!o||!s)throw new Error(`Unparseable position ${r} ${i}`);let a=this.waypoints.findIndex(l=>l.wp.address==e.wp.address);if(a==-1)throw new Error(`Could not find waypoint at ${e.wp.address}`);this.waypoints[a]=new An(U(_(_(_({},this.waypoints[a].wp),o),s),{name:n})),this.dirtyWaypoints=!0,this.maybeUpdateCallback()}addWaypoint(e){if(this.waypoints.length>=this.deviceConfig.waypointsNumber)throw new Error("No more room for waypoints");let{lat:n,lon:r}=Ja(e),i;for(i=1;i<255&&this.waypoints.find(o=>o.wp.id==i);i+=1);this.waypoints.push(new An(U(_(_({},n),r),{name:e.name,id:i}))),this.dirtyWaypoints=!0,this.maybeUpdateCallback()}deleteRoute(e){this.routes.splice(e,1),this.dirtyRoutes=!0,this.maybeUpdateCallback()}addRoute(e){if(this.routes.length>=this.deviceConfig.routesNumber)throw new Error(`No room for more routes (${this.routes.length})`);return this.routes.push(new Nn({name:e,waypointIds:[]})),this.dirtyRoutes=!0,this.maybeUpdateCallback(),this.routes.length-1}insertWaypointInRoute(e,n,r){let i=this.routes[e].route;if(i.waypointIds.length>=this.deviceConfig.numWaypointsPerRoute)throw new Error(`No room for more waypoints (${i.waypointIds.length})`);i.waypointIds.splice(r,0,n),this.dirtyRoutes=!0,this.maybeUpdateCallback()}deleteWaypointFromRoute(e,n){this.routes[e].route.waypointIds.splice(n,1),this.dirtyRoutes=!0,this.maybeUpdateCallback()}swapWaypointsInRoute(e,n,r){if(n==r)return;let i=this.routes[e].route,o=i.waypointIds[n],s=i.waypointIds[r];n<r?(i.waypointIds.splice(r,1,o),i.waypointIds.splice(n,1,s)):(i.waypointIds.splice(n,1,s),i.waypointIds.splice(r,1,o)),this.dirtyRoutes=!0,this.maybeUpdateCallback()}getBinaryWaypointData(e){let n=new Uint8Array(Tn*this.deviceConfig.waypointsNumber);return n.fill(255),Cf(this.waypoints,e,n),n}getBinaryRouteData(){this.routes.sort((n,r)=>n.route.name.localeCompare(r.route.name));let e=new Uint8Array(this.deviceConfig.routeBytes*this.deviceConfig.routesNumber);e.fill(255);for(let[n,r]of this.routes.entries())r.fillConfig(e,n*this.deviceConfig.routeBytes,this.deviceConfig.numWaypointsPerRoute,this.deviceConfig.routeBytes);return e}};function Cf(t,e,n){t.sort((i,o)=>i.wp.name.localeCompare(o.wp.name));let r=e;for(let i of t)i.wp.address=r,r+=Tn;for(let i of t)i.fillConfig(n,e)}var X=class t extends Error{constructor(e,n,r,...i){Array.isArray(n)&&(n=n.join(" ").trim()),super(n),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,t),this.code=e;for(let o of i)for(let s in o){let a=o[s];this[s]=Buffer.isBuffer(a)?a.toString(r.encoding):a==null?a:JSON.parse(JSON.stringify(a))}}};var Zy=function(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)};var el=function(t){let e=[];for(let n=0,r=t.length;n<r;n++){let i=t[n];if(i==null||i===!1)e[n]={disabled:!0};else if(typeof i=="string")e[n]={name:i};else if(Zy(i)){if(typeof i.name!="string")throw new X("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${n}`,"when column is an object literal"]);e[n]=i}else throw new X("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(i)} at position ${n}`])}return e};var _f=class{constructor(e=100){this.size=e,this.length=0,this.buf=Buffer.allocUnsafe(e)}prepend(e){if(Buffer.isBuffer(e)){let n=this.length+e.length;if(n>=this.size&&(this.resize(),n>=this.size))throw Error("INVALID_BUFFER_STATE");let r=this.buf;this.buf=Buffer.allocUnsafe(this.size),e.copy(this.buf,0),r.copy(this.buf,e.length),this.length+=e.length}else{let n=this.length++;n===this.size&&this.resize();let r=this.clone();this.buf[0]=e,r.copy(this.buf,1,0,n)}}append(e){let n=this.length++;n===this.size&&this.resize(),this.buf[n]=e}clone(){return Buffer.from(this.buf.slice(0,this.length))}resize(){let e=this.length;this.size=this.size*2;let n=Buffer.allocUnsafe(this.size);this.buf.copy(n,0,0,e),this.buf=n}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}},Df=_f;var xS=12,OS=13,kS=10,RS=32,PS=9,Jy=function(t){return{bomSkipped:!1,bufBytesStart:0,castField:t.cast_function,commenting:!1,error:void 0,enabled:t.from_line===1,escaping:!1,escapeIsQuote:Buffer.isBuffer(t.escape)&&Buffer.isBuffer(t.quote)&&Buffer.compare(t.escape,t.quote)===0,expectedRecordLength:Array.isArray(t.columns)?t.columns.length:void 0,field:new Df(20),firstLineToHeaders:t.cast_first_line_to_header,needMoreDataSize:Math.max(t.comment!==null?t.comment.length:0,...t.delimiter.map(e=>e.length),t.quote!==null?t.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new Df(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:t.record_delimiter.length===0?0:Math.max(...t.record_delimiter.map(e=>e.length)),trimChars:[Buffer.from(" ",t.encoding)[0],Buffer.from("	",t.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[Buffer.from(Buffer.from([OS],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([kS],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([xS],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([RS],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([PS],"utf8").toString(),t.encoding)]}};var Xy=function(t){return t.replace(/([A-Z])/g,function(e,n){return"_"+n.toLowerCase()})};var Ef=function(t){let e={};for(let r in t)e[Xy(r)]=t[r];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new X("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new X("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new X("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(r){let i=Date.parse(r);return isNaN(i)?r:new Date(i)};else if(typeof e.cast_date!="function")throw new X("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=el(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new X("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new X("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new X("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=Buffer.from(e.comment,e.encoding)),!Buffer.isBuffer(e.comment))throw new X("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new X("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);let n=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new X("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${n}`],e);if(e.delimiter=e.delimiter.map(function(r){if(r==null||r===!1)return Buffer.from(",",e.encoding);if(typeof r=="string"&&(r=Buffer.from(r,e.encoding)),!Buffer.isBuffer(r)||r.length===0)throw new X("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${n}`],e);return r}),e.escape===void 0||e.escape===!0?e.escape=Buffer.from('"',e.encoding):typeof e.escape=="string"?e.escape=Buffer.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!Buffer.isBuffer(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(t.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(t.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(t.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new X("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new X("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(Buffer.isBuffer(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new X("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=Buffer.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=Buffer.from(e.quote,e.encoding)),!Buffer.isBuffer(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||Buffer.isBuffer(e.record_delimiter)){if(e.record_delimiter.length===0)throw new X("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new X("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(r,i){if(typeof r!="string"&&!Buffer.isBuffer(r))throw new X("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${i},`,`got ${JSON.stringify(r)}`],e);if(r.length===0)throw new X("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${i},`,`got ${JSON.stringify(r)}`],e);return typeof r=="string"&&(r=Buffer.from(r,e.encoding)),r}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&t.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&t.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(t.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(t.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(t.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(t.to_line)}`);return e};var ev=function(t){return t.every(e=>e==null||e.toString&&e.toString().trim()==="")},FS=13,LS=10,di={utf8:Buffer.from([239,187,191]),utf16le:Buffer.from([255,254])},tv=function(t={}){let e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},n=Ef(t);return{info:e,original_options:t,options:n,state:Jy(n),__needMoreData:function(r,i,o){if(o)return!1;let{encoding:s,escape:a,quote:l}=this.options,{quoting:c,needMoreDataSize:u,recordDelimiterMaxLength:d}=this.state,f=i-r-1,h=Math.max(u,d===0?Buffer.from(`\r
`,s).length:d,c?(a===null?0:a.length)+l.length:0,c?l.length+d:0);return f<h},parse:function(r,i,o,s){let{bom:a,comment_no_infix:l,encoding:c,from_line:u,ltrim:d,max_record_size:f,raw:h,relax_quotes:m,rtrim:p,skip_empty_lines:g,to:v,to_line:w}=this.options,{comment:b,escape:D,quote:T,record_delimiter:C}=this.options,{bomSkipped:te,previousBuf:le,rawBuffer:we,escapeIsQuote:Qt}=this.state,W;if(le===void 0)if(r===void 0){s();return}else W=r;else le!==void 0&&r===void 0?W=le:W=Buffer.concat([le,r]);if(te===!1)if(a===!1)this.state.bomSkipped=!0;else if(W.length<3){if(i===!1){this.state.previousBuf=W;return}}else{for(let be in di)if(di[be].compare(W,0,di[be].length)===0){let yn=di[be].length;this.state.bufBytesStart+=yn,W=W.slice(yn),this.options=Ef(U(_({},this.original_options),{encoding:be})),{comment:b,escape:D,quote:T}=this.options;break}this.state.bomSkipped=!0}let me=W.length,$;for($=0;$<me&&!this.__needMoreData($,me,i);$++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),w!==-1&&this.info.lines>w){this.state.stop=!0,s();return}this.state.quoting===!1&&C.length===0&&this.__autoDiscoverRecordDelimiter(W,$)&&(C=this.options.record_delimiter);let be=W[$];if(h===!0&&we.append(be),(be===FS||be===LS)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(D!==null&&this.state.quoting===!0&&this.__isEscape(W,$,be)&&$+D.length<me)if(Qt){if(this.__isQuote(W,$+D.length)){this.state.escaping=!0,$+=D.length-1;continue}}else{this.state.escaping=!0,$+=D.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(W,$))if(this.state.quoting===!0){let Re=W[$+T.length],$n=p&&this.__isCharTrimable(W,$+T.length),Zt=b!==null&&this.__compareBytes(b,W,$+T.length,Re),jn=this.__isDelimiter(W,$+T.length,Re),os=C.length===0?this.__autoDiscoverRecordDelimiter(W,$+T.length):this.__isRecordDelimiter(Re,W,$+T.length);if(D!==null&&this.__isEscape(W,$,be)&&this.__isQuote(W,$+D.length))$+=D.length-1;else if(!Re||jn||os||Zt||$n){this.state.quoting=!1,this.state.wasQuoting=!0,$+=T.length-1;continue}else if(m===!1){let Ch=this.__error(new X("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(Re)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(Ch!==void 0)return Ch}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(T),$+=T.length-1}else if(this.state.field.length!==0){if(m===!1){let Re=this.__infoField(),$n=Object.keys(di).map(jn=>di[jn].equals(this.state.field.toString())?jn:!1).filter(Boolean)[0],Zt=this.__error(new X("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(Re.column)} at line ${Re.lines}, value is ${JSON.stringify(this.state.field.toString(c))}`,$n?`(${$n} bom)`:void 0],this.options,Re,{field:this.state.field}));if(Zt!==void 0)return Zt}}else{this.state.quoting=!0,$+=T.length-1;continue}if(this.state.quoting===!1){let Re=this.__isRecordDelimiter(be,W,$);if(Re!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=u){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),$+=Re-1;continue}if(g===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,$+=Re-1;continue}this.info.bytes=this.state.bufBytesStart+$;let jn=this.__onField();if(jn!==void 0)return jn;this.info.bytes=this.state.bufBytesStart+$+Re;let os=this.__onRecord(o);if(os!==void 0)return os;if(v!==-1&&this.info.records>=v){this.state.stop=!0,s();return}}this.state.commenting=!1,$+=Re-1;continue}if(this.state.commenting)continue;if(b!==null&&(l===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(b,W,$,be)!==0){this.state.commenting=!0;continue}let $n=this.__isDelimiter(W,$,be);if($n!==0){this.info.bytes=this.state.bufBytesStart+$;let Zt=this.__onField();if(Zt!==void 0)return Zt;$+=$n-1;continue}}}if(this.state.commenting===!1&&f!==0&&this.state.record_length+this.state.field.length>f)return this.__error(new X("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${f}`,`at line ${this.info.lines}`],this.options,this.__infoField()));let yn=d===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(W,$),_w=p===!1||this.state.wasQuoting===!1;if(yn===!0&&_w===!0)this.state.field.append(be);else{if(p===!0&&!this.__isCharTrimable(W,$))return this.__error(new X("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));yn===!1&&($+=this.__isCharTrimable(W,$)-1);continue}}if(i===!0)if(this.state.quoting===!0){let be=this.__error(new X("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(be!==void 0)return be}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+$;let be=this.__onField();if(be!==void 0)return be;let yn=this.__onRecord(o);if(yn!==void 0)return yn}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=$,this.state.previousBuf=W.slice($);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(r){let{columns:i,group_columns_by_name:o,encoding:s,info:a,from:l,relax_column_count:c,relax_column_count_less:u,relax_column_count_more:d,raw:f,skip_records_with_empty_values:h}=this.options,{enabled:m,record:p}=this.state;if(m===!1)return this.__resetRecord();let g=p.length;if(i===!0){if(h===!0&&ev(p)){this.__resetRecord();return}return this.__firstLineToColumns(p)}if(i===!1&&this.info.records===0&&(this.state.expectedRecordLength=g),g!==this.state.expectedRecordLength){let v=i===!1?new X("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${g} on line ${this.info.lines}`],this.options,this.__infoField(),{record:p}):new X("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${i.length},`,`got ${g} on line ${this.info.lines}`],this.options,this.__infoField(),{record:p});if(c===!0||u===!0&&g<this.state.expectedRecordLength||d===!0&&g>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=v;else{let w=this.__error(v);if(w)return w}}if(h===!0&&ev(p)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,l===1||this.info.records>=l){let{objname:v}=this.options;if(i!==!1){let w={};for(let b=0,D=p.length;b<D;b++)i[b]===void 0||i[b].disabled||(o===!0&&w[i[b].name]!==void 0?Array.isArray(w[i[b].name])?w[i[b].name]=w[i[b].name].concat(p[b]):w[i[b].name]=[w[i[b].name],p[b]]:w[i[b].name]=p[b]);if(f===!0||a===!0){let b=Object.assign({record:w},f===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),D=this.__push(v===void 0?b:[w[v],b],r);if(D)return D}else{let b=this.__push(v===void 0?w:[w[v],w],r);if(b)return b}}else if(f===!0||a===!0){let w=Object.assign({record:p},f===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),b=this.__push(v===void 0?w:[p[v],w],r);if(b)return b}else{let w=this.__push(v===void 0?p:[p[v],p],r);if(w)return w}}this.__resetRecord()},__firstLineToColumns:function(r){let{firstLineToHeaders:i}=this.state;try{let o=i===void 0?r:i.call(null,r);if(!Array.isArray(o))return this.__error(new X("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(o)}`],this.options,this.__infoField(),{headers:o}));let s=el(o);this.state.expectedRecordLength=s.length,this.options.columns=s,this.__resetRecord();return}catch(o){return o}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){let{cast:r,encoding:i,rtrim:o,max_record_size:s}=this.options,{enabled:a,wasQuoting:l}=this.state;if(a===!1)return this.__resetField();let c=this.state.field.toString(i);if(o===!0&&l===!1&&(c=c.trimRight()),r===!0){let[u,d]=this.__cast(c);if(u!==void 0)return u;c=d}this.state.record.push(c),s!==0&&typeof c=="string"&&(this.state.record_length+=c.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(r,i){let{on_record:o}=this.options;if(o!==void 0){let s=this.__infoRecord();try{r=o.call(null,r,s)}catch(a){return a}if(r==null)return}i(r)},__cast:function(r){let{columns:i,relax_column_count:o}=this.options;if(Array.isArray(i)===!0&&o&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{let a=this.__infoField();return[void 0,this.state.castField.call(null,r,a)]}catch(a){return[a]}if(this.__isFloat(r))return[void 0,parseFloat(r)];if(this.options.cast_date!==!1){let a=this.__infoField();return[void 0,this.options.cast_date.call(null,r,a)]}return[void 0,r]},__isCharTrimable:function(r,i){return((s,a)=>{let{timchars:l}=this.state;e:for(let c=0;c<l.length;c++){let u=l[c];for(let d=0;d<u.length;d++)if(u[d]!==s[a+d])continue e;return u.length}return 0})(r,i)},__isFloat:function(r){return r-parseFloat(r)+1>=0},__compareBytes:function(r,i,o,s){if(r[0]!==s)return 0;let a=r.length;for(let l=1;l<a;l++)if(r[l]!==i[o+l])return 0;return a},__isDelimiter:function(r,i,o){let{delimiter:s,ignore_last_delimiters:a}=this.options;if(a===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(a!==!1&&typeof a=="number"&&this.state.record.length===a-1)return 0;e:for(let l=0;l<s.length;l++){let c=s[l];if(c[0]===o){for(let u=1;u<c.length;u++)if(c[u]!==r[i+u])continue e;return c.length}}return 0},__isRecordDelimiter:function(r,i,o){let{record_delimiter:s}=this.options,a=s.length;e:for(let l=0;l<a;l++){let c=s[l],u=c.length;if(c[0]===r){for(let d=1;d<u;d++)if(c[d]!==i[o+d])continue e;return c.length}}return 0},__isEscape:function(r,i,o){let{escape:s}=this.options;if(s===null)return!1;let a=s.length;if(s[0]===o){for(let l=0;l<a;l++)if(s[l]!==r[i+l])return!1;return!0}return!1},__isQuote:function(r,i){let{quote:o}=this.options;if(o===null)return!1;let s=o.length;for(let a=0;a<s;a++)if(o[a]!==r[i+a])return!1;return!0},__autoDiscoverRecordDelimiter:function(r,i){let{encoding:o}=this.options,s=[Buffer.from(`\r
`,o),Buffer.from(`
`,o),Buffer.from("\r",o)];e:for(let a=0;a<s.length;a++){let l=s[a].length;for(let c=0;c<l;c++)if(s[a][c]!==r[i+c])continue e;return this.options.record_delimiter.push(s[a]),this.state.recordDelimiterMaxLength=s[a].length,s[a].length}return 0},__error:function(r){let{encoding:i,raw:o,skip_records_with_error:s}=this.options,a=typeof r=="string"?new Error(r):r;if(s){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(a,o?this.state.rawBuffer.toString(i):void 0);return}else return a},__infoDataSet:function(){return U(_({},this.info),{columns:this.options.columns})},__infoRecord:function(){let{columns:r,raw:i,encoding:o}=this.options;return U(_({},this.__infoDataSet()),{error:this.state.error,header:r===!0,index:this.state.record.length,raw:i?this.state.rawBuffer.toString(o):void 0})},__infoField:function(){let{columns:r}=this.options,i=Array.isArray(r);return U(_({},this.__infoRecord()),{column:i===!0?r.length>this.state.record.length?r[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting})}}};var nv=function(t,e={}){typeof t=="string"&&(t=Buffer.from(t));let n=e&&e.objname?{}:[],r=tv(e),i=l=>{r.options.objname===void 0?n.push(l):n[l[0]]=l[1]},o=()=>{},s=r.parse(t,!1,i,o);if(s!==void 0)throw s;let a=r.parse(void 0,!0,i,o);if(a!==void 0)throw a;return n};function tl(t,e){if(!e.match(/^G?[0-9]{9}$/))throw new Error("MMSI number should have exactly 9 digits");if(t.length>16)throw new Error("Name must not be more than 16 characters")}var Et=16,xn=class{constructor(e,n){this.name=e,this.number=n}validate(){return tl(this.name,this.number)}fillConfig(e,n,r){tl(this.name,this.number);let i=r*Et,o=e.subarray(i,i+Et);dn(o,this.name);let s=It(r);To(this.number+"0",n.subarray(s)),r%3==2&&(n[s+5]=255)}};function It(t){return t*5+(t-t%3)/3}function rv(t,e){let n=un(t.subarray(0,Et)),r=Ut(e.subarray(0,5)).slice(0,9);try{return tl(n,r),new xn(n,r)}catch{return}}var On=class{constructor(e,n){this.maxIndividualMmsis=e,this.maxGroupMmsis=n,this.individualMmsis=[],this.groupMmsis=[]}sort(){this.sortIndividual(),this.sortGroup()}sortIndividual(){this.individualMmsis.sort((e,n)=>e.name.localeCompare(n.name))}sortGroup(){this.groupMmsis.sort((e,n)=>e.name.localeCompare(n.name))}toCsv(){let e=`name,mmsi
`;this.sort();for(let n of this.individualMmsis){n.validate();let r=/,/.test(n.name)?`"${n.name.replace('"','""')}"`:n.name;e+=`${n.name},${n.number}
`}for(let n of this.groupMmsis){n.validate();let r=/,/.test(n.name)?`"${n.name.replace('"','""')}"`:n.name;e+=`${n.name},G${n.number}
`}return e}initFromCsv(e){let n=[],r=[],i=nv(e,{skip_empty_lines:!0,columns:!0});for(let o of i){let s=o.name,a=o.mmsi;if(tl(s,a),a[0]=="G"){let l=new xn(s,a.slice(1));r.push(l)}else{let l=new xn(s,a);n.push(l)}}if(n.length>this.maxIndividualMmsis)throw new Error("Too many MMSIs");if(r.length>this.maxGroupMmsis)throw new Error("Too many group MMSIs");this.individualMmsis=n,this.groupMmsis=r}fillConfig(e,n,r,i){this.fillIndividualConfig(e,n),this.fillGroupConfig(r,i)}fillIndividualConfig(e,n){if(this.sortIndividual(),this.individualMmsis.length>this.maxIndividualMmsis)throw new Error("Too many MMSIs");e.fill(255),n.fill(255);for(let[r,i]of this.individualMmsis.entries())i.fillConfig(e,n,r)}fillGroupConfig(e,n){if(this.sortGroup(),this.groupMmsis.length>this.maxGroupMmsis)throw new Error("Too many group MMSIs");e.fill(255),n.fill(255);for(let[r,i]of this.groupMmsis.entries())i.fillConfig(e,n,r)}initFromConfig(e,n,r,i){let o=[],s=[];for(let a=0;a<this.maxIndividualMmsis;a++){let l=rv(e.subarray(a*16,(a+1)*16),n.subarray(It(a)));l&&o.push(l)}for(let a=0;a<this.maxGroupMmsis;a++){let l=rv(r.subarray(a*16,(a+1)*16),i.subarray(It(a)));l&&s.push(l)}this.individualMmsis=o,this.groupMmsis=s}};var nl=64;function rl(t,e){return N(this,null,function*(){let n,r=new Promise((i,o)=>{n=setTimeout(()=>o(new Error("Timeout")),e)});return Promise.race([t,r]).then(i=>(clearTimeout(n),i))})}var fi=class{constructor(e){this.dev=e}supportsMessaging(){return!0}sendMessage(e,n,r){return N(this,null,function*(){let i=new Ao({type:e,args:n}).toString();r?yield rl(this.dev.write(i),r):yield this.dev.write(i),console.log(`Wrote command ${JSON.stringify(i)}`)})}receiveMessage(e){return N(this,null,function*(){let n;return e?n=yield rl(this.dev.readline(),e):n=yield this.dev.readline(),console.log(`Received line ${n}`),new Ao({encoded:n})})}waitForReady_(){return N(this,null,function*(){let e="";for(;e!="00";){if(this.dev.flushInput(),yield this.sendMessage("#CEPSR",["00"]),(yield this.receiveMessage()).type!="#CMDOK")throw new Error("Device did not acknowledge status request");let r=yield this.receiveMessage();if(r.type!="#CEPSD")throw new Error("Device did not return status");e=r.args[0],e!="00"&&console.log(`Waiting for radio, state=${e}`),this.sendMessage("#CMDOK")}})}waitForReady(){return N(this,null,function*(){yield rl(this.waitForReady_(),1e3)})}readConfigMemoryChunk(e,n){return N(this,null,function*(){if(yield this.waitForReady(),yield this.sendMessage("#CEPRD",[tt(e,4),tt(n,2)]),(yield this.receiveMessage()).type!="#CMDOK")throw new Error("Device did not acknowledge read");let i=yield this.receiveMessage();if(i.type!="#CEPDT")throw new Error("Device did not reply with data");return this.sendMessage("#CMDOK"),za(i.args[2])})}writeConfigMemoryChunk(e,n){return N(this,null,function*(){yield this.waitForReady();let r=Ut(n);if(yield this.sendMessage("#CEPWR",[tt(e,4),tt(n.length,2),r]),(yield this.receiveMessage()).type!="#CMDOK")throw new Error("Device did not acknowledge write")})}readConfigMemory(e,n,r){return N(this,null,function*(){let i=new Uint8Array(n);for(let o=0;o<n;o+=nl)i.set(yield this.readConfigMemoryChunk(e+o,Math.min(n-o,nl)),o),r(o);return i})}writeConfigMemory(e,n,r){return N(this,null,function*(){for(let i=0;i<e.length;i+=nl)yield this.writeConfigMemoryChunk(n+i,e.subarray(i,Math.min(i+nl,e.length))),r(i)})}waitForGps_(){return N(this,null,function*(){for(;;){this.dev.flushInput(),this.sendMessage("$PMTK",["000"]);let e=yield this.receiveMessage();if(e.type=="$PMTK"&&e.args.length==3&&e.args[0]=="001"&&e.args[1]=="0"&&e.args[2]=="3")return}})}waitForGps(){return N(this,null,function*(){yield rl(this.waitForGps_(),1e3)})}},hi=class{constructor(e){this.datImage=e}supportsMessaging(){return!1}sendMessage(e,n,r){throw new Error("sendMessage is unavailable on DatConfigProtocol.")}receiveMessage(e){throw new Error("sendMessage is unavailable on DatConfigProtocol.")}waitForReady(){return N(this,null,function*(){})}waitForGps(){return N(this,null,function*(){})}readConfigMemory(e,n,r){return N(this,null,function*(){return r(n),this.datImage.slice(e,e+n)})}writeConfigMemory(e,n,r){return N(this,null,function*(){r(e.length),this.datImage.subarray(n).set(e)})}};var il=class{constructor(e){this.configProtocol=e,this.ranges=new Map}addRange(e,n,r){this.ranges.set(e,{start:n,end:r})}reset(){this.ranges.clear()}read(e){return N(this,null,function*(){let n=new Map,r=0,i=0;this.ranges.forEach(o=>{i+=o.end-o.start});for(let[o,s]of this.ranges.entries())n.set(o,yield this.configProtocol.readConfigMemory(s.start,s.end-s.start,a=>{e((a+r)/i)})),r+=s.end-s.start;return n})}};var ol=Symbol.for("yaml.alias"),sl=Symbol.for("yaml.document"),St=Symbol.for("yaml.map"),If=Symbol.for("yaml.pair"),dt=Symbol.for("yaml.scalar"),fn=Symbol.for("yaml.seq"),qe=Symbol.for("yaml.node.type"),Mt=t=>!!t&&typeof t=="object"&&t[qe]===ol,hn=t=>!!t&&typeof t=="object"&&t[qe]===sl,At=t=>!!t&&typeof t=="object"&&t[qe]===St,Q=t=>!!t&&typeof t=="object"&&t[qe]===If,H=t=>!!t&&typeof t=="object"&&t[qe]===dt,Tt=t=>!!t&&typeof t=="object"&&t[qe]===fn;function re(t){if(t&&typeof t=="object")switch(t[qe]){case St:case fn:return!0}return!1}function ee(t){if(t&&typeof t=="object")switch(t[qe]){case ol:case St:case dt:case fn:return!0}return!1}var iv=t=>(H(t)||re(t))&&!!t.anchor;var Ye=Symbol("break visit"),ov=Symbol("skip children"),Gt=Symbol("remove node");function Ke(t,e){let n=sv(e);hn(t)?pi(null,t.contents,n,Object.freeze([t]))===Gt&&(t.contents=null):pi(null,t,n,Object.freeze([]))}Ke.BREAK=Ye;Ke.SKIP=ov;Ke.REMOVE=Gt;function pi(t,e,n,r){let i=av(t,e,n,r);if(ee(i)||Q(i))return lv(t,r,i),pi(t,i,n,r);if(typeof i!="symbol"){if(re(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){let s=pi(o,e.items[o],n,r);if(typeof s=="number")o=s-1;else{if(s===Ye)return Ye;s===Gt&&(e.items.splice(o,1),o-=1)}}}else if(Q(e)){r=Object.freeze(r.concat(e));let o=pi("key",e.key,n,r);if(o===Ye)return Ye;o===Gt&&(e.key=null);let s=pi("value",e.value,n,r);if(s===Ye)return Ye;s===Gt&&(e.value=null)}}return i}function al(t,e){return N(this,null,function*(){let n=sv(e);hn(t)?(yield mi(null,t.contents,n,Object.freeze([t])))===Gt&&(t.contents=null):yield mi(null,t,n,Object.freeze([]))})}al.BREAK=Ye;al.SKIP=ov;al.REMOVE=Gt;function mi(t,e,n,r){return N(this,null,function*(){let i=yield av(t,e,n,r);if(ee(i)||Q(i))return lv(t,r,i),mi(t,i,n,r);if(typeof i!="symbol"){if(re(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){let s=yield mi(o,e.items[o],n,r);if(typeof s=="number")o=s-1;else{if(s===Ye)return Ye;s===Gt&&(e.items.splice(o,1),o-=1)}}}else if(Q(e)){r=Object.freeze(r.concat(e));let o=yield mi("key",e.key,n,r);if(o===Ye)return Ye;o===Gt&&(e.key=null);let s=yield mi("value",e.value,n,r);if(s===Ye)return Ye;s===Gt&&(e.value=null)}}return i})}function sv(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function av(t,e,n,r){if(typeof n=="function")return n(t,e,r);if(At(e))return n.Map?.(t,e,r);if(Tt(e))return n.Seq?.(t,e,r);if(Q(e))return n.Pair?.(t,e,r);if(H(e))return n.Scalar?.(t,e,r);if(Mt(e))return n.Alias?.(t,e,r)}function lv(t,e,n){let r=e[e.length-1];if(re(r))r.items[t]=n;else if(Q(r))t==="key"?r.key=n:r.value=n;else if(hn(r))r.contents=n;else{let i=Mt(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}var VS={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},$S=t=>t.replace(/[!,[\]{}]/g,e=>VS[e]),gi=(()=>{class t{constructor(n,r){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},t.defaultYaml,n),this.tags=Object.assign({},t.defaultTags,r)}clone(){let n=new t(this.yaml,this.tags);return n.docStart=this.docStart,n}atDocument(){let n=new t(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:t.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},t.defaultTags);break}return n}add(n,r){this.atNextDocument&&(this.yaml={explicit:t.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},t.defaultTags),this.atNextDocument=!1);let i=n.trim().split(/[ \t]+/),o=i.shift();switch(o){case"%TAG":{if(i.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),i.length<2))return!1;let[s,a]=i;return this.tags[s]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,i.length!==1)return r(0,"%YAML directive should contain exactly one part"),!1;let[s]=i;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{let a=/^\d+\.\d+$/.test(s);return r(6,`Unsupported YAML version ${s}`,a),!1}}default:return r(0,`Unknown directive ${o}`,!0),!1}}tagName(n,r){if(n==="!")return"!";if(n[0]!=="!")return r(`Not a valid tag: ${n}`),null;if(n[1]==="<"){let a=n.slice(2,-1);return a==="!"||a==="!!"?(r(`Verbatim tags aren't resolved, so ${n} is invalid.`),null):(n[n.length-1]!==">"&&r("Verbatim tags must end with a >"),a)}let[,i,o]=n.match(/^(.*!)([^!]*)$/s);o||r(`The ${n} tag has no suffix`);let s=this.tags[i];if(s)try{return s+decodeURIComponent(o)}catch(a){return r(String(a)),null}return i==="!"?n:(r(`Could not resolve tag: ${n}`),null)}tagString(n){for(let[r,i]of Object.entries(this.tags))if(n.startsWith(i))return r+$S(n.substring(i.length));return n[0]==="!"?n:`!<${n}>`}toString(n){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags),o;if(n&&i.length>0&&ee(n.contents)){let s={};Ke(n.contents,(a,l)=>{ee(l)&&l.tag&&(s[l.tag]=!0)}),o=Object.keys(s)}else o=[];for(let[s,a]of i)s==="!!"&&a==="tag:yaml.org,2002:"||(!n||o.some(l=>l.startsWith(a)))&&r.push(`%TAG ${s} ${a}`);return r.join(`
`)}}return t.defaultYaml={explicit:!1,version:"1.2"},t.defaultTags={"!!":"tag:yaml.org,2002:"},t})();function ll(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Sf(t){let e=new Set;return Ke(t,{Value(n,r){r.anchor&&e.add(r.anchor)}}),e}function Mf(t,e){for(let n=1;;++n){let r=`${t}${n}`;if(!e.has(r))return r}}function cv(t,e){let n=[],r=new Map,i=null;return{onAnchor:o=>{n.push(o),i||(i=Sf(t));let s=Mf(e,i);return i.add(s),s},setAnchors:()=>{for(let o of n){let s=r.get(o);if(typeof s=="object"&&s.anchor&&(H(s.node)||re(s.node)))s.node.anchor=s.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:r}}function kn(t,e,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,o=r.length;i<o;++i){let s=r[i],a=kn(t,r,String(i),s);a===void 0?delete r[i]:a!==s&&(r[i]=a)}else if(r instanceof Map)for(let i of Array.from(r.keys())){let o=r.get(i),s=kn(t,r,i,o);s===void 0?r.delete(i):s!==o&&r.set(i,s)}else if(r instanceof Set)for(let i of Array.from(r)){let o=kn(t,r,i,i);o===void 0?r.delete(i):o!==i&&(r.delete(i),r.add(o))}else for(let[i,o]of Object.entries(r)){let s=kn(t,r,i,o);s===void 0?delete r[i]:s!==o&&(r[i]=s)}return t.call(e,n,r)}function Me(t,e,n){if(Array.isArray(t))return t.map((r,i)=>Me(r,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!iv(t))return t.toJSON(e,n);let r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=o=>{r.res=o,delete n.onCreate};let i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!n?.keep?Number(t):t}var Rn=class{constructor(e){Object.defineProperty(this,qe,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){if(!hn(e))throw new TypeError("A document argument is required");let s={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=Me(this,"",s);if(typeof i=="function")for(let{count:l,res:c}of s.anchors.values())i(c,l);return typeof o=="function"?kn(o,{"":a},"",a):a}};var pn=class extends Rn{constructor(e){super(ol),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return Ke(e,{Node:(r,i)=>{if(i===this)return Ke.BREAK;i.anchor===this.source&&(n=i)}}),n}toJSON(e,n){if(!n)return{source:this.source};let{anchors:r,doc:i,maxAliasCount:o}=n,s=this.resolve(i);if(!s){let l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(s);if(a||(Me(s,null,n),a=r.get(s)),!a||a.res===void 0){let l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=cl(i,s,r)),a.count*a.aliasCount>o)){let l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,r){let i=`*${this.source}`;if(e){if(ll(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}};function cl(t,e,n){if(Mt(e)){let r=e.resolve(t),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(re(e)){let r=0;for(let i of e.items){let o=cl(t,i,n);o>r&&(r=o)}return r}else if(Q(e)){let r=cl(t,e.key,n),i=cl(t,e.value,n);return Math.max(r,i)}return 1}var ul=t=>!t||typeof t!="function"&&typeof t!="object",S=(()=>{class t extends Rn{constructor(n){super(dt),this.value=n}toJSON(n,r){return r?.keep?this.value:Me(this.value,n,r)}toString(){return String(this.value)}}return t.BLOCK_FOLDED="BLOCK_FOLDED",t.BLOCK_LITERAL="BLOCK_LITERAL",t.PLAIN="PLAIN",t.QUOTE_DOUBLE="QUOTE_DOUBLE",t.QUOTE_SINGLE="QUOTE_SINGLE",t})();var jS="tag:yaml.org,2002:";function BS(t,e,n){if(e){let r=n.filter(o=>o.tag===e),i=r.find(o=>!o.format)??r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(r=>r.identify?.(t)&&!r.format)}function mn(t,e,n){if(hn(t)&&(t=t.contents),ee(t))return t;if(Q(t)){let d=n.schema[St].createNode?.(n.schema,null,n);return d.items.push(t),d}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:r,onAnchor:i,onTagObj:o,schema:s,sourceObjects:a}=n,l;if(r&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor||(l.anchor=i(t)),new pn(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=jS+e.slice(2));let c=BS(t,e,s.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let d=new S(t);return l&&(l.node=d),d}c=t instanceof Map?s[St]:Symbol.iterator in Object(t)?s[fn]:s[St]}o&&(o(c),delete n.onTagObj);let u=c?.createNode?c.createNode(n.schema,t,n):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(n.schema,t,n):new S(t);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}function Oo(t,e,n){let r=n;for(let i=e.length-1;i>=0;--i){let o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){let s=[];s[o]=r,r=s}else r=new Map([[o,r]])}return mn(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var yi=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,dl=(()=>{class t extends Rn{constructor(n,r){super(n),Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(n){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return n&&(r.schema=n),r.items=r.items.map(i=>ee(i)||Q(i)?i.clone(n):i),this.range&&(r.range=this.range.slice()),r}addIn(n,r){if(yi(n))this.add(r);else{let[i,...o]=n,s=this.get(i,!0);if(re(s))s.addIn(o,r);else if(s===void 0&&this.schema)this.set(i,Oo(this.schema,o,r));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${o}`)}}deleteIn(n){let[r,...i]=n;if(i.length===0)return this.delete(r);let o=this.get(r,!0);if(re(o))return o.deleteIn(i);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}getIn(n,r){let[i,...o]=n,s=this.get(i,!0);return o.length===0?!r&&H(s)?s.value:s:re(s)?s.getIn(o,r):void 0}hasAllNullValues(n){return this.items.every(r=>{if(!Q(r))return!1;let i=r.value;return i==null||n&&H(i)&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}hasIn(n){let[r,...i]=n;if(i.length===0)return this.has(r);let o=this.get(r,!0);return re(o)?o.hasIn(i):!1}setIn(n,r){let[i,...o]=n;if(o.length===0)this.set(i,r);else{let s=this.get(i,!0);if(re(s))s.setIn(o,r);else if(s===void 0&&this.schema)this.set(i,Oo(this.schema,o,r));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${o}`)}}}return t.maxFlowStringSingleLineLength=60,t})();var uv=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function ft(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}var qt=(t,e,n)=>t.endsWith(`
`)?ft(n,e):n.includes(`
`)?`
`+ft(n,e):(t.endsWith(" ")?"":" ")+n;var Af="flow",fl="block",ko="quoted";function Ro(t,e,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;let l=Math.max(1+o,1+i-e.length);if(t.length<=l)return t;let c=[],u={},d=i-e.length;typeof r=="number"&&(r>i-Math.max(2,o)?c.push(0):d=i-r);let f,h,m=!1,p=-1,g=-1,v=-1;n===fl&&(p=dv(t,p,e.length),p!==-1&&(d=p+l));for(let b;b=t[p+=1];){if(n===ko&&b==="\\"){switch(g=p,t[p+1]){case"x":p+=3;break;case"u":p+=5;break;case"U":p+=9;break;default:p+=1}v=p}if(b===`
`)n===fl&&(p=dv(t,p,e.length)),d=p+e.length+l,f=void 0;else{if(b===" "&&h&&h!==" "&&h!==`
`&&h!=="	"){let D=t[p+1];D&&D!==" "&&D!==`
`&&D!=="	"&&(f=p)}if(p>=d)if(f)c.push(f),d=f+l,f=void 0;else if(n===ko){for(;h===" "||h==="	";)h=b,b=t[p+=1],m=!0;let D=p>v+1?p-2:g-1;if(u[D])return t;c.push(D),u[D]=!0,d=D+l,f=void 0}else m=!0}h=b}if(m&&a&&a(),c.length===0)return t;s&&s();let w=t.slice(0,c[0]);for(let b=0;b<c.length;++b){let D=c[b],T=c[b+1]||t.length;D===0?w=`
${e}${t.slice(0,T)}`:(n===ko&&u[D]&&(w+=`${t[D]}\\`),w+=`
${e}${t.slice(D+1,T)}`)}return w}function dv(t,e,n){let r=e,i=e+1,o=t[i];for(;o===" "||o==="	";)if(e<i+n)o=t[++e];else{do o=t[++e];while(o&&o!==`
`);r=e,i=e+1,o=t[i]}return r}var pl=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),ml=t=>/^(%|---|\.\.\.)/m.test(t);function US(t,e,n){if(!e||e<0)return!1;let r=e-n,i=t.length;if(i<=r)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>r)return!0;if(s=o+1,i-s<=r)return!1}return!0}function Po(t,e){let n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;let{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(ml(t)?"  ":""),s="",a=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(s+=n.slice(a,l)+"\\ ",l+=1,a=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{s+=n.slice(a,l);let u=n.substr(l+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(s+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)s+=`
`,l+=2;s+=o,n[l+2]===" "&&(s+="\\"),l+=1,a=l+1}break;default:l+=1}return s=a?s+n.slice(a):n,r?s:Ro(s,o,ko,pl(e,!1))}function Tf(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Po(t,e);let n=e.indent||(ml(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:Ro(r,n,Af,pl(e,!1))}function vi(t,e){let{singleQuote:n}=e.options,r;if(n===!1)r=Po;else{let i=t.includes('"'),o=t.includes("'");i&&!o?r=Tf:o&&!i?r=Po:r=n?Tf:Po}return r(t,e)}var Nf;try{Nf=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Nf=/\n+(?!\n|$)/g}function hl({comment:t,type:e,value:n},r,i,o){let{blockQuote:s,commentString:a,lineWidth:l}=r.options;if(!s||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return vi(n,r);let c=r.indent||(r.forceBlockIndent||ml(n)?"  ":""),u=s==="literal"?!0:s==="folded"||e===S.BLOCK_FOLDED?!1:e===S.BLOCK_LITERAL?!0:!US(n,l,c.length);if(!n)return u?`|
`:`>
`;let d,f;for(f=n.length;f>0;--f){let C=n[f-1];if(C!==`
`&&C!=="	"&&C!==" ")break}let h=n.substring(f),m=h.indexOf(`
`);m===-1?d="-":n===h||m!==h.length-1?(d="+",o&&o()):d="",h&&(n=n.slice(0,-h.length),h[h.length-1]===`
`&&(h=h.slice(0,-1)),h=h.replace(Nf,`$&${c}`));let p=!1,g,v=-1;for(g=0;g<n.length;++g){let C=n[g];if(C===" ")p=!0;else if(C===`
`)v=g;else break}let w=n.substring(0,v<g?v+1:g);w&&(n=n.substring(w.length),w=w.replace(/\n+/g,`$&${c}`));let D=(u?"|":">")+(p?c?"2":"1":"")+d;if(t&&(D+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),u)return n=n.replace(/\n+/g,`$&${c}`),`${D}
${c}${w}${n}${h}`;n=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let T=Ro(`${w}${n}${h}`,c,fl,pl(r,!0));return`${D}
${c}${T}`}function HS(t,e,n,r){let{type:i,value:o}=t,{actualString:s,implicitKey:a,indent:l,indentStep:c,inFlow:u}=e;if(a&&o.includes(`
`)||u&&/[[\]{},]/.test(o))return vi(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return a||u||!o.includes(`
`)?vi(o,e):hl(t,e,n,r);if(!a&&!u&&i!==S.PLAIN&&o.includes(`
`))return hl(t,e,n,r);if(ml(o)){if(l==="")return e.forceBlockIndent=!0,hl(t,e,n,r);if(a&&l===c)return vi(o,e)}let d=o.replace(/\n+/g,`$&
${l}`);if(s){let f=p=>p.default&&p.tag!=="tag:yaml.org,2002:str"&&p.test?.test(d),{compat:h,tags:m}=e.doc.schema;if(m.some(f)||h?.some(f))return vi(o,e)}return a?d:Ro(d,l,Af,pl(e,!1))}function vr(t,e,n,r){let{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==S.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=S.QUOTE_DOUBLE);let l=u=>{switch(u){case S.BLOCK_FOLDED:case S.BLOCK_LITERAL:return i||o?vi(s.value,e):hl(s,e,n,r);case S.QUOTE_DOUBLE:return Po(s.value,e);case S.QUOTE_SINGLE:return Tf(s.value,e);case S.PLAIN:return HS(s,e,n,r);default:return null}},c=l(a);if(c===null){let{defaultKeyType:u,defaultStringType:d}=e.options,f=i&&u||d;if(c=l(f),c===null)throw new Error(`Unsupported default string type ${f}`)}return c}function gl(t,e){let n=Object.assign({blockQuote:!0,commentString:uv,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e),r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function GS(t,e){if(e.tag){let i=t.filter(o=>o.tag===e.tag);if(i.length>0)return i.find(o=>o.format===e.format)??i[0]}let n,r;if(H(e)){r=e.value;let i=t.filter(o=>o.identify?.(r));n=i.find(o=>o.format===e.format)??i.find(o=>!o.format)}else r=e,n=t.find(i=>i.nodeClass&&r instanceof i.nodeClass);if(!n){let i=r?.constructor?.name??typeof r;throw new Error(`Tag not resolved for ${i} value`)}return n}function qS(t,e,{anchors:n,doc:r}){if(!r.directives)return"";let i=[],o=(H(t)||re(t))&&t.anchor;o&&ll(o)&&(n.add(o),i.push(`&${o}`));let s=t.tag?t.tag:e.default?null:e.tag;return s&&i.push(r.directives.tagString(s)),i.join(" ")}function gn(t,e,n,r){if(Q(t))return t.toString(e,n,r);if(Mt(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i,o=ee(t)?t:e.doc.createNode(t,{onTagObj:l=>i=l});i||(i=GS(e.doc.schema.tags,o));let s=qS(o,i,e);s.length>0&&(e.indentAtStart=(e.indentAtStart??0)+s.length+1);let a=typeof i.stringify=="function"?i.stringify(o,e,n,r):H(o)?vr(o,e,n,r):o.toString(e,n,r);return s?H(o)||a[0]==="{"||a[0]==="["?`${s} ${a}`:`${s}
${e.indent}${a}`:a}function fv({key:t,value:e},n,r,i){let{allNullValues:o,doc:s,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:d}}=n,f=ee(t)&&t.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(re(t)){let te="With simple keys, collection cannot be used as a key value";throw new Error(te)}}let h=!d&&(!t||f&&e==null&&!n.inFlow||re(t)||(H(t)?t.type===S.BLOCK_FOLDED||t.type===S.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!h&&(d||!o),indent:a+l});let m=!1,p=!1,g=gn(t,n,()=>m=!0,()=>p=!0);if(!h&&!n.inFlow&&g.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(n.inFlow){if(o||e==null)return m&&r&&r(),g===""?"?":h?`? ${g}`:g}else if(o&&!d||e==null&&h)return g=`? ${g}`,f&&!m?g+=qt(g,n.indent,c(f)):p&&i&&i(),g;m&&(f=null),h?(f&&(g+=qt(g,n.indent,c(f))),g=`? ${g}
${a}:`):(g=`${g}:`,f&&(g+=qt(g,n.indent,c(f))));let v,w,b;ee(e)?(v=!!e.spaceBefore,w=e.commentBefore,b=e.comment):(v=!1,w=null,b=null,e&&typeof e=="object"&&(e=s.createNode(e))),n.implicitKey=!1,!h&&!f&&H(e)&&(n.indentAtStart=g.length+1),p=!1,!u&&l.length>=2&&!n.inFlow&&!h&&Tt(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let D=!1,T=gn(e,n,()=>D=!0,()=>p=!0),C=" ";if(f||v||w){if(C=v?`
`:"",w){let te=c(w);C+=`
${ft(te,n.indent)}`}T===""&&!n.inFlow?C===`
`&&(C=`

`):C+=`
${n.indent}`}else if(!h&&re(e)){let te=T[0],le=T.indexOf(`
`),we=le!==-1,Qt=n.inFlow??e.flow??e.items.length===0;if(we||!Qt){let W=!1;if(we&&(te==="&"||te==="!")){let me=T.indexOf(" ");te==="&"&&me!==-1&&me<le&&T[me+1]==="!"&&(me=T.indexOf(" ",me+1)),(me===-1||le<me)&&(W=!0)}W||(C=`
${n.indent}`)}}else(T===""||T[0]===`
`)&&(C="");return g+=C+T,n.inFlow?D&&r&&r():b&&!D?g+=qt(g,n.indent,c(b)):p&&i&&i(),g}function xf(t,e){(t==="debug"||t==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}var hv="<<";function yl(t,e,{key:n,value:r}){if(t?.doc.schema.merge&&zS(n))if(r=Mt(r)?r.resolve(t.doc):r,Tt(r))for(let i of r.items)Of(t,e,i);else if(Array.isArray(r))for(let i of r)Of(t,e,i);else Of(t,e,r);else{let i=Me(n,"",t);if(e instanceof Map)e.set(i,Me(r,i,t));else if(e instanceof Set)e.add(i);else{let o=WS(n,i,t),s=Me(r,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}var zS=t=>t===hv||H(t)&&t.value===hv&&(!t.type||t.type===S.PLAIN);function Of(t,e,n){let r=t&&Mt(n)?n.resolve(t.doc):n;if(!At(r))throw new Error("Merge sources must be maps or map aliases");let i=r.toJSON(null,t,Map);for(let[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function WS(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(ee(t)&&n?.doc){let r=gl(n.doc,{});r.anchors=new Set;for(let o of n.anchors.keys())r.anchors.add(o.anchor);r.inFlow=!0,r.inStringifyKey=!0;let i=t.toString(r);if(!n.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),xf(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function wi(t,e,n){let r=mn(t,void 0,n),i=mn(e,void 0,n);return new ye(r,i)}var ye=class t{constructor(e,n=null){Object.defineProperty(this,qe,{value:If}),this.key=e,this.value=n}clone(e){let{key:n,value:r}=this;return ee(n)&&(n=n.clone(e)),ee(r)&&(r=r.clone(e)),new t(n,r)}toJSON(e,n){let r=n?.mapAsMap?new Map:{};return yl(n,r,this)}toString(e,n,r){return e?.doc?fv(this,e,n,r):JSON.stringify(this)}};function wl(t,e,n){return(e.inFlow??t.flow?KS:YS)(t,e,n)}function YS({comment:t,items:e},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:s,onComment:a}){let{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:o,type:null}),d=!1,f=[];for(let m=0;m<e.length;++m){let p=e[m],g=null;if(ee(p))!d&&p.spaceBefore&&f.push(""),vl(n,f,p.commentBefore,d),p.comment&&(g=p.comment);else if(Q(p)){let w=ee(p.key)?p.key:null;w&&(!d&&w.spaceBefore&&f.push(""),vl(n,f,w.commentBefore,d))}d=!1;let v=gn(p,u,()=>g=null,()=>d=!0);g&&(v+=qt(v,o,c(g))),d&&g&&(d=!1),f.push(r+v)}let h;if(f.length===0)h=i.start+i.end;else{h=f[0];for(let m=1;m<f.length;++m){let p=f[m];h+=p?`
${l}${p}`:`
`}}return t?(h+=`
`+ft(c(t),l),a&&a()):d&&s&&s(),h}function KS({items:t},e,{flowChars:n,itemIndent:r}){let{indent:i,indentStep:o,flowCollectionPadding:s,options:{commentString:a}}=e;r+=o;let l=Object.assign({},e,{indent:r,inFlow:!0,type:null}),c=!1,u=0,d=[];for(let m=0;m<t.length;++m){let p=t[m],g=null;if(ee(p))p.spaceBefore&&d.push(""),vl(e,d,p.commentBefore,!1),p.comment&&(g=p.comment);else if(Q(p)){let w=ee(p.key)?p.key:null;w&&(w.spaceBefore&&d.push(""),vl(e,d,w.commentBefore,!1),w.comment&&(c=!0));let b=ee(p.value)?p.value:null;b?(b.comment&&(g=b.comment),b.commentBefore&&(c=!0)):p.value==null&&w?.comment&&(g=w.comment)}g&&(c=!0);let v=gn(p,l,()=>g=null);m<t.length-1&&(v+=","),g&&(v+=qt(v,r,a(g))),!c&&(d.length>u||v.includes(`
`))&&(c=!0),d.push(v),u=d.length}let{start:f,end:h}=n;if(d.length===0)return f+h;if(!c){let m=d.reduce((p,g)=>p+g.length+2,2);c=e.options.lineWidth>0&&m>e.options.lineWidth}if(c){let m=f;for(let p of d)m+=p?`
${o}${i}${p}`:`
`;return`${m}
${i}${h}`}else return`${f}${s}${d.join(" ")}${s}${h}`}function vl({indent:t,options:{commentString:e}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){let o=ft(e(r),t);n.push(o.trimStart())}}function Pn(t,e){let n=H(e)?e.value:e;for(let r of t)if(Q(r)&&(r.key===e||r.key===n||H(r.key)&&r.key.value===n))return r}var ie=class extends dl{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(St,e),this.items=[]}static from(e,n,r){let{keepUndefined:i,replacer:o}=r,s=new this(e),a=(l,c)=>{if(typeof o=="function")c=o.call(n,l,c);else if(Array.isArray(o)&&!o.includes(l))return;(c!==void 0||i)&&s.items.push(wi(l,c,r))};if(n instanceof Map)for(let[l,c]of n)a(l,c);else if(n&&typeof n=="object")for(let l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&s.items.sort(e.sortMapEntries),s}add(e,n){let r;Q(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new ye(e,e?.value):r=new ye(e.key,e.value);let i=Pn(this.items,r.key),o=this.schema?.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);H(i.value)&&ul(r.value)?i.value.value=r.value:i.value=r.value}else if(o){let s=this.items.findIndex(a=>o(r,a)<0);s===-1?this.items.push(r):this.items.splice(s,0,r)}else this.items.push(r)}delete(e){let n=Pn(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){let i=Pn(this.items,e)?.value;return(!n&&H(i)?i.value:i)??void 0}has(e){return!!Pn(this.items,e)}set(e,n){this.add(new ye(e,n),!0)}toJSON(e,n,r){let i=r?new r:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(i);for(let o of this.items)yl(n,i,o);return i}toString(e,n,r){if(!e)return JSON.stringify(this);for(let i of this.items)if(!Q(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),wl(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:n})}};var Nt={collection:"map",default:!0,nodeClass:ie,tag:"tag:yaml.org,2002:map",resolve(t,e){return At(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>ie.from(t,e,n)};var he=class extends dl{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(fn,e),this.items=[]}add(e){this.items.push(e)}delete(e){let n=bl(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){let r=bl(e);if(typeof r!="number")return;let i=this.items[r];return!n&&H(i)?i.value:i}has(e){let n=bl(e);return typeof n=="number"&&n<this.items.length}set(e,n){let r=bl(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);let i=this.items[r];H(i)&&ul(n)?i.value=n:this.items[r]=n}toJSON(e,n){let r=[];n?.onCreate&&n.onCreate(r);let i=0;for(let o of this.items)r.push(Me(o,String(i++),n));return r}toString(e,n,r){return e?wl(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(e,n,r){let{replacer:i}=r,o=new this(e);if(n&&Symbol.iterator in Object(n)){let s=0;for(let a of n){if(typeof i=="function"){let l=n instanceof Set?a:String(s++);a=i.call(n,l,a)}o.items.push(mn(a,void 0,r))}}return o}};function bl(t){let e=H(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}var xt={collection:"seq",default:!0,nodeClass:he,tag:"tag:yaml.org,2002:seq",resolve(t,e){return Tt(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>he.from(t,e,n)};var Fn={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),vr(t,e,n,r)}};var wr={identify:t=>t==null,createNode:()=>new S(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new S(null),stringify:({source:t},e)=>typeof t=="string"&&wr.test.test(t)?t:e.options.nullStr};var Fo={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new S(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&Fo.test.test(t)){let r=t[0]==="t"||t[0]==="T";if(e===r)return t}return e?n.options.trueStr:n.options.falseStr}};function Be({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);let i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}var Cl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Be},_l={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():Be(t)}},Dl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new S(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Be};var El=t=>typeof t=="bigint"||Number.isInteger(t),kf=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function pv(t,e,n){let{value:r}=t;return El(r)&&r>=0?n+r.toString(e):Be(t)}var Il={identify:t=>El(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>kf(t,2,8,n),stringify:t=>pv(t,8,"0o")},Sl={identify:El,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>kf(t,0,10,n),stringify:Be},Ml={identify:t=>El(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>kf(t,2,16,n),stringify:t=>pv(t,16,"0x")};var mv=[Nt,xt,Fn,wr,Fo,Il,Sl,Ml,Cl,_l,Dl];function gv(t){return typeof t=="bigint"||Number.isInteger(t)}var Al=({value:t})=>JSON.stringify(t),QS=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Al},{identify:t=>t==null,createNode:()=>new S(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Al},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:Al},{identify:gv,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>gv(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Al}],ZS={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},yv=[Nt,xt].concat(QS,ZS);var Lo={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let n=atob(t.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,i,o){let s=n,a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=S.BLOCK_LITERAL),e!==S.QUOTE_DOUBLE){let l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let d=0,f=0;d<c;++d,f+=l)u[d]=a.substr(f,l);a=u.join(e===S.BLOCK_LITERAL?`
`:" ")}return vr({comment:t,type:e,value:a},r,i,o)}};function Rf(t,e){if(Tt(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!Q(r)){if(At(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");let i=r.items[0]||new ye(new S(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){let o=i.value??i.key;o.comment=o.comment?`${r.comment}
${o.comment}`:r.comment}r=i}t.items[n]=Q(r)?r:new ye(r)}}else e("Expected a sequence for this tag");return t}function Pf(t,e,n){let{replacer:r}=n,i=new he(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof r=="function"&&(s=r.call(e,String(o++),s));let a,l;if(Array.isArray(s))if(s.length===2)a=s[0],l=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){let c=Object.keys(s);if(c.length===1)a=c[0],l=s[a];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else a=s;i.items.push(wi(a,l,n))}return i}var Vo={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Rf,createNode:Pf};var Ff=(()=>{class t extends he{constructor(){super(),this.add=ie.prototype.add.bind(this),this.delete=ie.prototype.delete.bind(this),this.get=ie.prototype.get.bind(this),this.has=ie.prototype.has.bind(this),this.set=ie.prototype.set.bind(this),this.tag=t.tag}toJSON(n,r){if(!r)return super.toJSON(n);let i=new Map;r?.onCreate&&r.onCreate(i);for(let o of this.items){let s,a;if(Q(o)?(s=Me(o.key,"",r),a=Me(o.value,s,r)):s=Me(o,"",r),i.has(s))throw new Error("Ordered maps must not include duplicate keys");i.set(s,a)}return i}static from(n,r,i){let o=Pf(n,r,i),s=new this;return s.items=o.items,s}}return t.tag="tag:yaml.org,2002:omap",t})(),$o={collection:"seq",identify:t=>t instanceof Map,nodeClass:Ff,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let n=Rf(t,e),r=[];for(let{key:i}of n.items)H(i)&&(r.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new Ff,n)},createNode:(t,e,n)=>Ff.from(t,e,n)};function vv({value:t,source:e},n){return e&&(t?Lf:Vf).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}var Lf={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new S(!0),stringify:vv},Vf={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new S(!1),stringify:vv};var wv={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Be},bv={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():Be(t)}},Cv={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new S(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){let r=t.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:Be};var jo=t=>typeof t=="bigint"||Number.isInteger(t);function Tl(t,e,n,{intAsBigInt:r}){let i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let s=BigInt(t);return i==="-"?BigInt(-1)*s:s}let o=parseInt(t,n);return i==="-"?-1*o:o}function $f(t,e,n){let{value:r}=t;if(jo(r)){let i=r.toString(e);return r<0?"-"+n+i.substr(1):n+i}return Be(t)}var _v={identify:jo,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Tl(t,2,2,n),stringify:t=>$f(t,2,"0b")},Dv={identify:jo,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Tl(t,1,8,n),stringify:t=>$f(t,8,"0")},Ev={identify:jo,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Tl(t,0,10,n),stringify:Be},Iv={identify:jo,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Tl(t,2,16,n),stringify:t=>$f(t,16,"0x")};var jf=(()=>{class t extends ie{constructor(n){super(n),this.tag=t.tag}add(n){let r;Q(n)?r=n:n&&typeof n=="object"&&"key"in n&&"value"in n&&n.value===null?r=new ye(n.key,null):r=new ye(n,null),Pn(this.items,r.key)||this.items.push(r)}get(n,r){let i=Pn(this.items,n);return!r&&Q(i)?H(i.key)?i.key.value:i.key:i}set(n,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let i=Pn(this.items,n);i&&!r?this.items.splice(this.items.indexOf(i),1):!i&&r&&this.items.push(new ye(n))}toJSON(n,r){return super.toJSON(n,r,Set)}toString(n,r,i){if(!n)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},n,{allNullValues:!0}),r,i);throw new Error("Set items must all have null values")}static from(n,r,i){let{replacer:o}=i,s=new this(n);if(r&&Symbol.iterator in Object(r))for(let a of r)typeof o=="function"&&(a=o.call(r,a,a)),s.items.push(wi(a,null,i));return s}}return t.tag="tag:yaml.org,2002:set",t})(),Bo={collection:"map",identify:t=>t instanceof Set,nodeClass:jf,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>jf.from(t,e,n),resolve(t,e){if(At(t)){if(t.hasAllNullValues(!0))return Object.assign(new jf,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function Bf(t,e){let n=t[0],r=n==="-"||n==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=r.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return n==="-"?i(-1)*o:o}function Sv(t){let{value:e}=t,n=s=>s;if(typeof e=="bigint")n=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return Be(t);let r="";e<0&&(r="-",e*=n(-1));let i=n(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),r+o.map(s=>String(s).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var Nl={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>Bf(t,n),stringify:Sv},xl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Bf(t,!1),stringify:Sv},bi={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(bi.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,n,r,i,o,s,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0,c=Date.UTC(n,r-1,i,o||0,s||0,a||0,l),u=e[8];if(u&&u!=="Z"){let d=Bf(u,!1);Math.abs(d)<30&&(d*=60),c-=6e4*d}return new Date(c)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};var Uf=[Nt,xt,Fn,wr,Lf,Vf,_v,Dv,Ev,Iv,wv,bv,Cv,Lo,$o,Vo,Bo,Nl,xl,bi];var Mv=new Map([["core",mv],["failsafe",[Nt,xt,Fn]],["json",yv],["yaml11",Uf],["yaml-1.1",Uf]]),Av={binary:Lo,bool:Fo,float:Dl,floatExp:_l,floatNaN:Cl,floatTime:xl,int:Sl,intHex:Ml,intOct:Il,intTime:Nl,map:Nt,null:wr,omap:$o,pairs:Vo,seq:xt,set:Bo,timestamp:bi},Tv={"tag:yaml.org,2002:binary":Lo,"tag:yaml.org,2002:omap":$o,"tag:yaml.org,2002:pairs":Vo,"tag:yaml.org,2002:set":Bo,"tag:yaml.org,2002:timestamp":bi};function Ol(t,e){let n=Mv.get(e);if(!n)if(Array.isArray(t))n=[];else{let r=Array.from(Mv.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${r} or define customTags array`)}if(Array.isArray(t))for(let r of t)n=n.concat(r);else typeof t=="function"&&(n=t(n.slice()));return n.map(r=>{if(typeof r!="string")return r;let i=Av[r];if(i)return i;let o=Object.keys(Av).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${r}"; use one of ${o}`)})}var JS=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,Uo=class t{constructor({compat:e,customTags:n,merge:r,resolveKnownTags:i,schema:o,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?Ol(e,"compat"):e?Ol(null,e):null,this.merge=!!r,this.name=typeof o=="string"&&o||"core",this.knownTags=i?Tv:{},this.tags=Ol(n,this.name),this.toStringOptions=a??null,Object.defineProperty(this,St,{value:Nt}),Object.defineProperty(this,dt,{value:Fn}),Object.defineProperty(this,fn,{value:xt}),this.sortMapEntries=typeof s=="function"?s:s===!0?JS:null}clone(){let e=Object.create(t.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};function Nv(t,e){let n=[],r=e.directives===!0;if(e.directives!==!1&&t.directives){let l=t.directives.toString(t);l?(n.push(l),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");let i=gl(t,e),{commentString:o}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");let l=o(t.commentBefore);n.unshift(ft(l,""))}let s=!1,a=null;if(t.contents){if(ee(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){let u=o(t.contents.commentBefore);n.push(ft(u,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}let l=a?void 0:()=>s=!0,c=gn(t.contents,i,()=>a=null,l);a&&(c+=qt(c,"",o(a))),(c[0]==="|"||c[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${c}`:n.push(c)}else n.push(gn(t.contents,i));if(t.directives?.docEnd)if(t.comment){let l=o(t.comment);l.includes(`
`)?(n.push("..."),n.push(ft(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&s&&(l=l.replace(/^\n+/,"")),l&&((!s||a)&&n[n.length-1]!==""&&n.push(""),n.push(ft(o(l),"")))}return n.join(`
`)+`
`}var zt=class t{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,qe,{value:sl});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);let o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},r);this.options=o;let{version:s}=o;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new gi({version:s}),this.setSchema(s,r),this.contents=e===void 0?null:this.createNode(e,i,r)}clone(){let e=Object.create(t.prototype,{[qe]:{value:sl}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=ee(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Ci(this.contents)&&this.contents.add(e)}addIn(e,n){Ci(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){let r=Sf(this);e.anchor=!n||r.has(n)?Mf(n||"a",r):n}return new pn(e.anchor)}createNode(e,n,r){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){let g=w=>typeof w=="number"||w instanceof String||w instanceof Number,v=n.filter(g).map(String);v.length>0&&(n=n.concat(v)),i=n}else r===void 0&&n&&(r=n,n=void 0);let{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:l,onTagObj:c,tag:u}=r??{},{onAnchor:d,setAnchors:f,sourceObjects:h}=cv(this,s||"a"),m={aliasDuplicateObjects:o??!0,keepUndefined:l??!1,onAnchor:d,onTagObj:c,replacer:i,schema:this.schema,sourceObjects:h},p=mn(e,u,m);return a&&re(p)&&(p.flow=!0),f(),p}createPair(e,n,r={}){let i=this.createNode(e,null,r),o=this.createNode(n,null,r);return new ye(i,o)}delete(e){return Ci(this.contents)?this.contents.delete(e):!1}deleteIn(e){return yi(e)?this.contents==null?!1:(this.contents=null,!0):Ci(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return re(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return yi(e)?!n&&H(this.contents)?this.contents.value:this.contents:re(this.contents)?this.contents.getIn(e,n):void 0}has(e){return re(this.contents)?this.contents.has(e):!1}hasIn(e){return yi(e)?this.contents!==void 0:re(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=Oo(this.schema,[e],n):Ci(this.contents)&&this.contents.set(e,n)}setIn(e,n){yi(e)?this.contents=n:this.contents==null?this.contents=Oo(this.schema,Array.from(e),n):Ci(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new gi({version:"1.1"}),r={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new gi({version:e}),r={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{let i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new Uo(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:o,reviver:s}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=Me(this.contents,n??"",a);if(typeof o=="function")for(let{count:c,res:u}of a.anchors.values())o(u,c);return typeof s=="function"?kn(s,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Nv(this,e)}};function Ci(t){if(re(t))return!0;throw new Error("Expected a YAML collection as document contents")}var Ho=class extends Error{constructor(e,n,r,i){super(),this.name=e,this.code=r,this.message=i,this.pos=n}},Ot=class extends Ho{constructor(e,n,r){super("YAMLParseError",e,n,r)}},Go=class extends Ho{constructor(e,n,r){super("YAMLWarning",e,n,r)}},Hf=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));let{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){let a=Math.min(o-39,s.length-79);s="\u2026"+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+"\u2026"),r>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),s=a+s}if(/[^ ]/.test(s)){let a=1,l=n.linePos[1];l&&l.line===r&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-o)));let c=" ".repeat(o)+"^".repeat(a);n.message+=`:

${s}
${c}
`}};function Wt(t,{flow:e,indicator:n,next:r,offset:i,onError:o,startOnNewline:s}){let a=!1,l=s,c=s,u="",d="",f=!1,h=!1,m=!1,p=null,g=null,v=null,w=null,b=null;for(let C of t)switch(m&&(C.type!=="space"&&C.type!=="newline"&&C.type!=="comma"&&o(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m=!1),C.type){case"space":!e&&l&&n!=="doc-start"&&C.source[0]==="	"&&o(C,"TAB_AS_INDENT","Tabs are not allowed as indentation"),c=!0;break;case"comment":{c||o(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let te=C.source.substring(1)||" ";u?u+=d+te:u=te,d="",l=!1;break}case"newline":l?u?u+=C.source:a=!0:d+=C.source,l=!0,f=!0,(p||g)&&(h=!0),c=!0;break;case"anchor":p&&o(C,"MULTIPLE_ANCHORS","A node can have at most one anchor"),C.source.endsWith(":")&&o(C.offset+C.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),p=C,b===null&&(b=C.offset),l=!1,c=!1,m=!0;break;case"tag":{g&&o(C,"MULTIPLE_TAGS","A node can have at most one tag"),g=C,b===null&&(b=C.offset),l=!1,c=!1,m=!0;break}case n:(p||g)&&o(C,"BAD_PROP_ORDER",`Anchors and tags must be after the ${C.source} indicator`),w&&o(C,"UNEXPECTED_TOKEN",`Unexpected ${C.source} in ${e??"collection"}`),w=C,l=!1,c=!1;break;case"comma":if(e){v&&o(C,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),v=C,l=!1,c=!1;break}default:o(C,"UNEXPECTED_TOKEN",`Unexpected ${C.type} token`),l=!1,c=!1}let D=t[t.length-1],T=D?D.offset+D.source.length:i;return m&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:v,found:w,spaceBefore:a,comment:u,hasNewline:f,hasNewlineAfterProp:h,anchor:p,tag:g,end:T,start:b??T}}function Ln(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let n of e.start)if(n.type==="newline")return!0;if(e.sep){for(let n of e.sep)if(n.type==="newline")return!0}if(Ln(e.key)||Ln(e.value))return!0}return!1;default:return!0}}function qo(t,e,n){if(e?.type==="flow-collection"){let r=e.end[0];r.indent===t&&(r.source==="]"||r.source==="}")&&Ln(e)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function kl(t,e,n){let{uniqueKeys:r}=t.options;if(r===!1)return!1;let i=typeof r=="function"?r:(o,s)=>o===s||H(o)&&H(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,n))}var xv="All mapping items must start at the same column";function Ov({composeNode:t,composeEmptyNode:e},n,r,i,o){let s=o?.nodeClass??ie,a=new s(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,c=null;for(let u of r.items){let{start:d,key:f,sep:h,value:m}=u,p=Wt(d,{indicator:"explicit-key-ind",next:f??h?.[0],offset:l,onError:i,startOnNewline:!0}),g=!p.found;if(g){if(f&&(f.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in f&&f.indent!==r.indent&&i(l,"BAD_INDENT",xv)),!p.anchor&&!p.tag&&!h){c=p.end,p.comment&&(a.comment?a.comment+=`
`+p.comment:a.comment=p.comment);continue}(p.hasNewlineAfterProp||Ln(f))&&i(f??d[d.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else p.found?.indent!==r.indent&&i(l,"BAD_INDENT",xv);let v=p.end,w=f?t(n,f,p,i):e(n,v,d,null,p,i);n.schema.compat&&qo(r.indent,f,i),kl(n,a.items,w)&&i(v,"DUPLICATE_KEY","Map keys must be unique");let b=Wt(h??[],{indicator:"map-value-ind",next:m,offset:w.range[2],onError:i,startOnNewline:!f||f.type==="block-scalar"});if(l=b.end,b.found){g&&(m?.type==="block-map"&&!b.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&p.start<b.found.offset-1024&&i(w.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let D=m?t(n,m,b,i):e(n,l,h,null,b,i);n.schema.compat&&qo(r.indent,m,i),l=D.range[2];let T=new ye(w,D);n.options.keepSourceTokens&&(T.srcToken=u),a.items.push(T)}else{g&&i(w.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),b.comment&&(w.comment?w.comment+=`
`+b.comment:w.comment=b.comment);let D=new ye(w);n.options.keepSourceTokens&&(D.srcToken=u),a.items.push(D)}}return c&&c<l&&i(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,c??l],a}function kv({composeNode:t,composeEmptyNode:e},n,r,i,o){let s=o?.nodeClass??he,a=new s(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,c=null;for(let{start:u,value:d}of r.items){let f=Wt(u,{indicator:"seq-item-ind",next:d,offset:l,onError:i,startOnNewline:!0});if(!f.found)if(f.anchor||f.tag||d)d&&d.type==="block-seq"?i(f.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{c=f.end,f.comment&&(a.comment=f.comment);continue}let h=d?t(n,d,f,i):e(n,f.end,u,null,f,i);n.schema.compat&&qo(r.indent,d,i),l=h.range[2],a.items.push(h)}return a.range=[r.offset,l,c??l],a}function Yt(t,e,n,r){let i="";if(t){let o=!1,s="";for(let a of t){let{source:l,type:c}=a;switch(c){case"space":o=!0;break;case"comment":{n&&!o&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=l.substring(1)||" ";i?i+=s+u:i=u,s="";break}case"newline":i&&(s+=l),o=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:i,offset:e}}var Gf="Block collections are not allowed within flow collections",qf=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Rv({composeNode:t,composeEmptyNode:e},n,r,i,o){let s=r.start.source==="{",a=s?"flow map":"flow sequence",l=o?.nodeClass??(s?ie:he),c=new l(n.schema);c.flow=!0;let u=n.atRoot;u&&(n.atRoot=!1);let d=r.offset+r.start.source.length;for(let g=0;g<r.items.length;++g){let v=r.items[g],{start:w,key:b,sep:D,value:T}=v,C=Wt(w,{flow:a,indicator:"explicit-key-ind",next:b??D?.[0],offset:d,onError:i,startOnNewline:!1});if(!C.found){if(!C.anchor&&!C.tag&&!D&&!T){g===0&&C.comma?i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):g<r.items.length-1&&i(C.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),C.comment&&(c.comment?c.comment+=`
`+C.comment:c.comment=C.comment),d=C.end;continue}!s&&n.options.strict&&Ln(b)&&i(b,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(g===0)C.comma&&i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(C.comma||i(C.start,"MISSING_CHAR",`Missing , between ${a} items`),C.comment){let te="";e:for(let le of w)switch(le.type){case"comma":case"space":break;case"comment":te=le.source.substring(1);break e;default:break e}if(te){let le=c.items[c.items.length-1];Q(le)&&(le=le.value??le.key),le.comment?le.comment+=`
`+te:le.comment=te,C.comment=C.comment.substring(te.length+1)}}if(!s&&!D&&!C.found){let te=T?t(n,T,C,i):e(n,C.end,D,null,C,i);c.items.push(te),d=te.range[2],qf(T)&&i(te.range,"BLOCK_IN_FLOW",Gf)}else{let te=C.end,le=b?t(n,b,C,i):e(n,te,w,null,C,i);qf(b)&&i(le.range,"BLOCK_IN_FLOW",Gf);let we=Wt(D??[],{flow:a,indicator:"map-value-ind",next:T,offset:le.range[2],onError:i,startOnNewline:!1});if(we.found){if(!s&&!C.found&&n.options.strict){if(D)for(let me of D){if(me===we.found)break;if(me.type==="newline"){i(me,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}C.start<we.found.offset-1024&&i(we.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else T&&("source"in T&&T.source&&T.source[0]===":"?i(T,"MISSING_CHAR",`Missing space after : in ${a}`):i(we.start,"MISSING_CHAR",`Missing , or : between ${a} items`));let Qt=T?t(n,T,we,i):we.found?e(n,we.end,D,null,we,i):null;Qt?qf(T)&&i(Qt.range,"BLOCK_IN_FLOW",Gf):we.comment&&(le.comment?le.comment+=`
`+we.comment:le.comment=we.comment);let W=new ye(le,Qt);if(n.options.keepSourceTokens&&(W.srcToken=v),s){let me=c;kl(n,me.items,le)&&i(te,"DUPLICATE_KEY","Map keys must be unique"),me.items.push(W)}else{let me=new ie(n.schema);me.flow=!0,me.items.push(W),c.items.push(me)}d=Qt?Qt.range[2]:we.end}}let f=s?"}":"]",[h,...m]=r.end,p=d;if(h&&h.source===f)p=h.offset+h.source.length;else{let g=a[0].toUpperCase()+a.substring(1),v=u?`${g} must end with a ${f}`:`${g} in block collection must be sufficiently indented and end with a ${f}`;i(d,u?"MISSING_CHAR":"BAD_INDENT",v),h&&h.source.length!==1&&m.unshift(h)}if(m.length>0){let g=Yt(m,p,n.options.strict,i);g.comment&&(c.comment?c.comment+=`
`+g.comment:c.comment=g.comment),c.range=[r.offset,p,g.offset]}else c.range=[r.offset,p,p];return c}function zf(t,e,n,r,i,o){let s=n.type==="block-map"?Ov(t,e,n,r,o):n.type==="block-seq"?kv(t,e,n,r,o):Rv(t,e,n,r,o),a=s.constructor;return i==="!"||i===a.tagName?(s.tag=a.tagName,s):(i&&(s.tag=i),s)}function Pv(t,e,n,r,i){let o=r?e.directives.tagName(r.source,d=>i(r,"TAG_RESOLVE_FAILED",d)):null,s=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!r||!o||o==="!"||o===ie.tagName&&s==="map"||o===he.tagName&&s==="seq"||!s)return zf(t,e,n,i,o);let a=e.schema.tags.find(d=>d.tag===o&&d.collection===s);if(!a){let d=e.schema.knownTags[o];if(d&&d.collection===s)e.schema.tags.push(Object.assign({},d,{default:!1})),a=d;else return d?.collection?i(r,"BAD_COLLECTION_TYPE",`${d.tag} used for ${s} collection, but expects ${d.collection}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),zf(t,e,n,i,o)}let l=zf(t,e,n,i,o,a),c=a.resolve?.(l,d=>i(r,"TAG_RESOLVE_FAILED",d),e.options)??l,u=ee(c)?c:new S(c);return u.range=l.range,u.tag=o,a?.format&&(u.format=a.format),u}function Wf(t,e,n){let r=t.offset,i=XS(t,e,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};let o=i.mode===">"?S.BLOCK_FOLDED:S.BLOCK_LITERAL,s=t.source?eM(t.source):[],a=s.length;for(let p=s.length-1;p>=0;--p){let g=s[p][1];if(g===""||g==="\r")a=p;else break}if(a===0){let p=i.chomp==="+"&&s.length>0?`
`.repeat(Math.max(1,s.length-1)):"",g=r+i.length;return t.source&&(g+=t.source.length),{value:p,type:o,comment:i.comment,range:[r,g,g]}}let l=t.indent+i.indent,c=t.offset+i.length,u=0;for(let p=0;p<a;++p){let[g,v]=s[p];if(v===""||v==="\r")i.indent===0&&g.length>l&&(l=g.length);else{g.length<l&&n(c+g.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=g.length),u=p;break}c+=g.length+v.length+1}for(let p=s.length-1;p>=a;--p)s[p][0].length>l&&(a=p+1);let d="",f="",h=!1;for(let p=0;p<u;++p)d+=s[p][0].slice(l)+`
`;for(let p=u;p<a;++p){let[g,v]=s[p];c+=g.length+v.length+1;let w=v[v.length-1]==="\r";if(w&&(v=v.slice(0,-1)),v&&g.length<l){let D=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(c-v.length-(w?2:1),"BAD_INDENT",D),g=""}o===S.BLOCK_LITERAL?(d+=f+g.slice(l)+v,f=`
`):g.length>l||v[0]==="	"?(f===" "?f=`
`:!h&&f===`
`&&(f=`

`),d+=f+g.slice(l)+v,f=`
`,h=!0):v===""?f===`
`?d+=`
`:f=`
`:(d+=f+v,f=" ",h=!1)}switch(i.chomp){case"-":break;case"+":for(let p=a;p<s.length;++p)d+=`
`+s[p][0].slice(l);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let m=r+i.length+t.source.length;return{value:d,type:o,comment:i.comment,range:[r,m,m]}}function XS({offset:t,props:e},n,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=e[0],o=i[0],s=0,a="",l=-1;for(let f=1;f<i.length;++f){let h=i[f];if(!a&&(h==="-"||h==="+"))a=h;else{let m=Number(h);!s&&m?s=m:l===-1&&(l=t+f)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let c=!1,u="",d=i.length;for(let f=1;f<e.length;++f){let h=e[f];switch(h.type){case"space":c=!0;case"newline":d+=h.source.length;break;case"comment":n&&!c&&r(h,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=h.source.length,u=h.source.substring(1);break;case"error":r(h,"UNEXPECTED_TOKEN",h.message),d+=h.source.length;break;default:{let m=`Unexpected token in block scalar header: ${h.type}`;r(h,"UNEXPECTED_TOKEN",m);let p=h.source;p&&typeof p=="string"&&(d+=p.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:d}}function eM(t){let e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),o=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}function Yf(t,e,n){let{offset:r,type:i,source:o,end:s}=t,a,l,c=(f,h,m)=>n(r+f,h,m);switch(i){case"scalar":a=S.PLAIN,l=tM(o,c);break;case"single-quoted-scalar":a=S.QUOTE_SINGLE,l=nM(o,c);break;case"double-quoted-scalar":a=S.QUOTE_DOUBLE,l=rM(o,c);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}let u=r+o.length,d=Yt(s,u,e,n);return{value:l,type:a,comment:d.comment,range:[r,u,d.offset]}}function tM(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Fv(t)}function nM(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Fv(t.slice(1,-1)).replace(/''/g,"'")}function Fv(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let i=r[1],o=" ",s=e.lastIndex;for(n.lastIndex=s;r=n.exec(t);)r[1]===""?o===`
`?i+=o:o=`
`:(i+=o+r[1],o=" "),s=n.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=s,r=a.exec(t),i+o+(r?.[1]??"")}function rM(t,e){let n="";for(let r=1;r<t.length-1;++r){let i=t[r];if(!(i==="\r"&&t[r+1]===`
`))if(i===`
`){let{fold:o,offset:s}=iM(t,r);n+=o,r=s}else if(i==="\\"){let o=t[++r],s=oM[o];if(s)n+=s;else if(o===`
`)for(o=t[r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="\r"&&t[r+1]===`
`)for(o=t[++r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="x"||o==="u"||o==="U"){let a={x:2,u:4,U:8}[o];n+=sM(t,r+1,a,e),r+=a}else{let a=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(i===" "||i==="	"){let o=r,s=t[r+1];for(;s===" "||s==="	";)s=t[++r+1];s!==`
`&&!(s==="\r"&&t[r+2]===`
`)&&(n+=r>o?t.slice(o,r+1):i)}else n+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function iM(t,e){let n="",r=t[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&t[e+2]!==`
`);)r===`
`&&(n+=`
`),e+=1,r=t[e+1];return n||(n=" "),{fold:n,offset:e}}var oM={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function sM(t,e,n,r){let i=t.substr(e,n),s=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){let a=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}function Kf(t,e,n,r){let{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?Wf(e,t.options.strict,r):Yf(e,t.options.strict,r),l=n?t.directives.tagName(n.source,d=>r(n,"TAG_RESOLVE_FAILED",d)):null,c=n&&l?aM(t.schema,i,l,n,r):e.type==="scalar"?lM(t,i,e,r):t.schema[dt],u;try{let d=c.resolve(i,f=>r(n??e,"TAG_RESOLVE_FAILED",f),t.options);u=H(d)?d:new S(d)}catch(d){let f=d instanceof Error?d.message:String(d);r(n??e,"TAG_RESOLVE_FAILED",f),u=new S(i)}return u.range=a,u.source=i,o&&(u.type=o),l&&(u.tag=l),c.format&&(u.format=c.format),s&&(u.comment=s),u}function aM(t,e,n,r,i){if(n==="!")return t[dt];let o=[];for(let a of t.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)o.push(a);else return a;for(let a of o)if(a.test?.test(e))return a;let s=t.knownTags[n];return s&&!s.collection?(t.tags.push(Object.assign({},s,{default:!1,test:void 0})),s):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[dt])}function lM({directives:t,schema:e},n,r,i){let o=e.tags.find(s=>s.default&&s.test?.test(n))||e[dt];if(e.compat){let s=e.compat.find(a=>a.default&&a.test?.test(n))??e[dt];if(o.tag!==s.tag){let a=t.tagString(o.tag),l=t.tagString(s.tag),c=`Value may be parsed as either ${a} or ${l}`;i(r,"TAG_RESOLVE_FAILED",c,!0)}}return o}function Lv(t,e,n){if(e){n===null&&(n=e.length);for(let r=n-1;r>=0;--r){let i=e[r];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++r];i?.type==="space";)t+=i.source.length,i=e[++r];break}}return t}var cM={composeNode:Qf,composeEmptyNode:Rl};function Qf(t,e,n,r){let{spaceBefore:i,comment:o,anchor:s,tag:a}=n,l,c=!0;switch(e.type){case"alias":l=uM(t,e,r),(s||a)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=Kf(t,e,a,r),s&&(l.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=Pv(cM,t,e,a,r),s&&(l.anchor=s.source.substring(1));break;default:{let u=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",u),l=Rl(t,e.offset,void 0,null,n,r),c=!1}}return s&&l.anchor===""&&r(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(l.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?l.comment=o:l.commentBefore=o),t.options.keepSourceTokens&&c&&(l.srcToken=e),l}function Rl(t,e,n,r,{spaceBefore:i,comment:o,anchor:s,tag:a,end:l},c){let u={type:"scalar",offset:Lv(e,n,r),indent:-1,source:""},d=Kf(t,u,a,c);return s&&(d.anchor=s.source.substring(1),d.anchor===""&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(d.spaceBefore=!0),o&&(d.comment=o,d.range[2]=l),d}function uM({options:t},{offset:e,source:n,end:r},i){let o=new pn(n.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),o.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let s=e+n.length,a=Yt(r,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}function Vv(t,e,{offset:n,start:r,value:i,end:o},s){let a=Object.assign({_directives:e},t),l=new zt(void 0,a),c={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=Wt(r,{indicator:"doc-start",next:i??o?.[0],offset:n,onError:s,startOnNewline:!0});u.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?Qf(c,i,u,s):Rl(c,u.end,r,null,u,s);let d=l.contents.range[2],f=Yt(o,d,!1,s);return f.comment&&(l.comment=f.comment),l.range=[n,d,f.offset],l}function zo(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function $v(t){let e="",n=!1,r=!1;for(let i=0;i<t.length;++i){let o=t[i];switch(o[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(o.substring(1)||" "),n=!0,r=!1;break;case"%":t[i+1]?.[0]!=="#"&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}var Wo=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,o)=>{let s=zo(n);o?this.warnings.push(new Go(s,r,i)):this.errors.push(new Ot(s,r,i))},this.directives=new gi({version:e.version||"1.2"}),this.options=e}decorate(e,n){let{comment:r,afterEmptyLine:i}=$v(this.prelude);if(r){let o=e.contents;if(n)e.comment=e.comment?`${e.comment}
${r}`:r;else if(i||e.directives.docStart||!o)e.commentBefore=r;else if(re(o)&&!o.flow&&o.items.length>0){let s=o.items[0];Q(s)&&(s=s.key);let a=s.commentBefore;s.commentBefore=a?`${r}
${a}`:r}else{let s=o.commentBefore;o.commentBefore=s?`${r}
${s}`:r}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:$v(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,r=-1){for(let i of e)yield*y(this.next(i));yield*y(this.end(n,r))}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,r,i)=>{let o=zo(e);o[0]+=n,this.onError(o,"BAD_DIRECTIVE",r,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let n=Vv(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new Ot(zo(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){let r="Unexpected doc-end without preceding document";this.errors.push(new Ot(zo(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;let n=Yt(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){let r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Ot(zo(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let r=Object.assign({_directives:this.directives},this.options),i=new zt(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}};var Zf=Symbol("break visit"),dM=Symbol("skip children"),jv=Symbol("remove item");function br(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),Bv(Object.freeze([]),t,e)}br.BREAK=Zf;br.SKIP=dM;br.REMOVE=jv;br.itemAtPath=(t,e)=>{let n=t;for(let[r,i]of e){let o=n?.[r];if(o&&"items"in o)n=o.items[i];else return}return n};br.parentCollection=(t,e)=>{let n=br.itemAtPath(t,e.slice(0,-1)),r=e[e.length-1][0],i=n?.[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Bv(t,e,n){let r=n(e,t);if(typeof r=="symbol")return r;for(let i of["key","value"]){let o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){let a=Bv(Object.freeze(t.concat([[i,s]])),o.items[s],n);if(typeof a=="number")s=a-1;else{if(a===Zf)return Zf;a===jv&&(o.items.splice(s,1),s-=1)}}typeof r=="function"&&i==="key"&&(r=r(e,t))}}return typeof r=="function"?r(e,t):r}var Jf="\uFEFF",Xf="",eh="",Pl="";function Uv(t){switch(t){case Jf:return"byte-order-mark";case Xf:return"doc-mode";case eh:return"flow-error-end";case Pl:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function ht(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var Hv="0123456789ABCDEFabcdef".split(""),hM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),th=",[]{}".split(""),pM=` ,[]{}
\r	`.split(""),nh=t=>!t||pM.includes(t),Yo=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*y(this.parseNext(r))}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+e];if(n==="\r"){let i=this.buffer[r+e+1];if(i===`
`||!i&&!this.atEnd)return e+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?e+r:-1}if(n==="-"||n==="."){let r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&ht(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*y(this.parseStream());case"line-start":return yield*y(this.parseLineStart());case"block-start":return yield*y(this.parseBlockStart());case"doc":return yield*y(this.parseDocument());case"flow":return yield*y(this.parseFlowCollection());case"quoted-scalar":return yield*y(this.parseQuotedScalar());case"block-scalar":return yield*y(this.parseBlockScalar());case"plain-scalar":return yield*y(this.parsePlainScalar())}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Jf&&(yield*y(this.pushCount(1)),e=e.substring(1)),e[0]==="%"){let n=e.length,r=e.indexOf("#");if(r!==-1){let o=e[r-1];(o===" "||o==="	")&&(n=r-1)}for(;;){let o=e[n-1];if(o===" "||o==="	")n-=1;else break}let i=(yield*y(this.pushCount(n)))+(yield*y(this.pushSpaces(!0)));return yield*y(this.pushCount(e.length-i)),this.pushNewline(),"stream"}if(this.atLineEnd()){let n=yield*y(this.pushSpaces(!0));return yield*y(this.pushCount(e.length-n)),yield*y(this.pushNewline()),"stream"}return yield Xf,yield*y(this.parseLineStart())}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let n=this.peek(3);if(n==="---"&&ht(this.charAt(3)))return yield*y(this.pushCount(3)),this.indentValue=0,this.indentNext=0,"doc";if(n==="..."&&ht(this.charAt(3)))return yield*y(this.pushCount(3)),"stream"}return this.indentValue=yield*y(this.pushSpaces(!1)),this.indentNext>this.indentValue&&!ht(this.charAt(1))&&(this.indentNext=this.indentValue),yield*y(this.parseBlockStart())}*parseBlockStart(){let[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&ht(n)){let r=(yield*y(this.pushCount(1)))+(yield*y(this.pushSpaces(!0)));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*y(this.parseBlockStart())}return"doc"}*parseDocument(){yield*y(this.pushSpaces(!0));let e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*y(this.pushIndicators());switch(e[n]){case"#":yield*y(this.pushCount(e.length-n));case void 0:return yield*y(this.pushNewline()),yield*y(this.parseLineStart());case"{":case"[":return yield*y(this.pushCount(1)),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*y(this.pushCount(1)),"doc";case"*":return yield*y(this.pushUntil(nh)),"doc";case'"':case"'":return yield*y(this.parseQuotedScalar());case"|":case">":return n+=yield*y(this.parseBlockScalarHeader()),n+=yield*y(this.pushSpaces(!0)),yield*y(this.pushCount(e.length-n)),yield*y(this.pushNewline()),yield*y(this.parseBlockScalar());default:return yield*y(this.parsePlainScalar())}}*parseFlowCollection(){let e,n,r=-1;do e=yield*y(this.pushNewline()),e>0?(n=yield*y(this.pushSpaces(!1)),this.indentValue=r=n):n=0,n+=yield*y(this.pushSpaces(!0));while(e+n>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&ht(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield eh,yield*y(this.parseLineStart());let o=0;for(;i[o]===",";)o+=yield*y(this.pushCount(1)),o+=yield*y(this.pushSpaces(!0)),this.flowKey=!1;switch(o+=yield*y(this.pushIndicators()),i[o]){case void 0:return"flow";case"#":return yield*y(this.pushCount(i.length-o)),"flow";case"{":case"[":return yield*y(this.pushCount(1)),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*y(this.pushCount(1)),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*y(this.pushUntil(nh)),"flow";case'"':case"'":return this.flowKey=!0,yield*y(this.parseQuotedScalar());case":":{let s=this.charAt(1);if(this.flowKey||ht(s)||s===",")return this.flowKey=!1,yield*y(this.pushCount(1)),yield*y(this.pushSpaces(!0)),"flow"}default:return this.flowKey=!1,yield*y(this.parsePlainScalar())}}*parseQuotedScalar(){let e=this.charAt(0),n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let o=0;for(;this.buffer[n-1-o]==="\\";)o+=1;if(o%2===0)break;n=this.buffer.indexOf('"',n+1)}let r=this.buffer.substring(0,n),i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let o=this.continueScalar(i+1);if(o===-1)break;i=r.indexOf(`
`,o)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*y(this.pushToIndex(n+1,!1)),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*y(this.pushUntil(n=>ht(n)||n==="#"))}*parseBlockScalar(){let e=this.pos-1,n=0,r;e:for(let i=this.pos;r=this.buffer[i];++i)switch(r){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{let o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{let i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);let s=i;for(;o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>s)e=i;else break}while(!0);return yield Pl,yield*y(this.pushToIndex(e+1,!0)),yield*y(this.parseLineStart())}*parsePlainScalar(){let e=this.flowLevel>0,n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){let o=this.buffer[r+1];if(ht(o)||e&&o===",")break;n=r}else if(ht(i)){let o=this.buffer[r+1];if(i==="\r"&&(o===`
`?(r+=1,i=`
`,o=this.buffer[r+1]):n=r),o==="#"||e&&th.includes(o))break;if(i===`
`){let s=this.continueScalar(r+1);if(s===-1)break;r=Math.max(r,s-2)}}else{if(e&&th.includes(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Pl,yield*y(this.pushToIndex(n+1,!0)),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){let r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*y(this.pushTag()))+(yield*y(this.pushSpaces(!0)))+(yield*y(this.pushIndicators()));case"&":return(yield*y(this.pushUntil(nh)))+(yield*y(this.pushSpaces(!0)))+(yield*y(this.pushIndicators()));case"-":case"?":case":":{let e=this.flowLevel>0,n=this.charAt(1);if(ht(n)||e&&th.includes(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*y(this.pushCount(1)))+(yield*y(this.pushSpaces(!0)))+(yield*y(this.pushIndicators()))}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!ht(n)&&n!==">";)n=this.buffer[++e];return yield*y(this.pushToIndex(n===">"?e+1:e,!1))}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(hM.includes(n))n=this.buffer[++e];else if(n==="%"&&Hv.includes(this.buffer[e+1])&&Hv.includes(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*y(this.pushToIndex(e,!1))}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*y(this.pushCount(1)):e==="\r"&&this.charAt(1)===`
`?yield*y(this.pushCount(2)):0}*pushSpaces(e){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||e&&r==="	");let i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(e){let n=this.pos,r=this.buffer[n];for(;!e(r);)r=this.buffer[++n];return yield*y(this.pushToIndex(n,!1))}};var Ko=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,r=this.lineStarts.length;for(;n<r;){let o=n+r>>1;this.lineStarts[o]<e?n=o+1:r=o}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};let i=this.lineStarts[n-1];return{line:n,col:e-i+1}}}};function kt(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function Gv(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function zv(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Fl(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function _i(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function qv(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!kt(e.start,"explicit-key-ind")&&!kt(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,zv(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var Qo=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Yo,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let r of this.lexer.lex(e,n))yield*y(this.next(r));n||(yield*y(this.end()))}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*y(this.step()),this.offset+=e.length;return}let n=Uv(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*y(this.step()),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let r=`Not a YAML token: ${e}`;yield*y(this.pop({type:"error",offset:this.offset,message:r,source:e})),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*y(this.pop())}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*y(this.pop());this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*y(this.stream());switch(e.type){case"document":return yield*y(this.document(e));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*y(this.scalar(e));case"block-scalar":return yield*y(this.blockScalar(e));case"block-map":return yield*y(this.blockMap(e));case"block-seq":return yield*y(this.blockSequence(e));case"flow-collection":return yield*y(this.flowCollection(e));case"doc-end":return yield*y(this.documentEnd(e))}yield*y(this.pop())}peek(e){return this.stack[this.stack.length-e]}*pop(e){let n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{let r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&qv(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{let i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!kt(i.start,"explicit-key-ind");return}break}case"block-seq":{let i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{let i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*y(this.pop()),yield*y(this.pop(n))}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){let i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&Gv(i.start)===-1&&(n.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*y(this.lineEnd(e));switch(this.type){case"doc-start":{Gv(e.start)!==-1?(yield*y(this.pop()),yield*y(this.step())):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let n=Fl(this.peek(2)),r=_i(n),i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];let o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*y(this.lineEnd(e))}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*y(this.pop());break;default:yield*y(this.pop()),yield*y(this.step())}}*blockMap(e){let n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let r=!this.onKeyLine&&this.indent===e.indent&&n.sep&&this.type!=="seq-item-ind",i=[];if(r&&n.sep&&!n.value){let o=[];for(let s=0;s<n.sep.length;++s){let a=n.sep[s];switch(a.type){case"newline":o.push(s);break;case"space":break;case"comment":a.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!kt(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):r||n.value?(i.push(this.sourceToken),e.items.push({start:i})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(kt(n.start,"explicit-key-ind"))if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(kt(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(zv(n.key)&&!kt(n.sep,"newline")){let o=_i(n.start),s=n.key,a=n.sep;a.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:s,sep:a}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(kt(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{let o=_i(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):kt(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);r||n.value?(e.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){r&&o.type!=="block-seq"&&kt(n.start,"explicit-key-ind")&&e.items.push({start:i}),this.stack.push(o);return}}}}yield*y(this.pop()),yield*y(this.step())}*blockSequence(e){let n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){let r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||kt(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){let r=this.startBlockValue(e);if(r){this.stack.push(r);return}}yield*y(this.pop()),yield*y(this.step())}*flowCollection(e){let n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*y(this.pop()),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):(yield*y(this.pop()),yield*y(this.step()))}else{let r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*y(this.pop()),yield*y(this.step());else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){let i=Fl(r),o=_i(i);qv(e);let s=e.end.splice(1,e.end.length);s.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*y(this.lineEnd(e))}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let n=Fl(e),r=_i(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r}]}}case"map-value-ind":{this.onKeyLine=!0;let n=Fl(e),r=_i(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*y(this.pop())))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*y(this.pop()),yield*y(this.step());break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*y(this.pop()))}}};function mM(t){let e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Ko||null,prettyErrors:e}}function rh(t,e={}){let{lineCounter:n,prettyErrors:r}=mM(e),i=new Qo(n?.addNewLine),o=new Wo(e),s=null;for(let a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Ot(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(s.errors.forEach(Hf(t,n)),s.warnings.forEach(Hf(t,n))),s}var ew=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(z(Yr),z($t))},e.\u0275dir=Je({type:e});let t=e;return t})(),yM=(()=>{let e=class e extends ew{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=to(e)))(o||e)}})(),e.\u0275dir=Je({type:e,features:[an]});let t=e;return t})(),oh=new j("");var vM={provide:oh,useExisting:ir(()=>Vn),multi:!0};function wM(){let t=cn()?cn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var bM=new j(""),Vn=(()=>{let e=class e extends ew{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!wM())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(z(Yr),z($t),z(bM,8))},e.\u0275dir=Je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&ne("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[io([vM]),an]});let t=e;return t})();var sh=new j(""),ah=new j("");function tw(t){return t!=null}function nw(t){return dr(t)?ve(t):t}function rw(t){let e={};return t.forEach(n=>{e=n!=null?_(_({},e),n):e}),Object.keys(e).length===0?null:e}function iw(t,e){return e.map(n=>n(t))}function CM(t){return!t.validate}function ow(t){return t.map(e=>CM(e)?e:n=>e.validate(n))}function _M(t){if(!t)return null;let e=t.filter(tw);return e.length==0?null:function(n){return rw(iw(n,e))}}function lh(t){return t!=null?_M(ow(t)):null}function DM(t){if(!t)return null;let e=t.filter(tw);return e.length==0?null:function(n){let r=iw(n,e).map(nw);return yc(r).pipe(K(rw))}}function ch(t){return t!=null?DM(ow(t)):null}function Wv(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function sw(t){return t._rawValidators}function aw(t){return t._rawAsyncValidators}function ih(t){return t?Array.isArray(t)?t:[t]:[]}function Vl(t,e){return Array.isArray(t)?t.includes(e):t===e}function Yv(t,e){let n=ih(e);return ih(t).forEach(i=>{Vl(n,i)||n.push(i)}),n}function Kv(t,e){return ih(e).filter(n=>!Vl(t,n))}var $l=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ch(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ei=class extends $l{get formDirective(){return null}get path(){return null}},Cr=class extends $l{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},jl=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},EM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},G2=U(_({},EM),{"[class.ng-submitted]":"isSubmitted"}),Ii=(()=>{let e=class e extends jl{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(Cr,2))},e.\u0275dir=Je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Ca("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[an]});let t=e;return t})(),lw=(()=>{let e=class e extends jl{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(Ei,10))},e.\u0275dir=Je({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Ca("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[an]});let t=e;return t})();var Zo="VALID",Ll="INVALID",Di="PENDING",Jo="DISABLED";function cw(t){return(Gl(t)?t.validators:t)||null}function IM(t){return Array.isArray(t)?lh(t):t||null}function uw(t,e){return(Gl(e)?e.asyncValidators:t)||null}function SM(t){return Array.isArray(t)?ch(t):t||null}function Gl(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function MM(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new x(1e3,"");if(!r[n])throw new x(1001,"")}function AM(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new x(1002,"")})}var Bl=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Zo}get invalid(){return this.status===Ll}get pending(){return this.status==Di}get disabled(){return this.status===Jo}get enabled(){return this.status!==Jo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Yv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Yv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Kv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Kv(e,this._rawAsyncValidators))}hasValidator(e){return Vl(this._rawValidators,e)}hasAsyncValidator(e){return Vl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Di,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Jo,this.errors=null,this._forEachChild(r=>{r.disable(U(_({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(U(_({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Zo,this._forEachChild(r=>{r.enable(U(_({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(U(_({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zo||this.status===Di)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jo:Zo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Di,this._hasOwnPendingAsyncValidator=!0;let n=nw(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?Jo:this.errors?Ll:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Di)?Di:this._anyControlsHaveStatus(Ll)?Ll:Zo}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=IM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=SM(this._rawAsyncValidators)}},Ul=class extends Bl{constructor(e,n,r){super(cw(n),uw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){AM(this,!0,e),Object.keys(e).forEach(r=>{MM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var es=new j("CallSetDisabledState",{providedIn:"root",factory:()=>ql}),ql="always";function TM(t,e){return[...e.path,t]}function uh(t,e,n=ql){dw(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),OM(t,e),RM(t,e),kM(t,e),NM(t,e)}function Qv(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xM(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Hl(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function NM(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function dw(t,e){let n=sw(t);e.validator!==null?t.setValidators(Wv(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=aw(t);e.asyncValidator!==null?t.setAsyncValidators(Wv(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Hl(e._rawValidators,i),Hl(e._rawAsyncValidators,i)}function xM(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=sw(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=aw(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Hl(e._rawValidators,r),Hl(e._rawAsyncValidators,r),n}function OM(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&fw(t,e)})}function kM(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&fw(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function fw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function RM(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function PM(t,e){t==null,dw(t,e)}function hw(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function FM(t){return Object.getPrototypeOf(t.constructor)===yM}function LM(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function pw(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Vn?n=o:FM(o)?r=o:i=o}),i||r||n||null}var VM={provide:Ei,useExisting:ir(()=>dh)},Xo=Promise.resolve(),dh=(()=>{let e=class e extends Ei{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Te,this.form=new Ul({},lh(r),ch(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Xo.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),uh(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Xo.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Xo.then(()=>{let i=this._findContainer(r.path),o=new Ul({});PM(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Xo.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Xo.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,LM(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(z(sh,10),z(ah,10),z(es,8))},e.\u0275dir=Je({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&ne("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[Le.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[io([VM]),an]});let t=e;return t})();function Zv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Jv(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ts=class extends Bl{constructor(e=null,n,r){super(cw(n),uw(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Jv(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Jv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $M={provide:Cr,useExisting:ir(()=>fh)},Xv=Promise.resolve(),fh=(()=>{let e=class e extends Cr{constructor(r,i,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new ts,this._registered=!1,this.name="",this.update=new Te,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=pw(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),hw(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Xv.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Ea(i);Xv.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?TM(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(z(Ei,9),z(sh,10),z(ah,10),z(oh,10),z(lr,8),z(es,8))},e.\u0275dir=Je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Le.None,"disabled","isDisabled"],model:[Le.None,"ngModel","model"],options:[Le.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[io([$M]),an,sr]});let t=e;return t})(),mw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Je({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var gw=new j(""),jM={provide:Cr,useExisting:ir(()=>ns)},ns=(()=>{let e=class e extends Cr{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new Te,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=pw(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&Qv(i,this,!1),uh(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}hw(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Qv(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(z(sh,10),z(ah,10),z(oh,10),z(gw,8),z(es,8))},e.\u0275dir=Je({type:e,selectors:[["","formControl",""]],inputs:{form:[Le.None,"formControl","form"],isDisabled:[Le.None,"disabled","isDisabled"],model:[Le.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[io([jM]),an,sr]});let t=e;return t})();var yw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=rr({});let t=e;return t})();var Si=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:es,useValue:r.callSetDisabledState??ql}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=rr({imports:[yw]});let t=e;return t})(),zl=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:gw,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:es,useValue:r.callSetDisabledState??ql}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=rr({imports:[yw]});let t=e;return t})();function BM(t,e){t&1&&(I(0,"div",8),E(1,"Edit the radio's configuration as a Yaml file."),M())}function UM(t,e){if(t&1&&(I(0,"div",9),E(1),M()),t&2){let n=O(2);de(),$e(" ",n.yamlError," ")}}function HM(t,e){if(t&1){let n=Ge();I(0,"div",1)(1,"div",2)(2,"h2"),E(3,"Yaml Editor"),M(),ge(4,BM,2,0,"div",3)(5,UM,2,1),I(6,"div",4),Oe(7,"textarea",5),M(),I(8,"div",6)(9,"button",7),ne("click",function(){ce(n);let i=O();return ue(i.cancel())}),E(10,"Cancel"),M(),I(11,"button",7),ne("click",function(){ce(n);let i=O();return ue(i.save())}),E(12,"Save"),M()()()()}if(t&2){let n=O();de(4),Se(4,n.yamlError?5:4),de(3),ln("formControl",n.yamlControl)}}var vw=(()=>{let e=class e{constructor(r){this.shown=!1,this.yamlControl=new ts("Uninitialized"),this.configSession=r.configSession}ngOnInit(){this.configSession.deviceTaskState$.subscribe(r=>{r=="yaml-edit"?(this.yamlControl.setValue(this.configSession.yamlText.getValue()),this.shown=!0):this.shown=!1}),this.configSession.yamlError$.subscribe(r=>{this.yamlError=r})}save(){this.yamlControl.value&&this.configSession.saveYaml(this.yamlControl.value)}cancel(){this.configSession.cancelYamlEdit()}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["yaml-sheet"]],standalone:!0,features:[je],decls:1,vars:1,consts:[["class","veil"],[1,"veil"],[1,"modal"],["class","info"],[1,"contents"],[3,"formControl"],[1,"controls"],[3,"click"],[1,"info"],[1,"error"]],template:function(i,o){i&1&&ge(0,HM,13,2,"div",0),i&2&&Se(0,o.shown?0:-1)},dependencies:[Si,Vn,Ii,zl,ns],styles:[".veil[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000040}.modal[_ngcontent-%COMP%]{position:fixed;top:10%;left:0%;width:100%;height:90%;background-color:#fff;padding:20px;border-radius:5px;display:flex;flex-direction:column;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{margin-top:10px}.contents[_ngcontent-%COMP%]{width:600px;flex:1}.contents[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100%;width:100%;box-sizing:border-box}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:1.5rem}.info[_ngcontent-%COMP%]{max-width:600px;font-size:12px;padding:0 2em .5em;box-sizing:border-box}.error[_ngcontent-%COMP%]{width:600px;font-size:12px;padding:.5em 2em;margin:0 0 .5em;box-sizing:border-box;background-color:#ffb6c1}"]});let t=e;return t})();function GM(t,e){var n=t.split(`
`),r=0;for(let i=0;i<n.length;i++){if(r+n[i].length+1>=e)return{line:i+1,column:e-r+1};r+=n[i].length+1}}var R=class extends Error{constructor(e,n){super(e),this.msg=e,this.location=n}toUserMessage(e){let n=GM(e,this.location);return n?`${this.msg} (at line ${n.line}, column ${n.column})`:`${this.msg} (at ${this.location})`}};var is=class{constructor(e){if(this.cg=e,e.name.length==0)throw new Error("A channel group must have a name");if(e.name.length>4)throw new Error("A channel group name can have at most 4 characters");if(e.model_name.length==0)throw new Error("A channel group must have a model name");if(e.model_name.length>6)throw new Error("A channel group model name can have at most 6 characters")}fillConfig(e){e[0]=this.cg.enable?1:0,e[1]=this.cg.enable_dsc?1:0,e[2]=this.cg.enable_atis?1:0,dn(e.subarray(3,7),this.cg.name),e[7]=255,dn(e.subarray(8,16),this.cg.model_name)}};function ww(t){return new is({name:un(t.subarray(3,7)),enable:t[0]!=0,enable_dsc:t[1]!=0,enable_atis:t[2]!=0,model_name:un(t.subarray(8,16))})}var qM=[{name:"HX890",startAddress:112,numChannelGroups:3,channelGroupBytes:16},{name:"HX870",startAddress:112,numChannelGroups:3,channelGroupBytes:16}],Wl=class{constructor(e){this.deviceModel=e,this.deviceConfig=qM.find(n=>n.name=e)}maybeVisitYamlNode(e,n,r,i){let o=e.get("channel_groups");if(!o)return!1;if(!this.deviceConfig)throw new R(`Unsupported configuration for ${this.deviceModel}`,e.range[0]);let s=this.deviceConfig;if(!(o instanceof he))throw new R("Unexpected channel groups node type",e.range[0]);try{var a=o.items.map((c,u)=>zM(c,i.channelGroups?.[u]))}catch(c){throw c instanceof Error?new R(c.toString(),e.range[0]):c}if(a.length!=this.deviceConfig.numChannelGroups)throw new R(`Unexpected number of channel groups (expected ${this.deviceConfig.numChannelGroups}, found ${a.length})`,e.range[0]);let l=new Uint8Array(this.deviceConfig.numChannelGroups*this.deviceConfig.channelGroupBytes);for(let[c,u]of a.entries())u.fillConfig(l.subarray(c*this.deviceConfig.channelGroupBytes,(c+1)*this.deviceConfig.channelGroupBytes));return r.channelGroups=a,n.prepareWrite("channel_groups",this.deviceConfig.startAddress,l),!0}addRangesToRead(e){this.deviceConfig&&e.addRange("channel_groups",this.deviceConfig.startAddress,this.deviceConfig.startAddress+this.deviceConfig.numChannelGroups*this.deviceConfig.channelGroupBytes)}updateConfig(e,n,r){if(!this.deviceConfig)return;let i=e.get("channel_groups");if(!i)return;let o=[];for(let l=0;l<this.deviceConfig.numChannelGroups;l++){let c=ww(i.slice(l*this.deviceConfig.channelGroupBytes,(l+1)*this.deviceConfig.channelGroupBytes));o.push(c)}n.channelGroups=o;let s=o.map(l=>({[l.cg.name]:{enable:l.cg.enable,enable_dsc:l.cg.enable_dsc,enable_atis:l.cg.enable_atis,model_name:l.cg.model_name}})),a=r.createNode({channel_groups:s});a.commentBefore=" Channel groups",a.spaceBefore=!0,r.add(a)}};function zM(t,e){if(!(t instanceof ie&&t.items.length==1&&t.items[0].key instanceof S&&t.items[0].value instanceof ie))throw new R("Unexpected channel group node type",t.range[0]);let n=t.items[0].key.value,r=!0,i=!0,o=!1,s,a=t.items[0].value;for(let l of a.items){if(!(l.key instanceof S&&l.value instanceof S))throw new R("Unexpected channel group property type",a.range[0]);if(typeof l.key.value!="string")throw new R("Unexpected channel group property key",a.range[0]);if(l.key.value=="enable"){if(typeof l.value.value!="boolean")throw new R("Channel group enable property must be boolean",a.range[0]);r=l.value.value}else if(l.key.value=="enable_dsc"){if(typeof l.value.value!="boolean")throw new R("Channel group enable_dsc property must be boolean",a.range[0]);i=l.value.value}else if(l.key.value=="enable_atis"){if(typeof l.value.value!="boolean")throw new R("Channel group enable_atis property must be boolean",a.range[0]);o=l.value.value}else if(l.key.value=="model_name"){if(typeof l.value.value!="string")throw new R("Channel group model_name property must be a string",a.range[0]);s=l.value.value}else throw new R(`Unknown channel group property ${l.key.value}`,a.range[0])}if(!s)if(e?.cg.model_name)s=e.cg.model_name;else throw new R("Missing model_name for channel group",t.range[0]);return new is({name:n,enable:r,enable_dsc:i,enable_atis:o,model_name:s})}var WM=[{name:"HX890",individualMmsiNamesAddress:17664,individualMmsiNumbersAddress:16896,individualMmsiNum:100,groupMmsiNamesAddress:20736,groupMmsiNumbersAddress:20480,groupMmsiNum:20},{name:"HX870",individualMmsiNamesAddress:14128,individualMmsiNumbersAddress:13568,individualMmsiNum:100,groupMmsiNamesAddress:16e3,groupMmsiNumbersAddress:15872,groupMmsiNum:20}],Yl=class{constructor(e){let n=WM.find(r=>r.name==e);if(!n)throw new Error(`Unsupported device ${e}`);this.deviceConfig=n,this.individualMmsiNamesSize=Et*this.deviceConfig.individualMmsiNum,this.individualMmsiNumbersSize=It(this.deviceConfig.individualMmsiNum),this.groupMmsiNamesSize=Et*this.deviceConfig.groupMmsiNum,this.groupMmsiNumbersSize=It(this.deviceConfig.groupMmsiNum)}maybeVisitYamlNode(e,n,r){return this.maybeVisitYamlNodeIndividual(e,n,r)||this.maybeVisitYamlNodeGroup(e,n,r)}maybeVisitYamlNodeIndividual(e,n,r){let i=e.get("dsc_directory");if(i&&i instanceof he){r.mmsiDirectory||(r.mmsiDirectory=new On(this.deviceConfig.individualMmsiNum,this.deviceConfig.groupMmsiNum)),r.mmsiDirectory.individualMmsis=i.items.map(a=>{if(a instanceof ie&&a.items.length==1&&a.items[0].key instanceof S&&a.items[0].value instanceof S){let l=a.items[0].key.value,c=a.items[0].value.value;if(typeof l=="string"&&typeof c=="string")return new xn(l,c)}throw new R("Unknown node type",a.range[0])});let o=new Uint8Array(this.individualMmsiNamesSize),s=new Uint8Array(this.individualMmsiNumbersSize);return r.mmsiDirectory.fillIndividualConfig(o,s),n.prepareWrite("individual_mmsi_names",this.deviceConfig.individualMmsiNamesAddress,o),n.prepareWrite("individual_mmsi_numbers",this.deviceConfig.individualMmsiNumbersAddress,s),!0}return!1}maybeVisitYamlNodeGroup(e,n,r){let i=e.get("group_directory");if(i&&i instanceof he){r.mmsiDirectory||(r.mmsiDirectory=new On(this.deviceConfig.individualMmsiNum,this.deviceConfig.groupMmsiNum)),r.mmsiDirectory.groupMmsis=i.items.map(a=>{if(a instanceof ie&&a.items.length==1&&a.items[0].key instanceof S&&a.items[0].value instanceof S){let l=a.items[0].key.value,c=a.items[0].value.value;if(typeof l=="string"&&typeof c=="string")return new xn(l,c)}throw new Error(`Unknown node type at ${a.range[0]}`)});let o=new Uint8Array(this.groupMmsiNamesSize),s=new Uint8Array(this.groupMmsiNumbersSize);return r.mmsiDirectory.fillGroupConfig(o,s),n.prepareWrite("group_mmsi_names",this.deviceConfig.groupMmsiNamesAddress,o),n.prepareWrite("group_mmsi_numbers",this.deviceConfig.groupMmsiNumbersAddress,s),!0}return!1}addRangesToRead(e){if(!this.deviceConfig)return;let n=this.deviceConfig.individualMmsiNum,r=Et*n,i=It(n),o=this.deviceConfig.groupMmsiNum,s=Et*o,a=It(o);e.addRange("individual_mmsi_names",this.deviceConfig.individualMmsiNamesAddress,this.deviceConfig.individualMmsiNamesAddress+r),e.addRange("individual_mmsi_numbers",this.deviceConfig.individualMmsiNumbersAddress,this.deviceConfig.individualMmsiNumbersAddress+i),e.addRange("group_mmsi_names",this.deviceConfig.groupMmsiNamesAddress,this.deviceConfig.groupMmsiNamesAddress+s),e.addRange("group_mmsi_numbers",this.deviceConfig.groupMmsiNumbersAddress,this.deviceConfig.groupMmsiNumbersAddress+a)}updateConfig(e,n,r){let i=new On(this.deviceConfig.individualMmsiNum,this.deviceConfig.groupMmsiNum);i.initFromConfig(e.get("individual_mmsi_names"),e.get("individual_mmsi_numbers"),e.get("group_mmsi_names"),e.get("group_mmsi_numbers")),n.mmsiDirectory=i;let o=i.individualMmsis.map(c=>({[c.name]:c.number})),s=r.createNode({dsc_directory:o});s.commentBefore=` DSC directory for individual calls. Wrap MMSIs in quotes.
 Example:
 - dsc_directory:
     - Alpha: "123456789"
     - Bravo: "987654321"`,s.spaceBefore=!0,r.add(s);let a=i.groupMmsis.map(c=>({[c.name]:c.number})),l=r.createNode({group_directory:a});l.commentBefore=` DSC directory for group calls. Wrap MMSIs in quotes.
 Example:
 - group_directory:
     - Golf: "012345678"
     - Foxtrot: "098765432"`,l.spaceBefore=!0,r.add(l)}};var YM=[{name:"HX890",startAddress:50944,numRoutes:20,numWaypointsPerRoute:31,routeBytes:64},{name:"HX870",startAddress:23552,numRoutes:20,numWaypointsPerRoute:16,routeBytes:32}],Kl=class{constructor(e){this.deviceModel=e,this.deviceConfig=YM.find(n=>n.name=e)}maybeVisitYamlNode(e,n,r,i){let o=e.get("routes");if(!o)return!1;if(!this.deviceConfig)throw new R(`Routes not supported on ${this.deviceModel}`,e.range[0]);let s=this.deviceConfig;if(!(o instanceof he))throw new R("Unexpected routes node type",e.range[0]);let a=o.items.map(c=>JM(c,r,s.numWaypointsPerRoute)).sort((c,u)=>c.route.name.localeCompare(u.route.name)),l=new Uint8Array(s.routeBytes*s.numRoutes);l.fill(255);for(let[c,u]of a.entries())u.fillConfig(l,s.routeBytes*c,s.numWaypointsPerRoute,s.routeBytes);return n.prepareWrite("routes",s.startAddress,l),!0}addRangesToRead(e){this.deviceConfig&&e.addRange("routes",this.deviceConfig.startAddress,this.deviceConfig.startAddress+this.deviceConfig.routeBytes*this.deviceConfig.numRoutes)}updateConfig(e,n,r){if(!this.deviceConfig)return;let i=e.get("routes");if(!i)return;if(!n.waypoints)throw new Error("Waypoints must be parsed before routes.");let o=[];for(let c=0;c<this.deviceConfig.numRoutes;c++){let u=c*this.deviceConfig.routeBytes,d=Xa(i.subarray(u,u+this.deviceConfig.routeBytes),this.deviceConfig.numWaypointsPerRoute);d&&o.push(d)}if(o.length==0)return;let s=n.waypoints,a=o.map(c=>({[c.route.name]:QM(c.route.waypointIds.map(u=>KM(u,s)))})),l=r.createNode({routes:a});l.spaceBefore=!0,l.commentBefore=`
 Routes. Each route is a list of waypoints, from first to last.
 This section must come after waypoints.`,r.add(l)}};function KM(t,e){let n=e.find(r=>r.wp.id==t);return n?n.wp.name:`? (${t})`}function QM(t){return t.slice(1).concat(t.slice(0,1))}function ZM(t){return t.slice(-1).concat(t.slice(0,-1))}function JM(t,e,n){if(!(t instanceof ie&&t.items.length==1&&t.items[0].key instanceof S&&t.items[0].value instanceof he))throw new R("Unexpected route node type",t.range[0]);if(!e.waypoints)throw new R("Waypoints must be declared before routes",t.range[0]);let r=t.items[0].key.value;if(r.length>15)throw new R(`Route name too long "${r}"`,t.range[0]);let i=t.items[0].value;if(i.items.length==0)throw new R(`No waypoints in route "${r}"`,t.range[0]);if(i.items.length>n)throw new R(`Too many waypoints in route "${r}" (found ${i.items.length}, max is ${n})`,t.range[0]);let o=[];for(let s of i.items){if(!(s instanceof S&&typeof s.value=="string"))throw new R("Unexpected route waypoint type",s.range[0]);let a=s.value,l=e.waypoints.filter(c=>c.wp.name==a);if(!l||l.length==0)throw new R(`Waypoint ${a} not found`,s.range[0]);if(l.length>1)throw new R(`Multiple waypoints named ${a}`,s.range[0]);o.push(l[0].wp.id)}return new Nn({name:r,waypointIds:ZM(o)})}var XM=[{name:"HX890",waypointsStartAddress:55040,waypointsNumber:250},{name:"HX870",waypointsStartAddress:17152,waypointsNumber:200}],Ql=class{constructor(e){this.deviceModel=e,this.deviceConfig=XM.find(n=>n.name==e)}maybeVisitYamlNode(e,n,r,i){let o=e.get("waypoints");if(!o)return!1;if(!this.deviceConfig)throw new R(`Waypoints not supported on ${this.deviceModel}`,e.range[0]);if(!(o instanceof he))throw new R("Unexpected waypoints node type",e.range[0]);let s=o.items.map(eA);tA(s,i.waypoints);let a=new Uint8Array(Tn*this.deviceConfig.waypointsNumber);return a.fill(255),Cf(s,this.deviceConfig.waypointsStartAddress,a),n.prepareWrite("waypoints",this.deviceConfig.waypointsStartAddress,a),r.waypoints=s,!0}addRangesToRead(e){this.deviceConfig&&e.addRange("waypoints",this.deviceConfig.waypointsStartAddress,this.deviceConfig.waypointsStartAddress+Tn*this.deviceConfig.waypointsNumber)}updateConfig(e,n,r){let i=e.get("waypoints");if(!i||!this.deviceConfig)return;let o=[];for(var s=0;s<this.deviceConfig.waypointsNumber;s+=1){let c=s*32,u=Za(i.subarray(c,c+32),this.deviceConfig.waypointsStartAddress+c);u&&o.push(u)}n.waypoints=o;let a=o.map(c=>({[c.wp.name]:`${c.getLat(!0)} ${c.getLon(!0)}`})),l=r.createNode({waypoints:a});l.commentBefore=`
 Waypoints. Example:
 - waypoints
     # Coordinates in degrees and decimal minutes
     - Marina: 33N57.8490 118W27.8290
     # Coordinates in decimal degrees
     - Marina: 33.84905 -118.27829`,l.spaceBefore=!0,r.add(l)}};function eA(t){if(!(t instanceof ie&&t.items.length==1&&t.items[0].key instanceof S&&t.items[0].value instanceof S))throw new R("Unexpected waypoint node type",t.range[0]);let e=t.items[0].key.value,n=t.items[0].value.value;if(typeof e!="string")throw new R(`Unexpected waypoint name type ${typeof n}`,t.range[0]);if(e.length>15)throw new R(`Waypoint name too long "${e}"`,t.range[0]);if(typeof n!="string")throw new R(`Unexpected coordinate type ${typeof n}`,t.range[0]);let r=n.split(" ").map(s=>s.trim());if(r.length!=2)throw new R(`Expected two coordinates, got ${r.length}`,t.range[0]);let i=li(r[0]);if(!i)throw new R(`Unable to parse latitude ${i}`,t.range[0]);let o=ci(r[1]);if(!o)throw new R(`Unable to parse latitude ${o}`,t.range[0]);return new An({id:-1,name:e,lat_deg:i.lat_deg,lat_dir:i.lat_dir,lat_min:i.lat_min,lon_deg:o.lon_deg,lon_dir:o.lon_dir,lon_min:o.lon_min})}function tA(t,e){let n=new Set;for(let r of t){let i=e?.find(o=>o.wp.name==r.wp.name);i&&!n.has(i.wp.id)?(r.wp.id=i.wp.id,n.add(r.wp.id)):r.wp.id=-1}for(let r of t)if(r.wp.id==-1){let i;for(i=1;i<255&&n.has(i);i+=1);r.wp.id=i,n.add(i)}}var ph=[Yl,Ql,Kl,Wl];var Zl=class{constructor(e){this.configProtocol=e,this.data=new Map}prepareWrite(e,n,r){this.data.set(e,[n,r])}write(e){return N(this,null,function*(){let n=0;this.data.forEach(([i,o])=>n+=o.length);let r=0;for(let[i,[o,s]]of this.data)yield this.configProtocol.writeConfigMemory(s,o,a=>{e((r+a)/n)}),r+=s.length})}};var Jl=class{constructor(e){this._configProtocol=e,this.config=new pe({}),this.yamlText=new pe(""),this._deviceTaskState=new pe("idle"),this.deviceTaskState$=this._deviceTaskState.asObservable(),this._progress=new pe(0),this.progress$=this._progress.asObservable(),this._yamlError=new pe(void 0),this.yamlError$=this._yamlError.asObservable()}reset(e,n){this.config.next({}),this._deviceTaskState.next("idle"),this._configProtocol=n,this._deviceConfig=e}disconnect(){this.config.next({}),this._deviceTaskState.next("idle")}noopConfigCallback(){return()=>this.config.next(this.config.getValue())}readNavInfo(){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't read waypoints from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("nav-read"),this._progress.next(0);let e=64,n=this._deviceConfig.waypointsNumber,r=Tn*n,i=this._deviceConfig.routesNumber,o=this._deviceConfig.routeBytes*i,s=this._deviceConfig.waypointsStartAddress,a=yield this._configProtocol.readConfigMemory(s,r,m=>this._progress.next(m/(r+o))),l=[];for(var c=0;c<n;c+=1){let m=c*32,p=Za(a.subarray(m,m+32),s+m);p&&l.push(p)}let u=this._deviceConfig.routesStartAddress,d=yield this._configProtocol.readConfigMemory(u,o,m=>this._progress.next((r+m)/(r+o))),f=[];for(var h=0;h<i;h++){let m=h*this._deviceConfig.routeBytes,p=Xa(d.subarray(m,m+this._deviceConfig.routeBytes),this._deviceConfig.numWaypointsPerRoute);p&&f.push(p)}this.config.next(U(_({},this.config.getValue()),{waypoints:l,draftWaypoints:new ui(l,f,this._deviceConfig,this.noopConfigCallback())})),this._deviceTaskState.next("nav-edit")})}writeNavInfoDraft(){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="nav-edit")throw new Error(`Can't write draft from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("nav-save"),this._progress.next(0);let e=this.config.getValue().draftWaypoints;if(!e){console.log("No draft waypoints"),this._deviceTaskState.next("idle");return}let n=e?.getBinaryWaypointData(this._deviceConfig.waypointsStartAddress);if(!n)throw new Error("Error getting draft binary data");let r=e?.getBinaryRouteData();if(!r)throw new Error("Error getting route binary data");yield this._configProtocol.writeConfigMemory(n,this._deviceConfig.waypointsStartAddress,i=>this._progress.next(i/(n.length+r.length))),yield this._configProtocol.writeConfigMemory(r,this._deviceConfig.routesStartAddress,i=>this._progress.next((n.length+i)/(n.length+r.length))),this.config.next(U(_({},this.config.getValue()),{waypoints:e.waypoints,draftWaypoints:new ui(e.waypoints,[],this._deviceConfig,this.noopConfigCallback())})),this._deviceTaskState.next("idle")})}cancelNavInfoDraft(){if(this._deviceTaskState.getValue()!="nav-edit")throw new Error(`Can't cancel draft from state ${this._deviceTaskState.getValue()}`);let e=this.config.getValue().waypoints;if(!e){console.log("No waypoints yet"),this._deviceTaskState.next("idle");return}this.config.next(U(_({},this.config.getValue()),{draftWaypoints:new ui(e,[],this._deviceConfig,this.noopConfigCallback())})),this._deviceTaskState.next("idle")}readMmsiDirectory(){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't read MMSI directory from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("mmsi-read"),this._progress.next(0);let{individualMmsiNamesSize:e,individualMmsiNumbersSize:n,groupMmsiNamesSize:r,groupMmsiNumbersSize:i,totalSize:o}=this.getMmsiMemoryLayout(),s=yield this._configProtocol.readConfigMemory(this._deviceConfig.individualMmsiNamesAddress,e,f=>this._progress.next(f/o)),a=e,l=yield this._configProtocol.readConfigMemory(this._deviceConfig.individualMmsiNumbersAddress,n,f=>this._progress.next((a+f)/o));a+=n;let c=yield this._configProtocol.readConfigMemory(this._deviceConfig.groupMmsiNamesAddress,r,f=>this._progress.next((a+f)/o));a+=r;let u=yield this._configProtocol.readConfigMemory(this._deviceConfig.groupMmsiNumbersAddress,i,f=>this._progress.next((a+f)/o)),d=new On(this._deviceConfig.individualMmsiNum,this._deviceConfig.groupMmsiNum);d.initFromConfig(s,l,c,u),this.config.next(U(_({},this.config.getValue()),{mmsiDirectory:d})),this._deviceTaskState.next("mmsi-edit")})}getMmsiMemoryLayout(){let e=this._deviceConfig.individualMmsiNum,n=Et*e,r=It(e),i=this._deviceConfig.groupMmsiNum,o=Et*i,s=It(i);return{individualMmsiNamesSize:n,individualMmsiNumbersSize:r,groupMmsiNamesSize:o,groupMmsiNumbersSize:s,totalSize:n+r+o+s}}writeMmsiDirectory(){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="mmsi-edit")throw new Error(`Can't read MMSI directory from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("mmsi-save"),this._progress.next(0);let{individualMmsiNamesSize:e,individualMmsiNumbersSize:n,groupMmsiNamesSize:r,groupMmsiNumbersSize:i,totalSize:o}=this.getMmsiMemoryLayout(),s=new Uint8Array(e),a=new Uint8Array(n),l=new Uint8Array(r),c=new Uint8Array(i);this.config.getValue().mmsiDirectory.fillConfig(s,a,l,c),yield this._configProtocol.writeConfigMemory(s,this._deviceConfig.individualMmsiNamesAddress,d=>this._progress.next(d/o));let u=e;yield this._configProtocol.writeConfigMemory(a,this._deviceConfig.individualMmsiNumbersAddress,d=>this._progress.next((u+d)/o)),u+=n,yield this._configProtocol.writeConfigMemory(l,this._deviceConfig.groupMmsiNamesAddress,d=>this._progress.next((u+d)/o)),u+=r,yield this._configProtocol.writeConfigMemory(c,this._deviceConfig.groupMmsiNumbersAddress,d=>this._progress.next((u+d)/o)),this._deviceTaskState.next("idle")})}cancelMmsiDirectory(){this._deviceTaskState.next("idle")}readGpsLog(){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't start reading GPS from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("gpslog-read"),this._progress.next(0),yield this._configProtocol.waitForGps();let e=[];this._configProtocol.sendMessage("$PMTK",["622","1"]);let n=yield this._configProtocol.receiveMessage();if(n.type!="$PMTK"||n.args.length!=3||n.args[0]!="LOX"||n.args[1]!="0")throw new Error(`Unexpected log header ${n.toString()}`);let r=Number(n.args[2]),i=0,o=yield this._configProtocol.receiveMessage();for(;!(o.args.length==2&&o.args[1]=="2");){if(o.type!="$PMTK"||o.args.length<2||o.args[0]!="LOX"||o.args[1]!="1")throw new Error(`Unexpected log line ${o.toString()}`);if(Number(o.args[2])!=i)throw new Error(`Unexpected log line number ${Number(o.args[2])} (was expecting ${i})`);let c=o.args.slice(3).map(za);for(let u of c)e.push(u);this._progress.next(i/r),i+=1,o=yield this._configProtocol.receiveMessage()}i!=r&&console.log(`Got ${i} lines, was expecting ${r}. Continuing anyway.`);let s=e.reduce((c,u)=>c+u.length,0),a=new Uint8Array(s),l=0;for(let c of e)a.set(c,l),l+=c.length;if(n=yield this._configProtocol.receiveMessage(),n.type!="$PMTK"||n.args.length!=3||n.args[0]!="001"||n.args[1]!="622"||n.args[2]!="3")throw new Error(`Unexpected ReadLog acknowledgement ${n.toString()}`);this.config.next(U(_({},this.config.getValue()),{gpslog:a})),this._deviceTaskState.next("idle")})}startYaml(){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't start Yaml from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("yaml-read"),this._progress.next(0),this._yamlError.next(""),this.config.next({});let e=ph.map(s=>new s(this._deviceConfig.name)),n=new il(this._configProtocol);e.forEach(s=>s.addRangesToRead(n));let r=yield n.read(s=>this._progress.next(s)),i=new zt;i.contents=i.createNode([]);let o={};e.forEach(s=>s.updateConfig(r,o,i)),this.config.next(o),this.yamlText.next(i.toString({}).trim()),this._deviceTaskState.next("yaml-edit")})}saveYaml(e){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="yaml-edit")throw new Error(`Can't save Yaml from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("yaml-save"),this.yamlText.next(e),this._progress.next(0);let n=rh(e),r=ph.map(a=>new a(this._deviceConfig.name)),i=new Zl(this._configProtocol),o={},s=this.config.getValue();try{Ke(n,{Alias(a,l,c){throw new R("Unexpected alias",l.range[0])},Pair(a,l,c){throw new Error(`Unexpected pair ${l}`)},Scalar(a,l,c){throw new R(`Unexpected scalar ${l.value}`,l.range[0])},Seq(a,l,c){if(c.length!=1)throw new R("Unexpected sequence",l.range[0])},Map(a,l,c){if(c.length!=2)throw new R(`Error processing ${l}`,l.range[0]);let u=!1;for(let d of r)if(u=d.maybeVisitYamlNode(l,i,o,s),u)break;if(!u)throw new R(`Unknown node ${l.items[0].key}`,l.range[0]);return Ke.SKIP}})}catch(a){this._deviceTaskState.next("yaml-edit"),a instanceof R?this._yamlError.next(a.toUserMessage(e)):this._yamlError.next(a.toString());return}yield i.write(a=>{this._progress.next(a)}),this._deviceTaskState.next("idle")})}cancelYamlEdit(){this._deviceTaskState.next("idle")}readDat(){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't start reading Dat from state ${this._deviceTaskState.getValue()}`);let e;if(this._configProtocol instanceof hi)e=this._configProtocol.datImage;else{if(!this._deviceConfig)throw new Error("No device config");let n=this._deviceConfig;this._deviceTaskState.next("dat-read"),this._progress.next(0),e=yield this._configProtocol.readConfigMemory(0,n.datLength,r=>this._progress.next(r/n.datLength))}return this._deviceTaskState.next("idle"),e})}restoreDat(e){return N(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't restore DAT from state ${this._deviceTaskState.getValue()}`);if(!(this._configProtocol instanceof fi))throw new Error("Can't restore DAT file to a DAT file.");if(!this._deviceConfig)throw new Error("Missing device config.");let n=this._deviceConfig;if(e.length!=n.datLength)throw new Error(`DAT file does not have the expected size (expected ${n.datLength}, found ${e.length})`);if(!n.datMagic.every((r,i)=>e[i]==r))throw new Error("DAT file does not have the expected magic");this._progress.next(0),this._deviceTaskState.next("dat-restore"),yield this._configProtocol.writeConfigMemory(e,0,r=>this._progress.next(r/n.datLength)),this._deviceTaskState.next("idle")})}};var Mi=function(t){return t[t.Unknown=0]="Unknown",t[t.CP=1]="CP",t[t.NMEA=2]="NMEA",t}(Mi||{}),mh=[{name:"HX890",usbFilter:{usbVendorId:9898,usbProductId:30},waypointsStartAddress:55040,waypointsNumber:250,routesStartAddress:50944,routesNumber:20,numWaypointsPerRoute:31,routeBytes:64,individualMmsiNamesAddress:17664,individualMmsiNumbersAddress:16896,individualMmsiNum:100,groupMmsiNamesAddress:20736,groupMmsiNumbersAddress:20480,groupMmsiNum:20,datLength:65536,datMagic:new Uint8Array([3,122])},{name:"HX870",usbFilter:{usbVendorId:9898,usbProductId:16},waypointsStartAddress:17152,waypointsNumber:200,routesStartAddress:23552,routesNumber:20,numWaypointsPerRoute:16,routeBytes:32,individualMmsiNamesAddress:14128,individualMmsiNumbersAddress:13568,individualMmsiNum:100,groupMmsiNamesAddress:16e3,groupMmsiNumbersAddress:15872,groupMmsiNum:20,datLength:32768,datMagic:new Uint8Array([3,103])}],Kt=(()=>{let e=class e{constructor(){this._connectionState=new pe("disconnected"),this.connectionState$=this._connectionState.asObservable(),this.encoder=new TextEncoder,this.decoder=new TextDecoder("utf-8"),this.mode=Mi.Unknown,this._configProtocol=new fi(this),this.configSession=new Jl(this._configProtocol),this.serial=navigator.serial}getConnectionState(){return this._connectionState.getValue()}connectUsb(){return N(this,null,function*(){if(!this.serial)throw new Error("This browser doesn't support the Webserial API. Use Chrome, Edge, or Opera.");if(this.getConnectionState()!="disconnected")throw new Error(`Cannot connect from state: ${this.getConnectionState()}`);try{this._connectionState.next("usb-connecting"),this.port=yield this.serial.requestPort({filters:mh.map(o=>o.usbFilter)});let r=this.port.getInfo(),i=mh.find(o=>o.usbFilter.usbProductId==r.usbProductId&&o.usbFilter.usbVendorId==r.usbVendorId);if(console.log(`Found device ${i.name}`),this.port.addEventListener("disconnect",o=>this.disconnect()),yield this.port.open({baudRate:9600}),this._streamReader=this.port?.readable?.getReader(),this.reader=new Qa(this._streamReader),this.writer=this.port?.writable?.getWriter(),yield this.detectDeviceMode(),this.mode!=Mi.CP)throw new Error("Device must be in CP mode");this._connectionState.next("usb-connected"),this.configSession.reset(i,this._configProtocol),console.log("Connected")}catch(r){throw yield this.disconnect(),r}})}disconnect(){return N(this,null,function*(){if(this._connectionState.getValue()=="dat-connected"){this._connectionState.next("disconnected");return}try{yield this.writer?.close(),yield this._streamReader?.cancel(),this._streamReader?.releaseLock(),this.writer?.releaseLock(),yield this.port?.close(),yield this.port?.forget(),this.port=void 0,this._streamReader=void 0,this.reader=void 0,this.writer=void 0,this.mode=Mi.Unknown,this.configSession.config.next({}),console.log("Disconnected")}catch(r){this.port=void 0,console.error(`Error while disconnecting: ${r}`)}this.configSession.disconnect(),this._connectionState.next("disconnected")})}write(r){return N(this,null,function*(){yield this.writer?.write(this.encoder.encode(r))})}read(r){return N(this,null,function*(){return yield this.reader.read(r)})}readline(){return N(this,null,function*(){return yield this.reader.readline()})}flushInput(){this.reader&&this.reader.flush()}detectDeviceMode(){return N(this,null,function*(){yield this.write("P?");let r=yield this.read(1);r[0]=="@"?this.mode=Mi.CP:(r[0]=="P"||r[0]=="$")&&(this.mode=Mi.NMEA),console.log(`Detected mode ${this.mode}`)})}connectDat(r){if(this.getConnectionState()!="disconnected")throw new Error(`Cannot load DAT from state: ${this.getConnectionState()}`);let i=mh.find(o=>r.length==o.datLength&&o.datMagic.every((s,a)=>r[a]==s));if(!i)throw new Error(`Unknown DAT file format (length ${r.length}, magic ${r.subarray(0,2)}`);console.log(`Detected DAT file for ${i.name}`),this.configSession.reset(i,new hi(r)),this._connectionState.next("dat-connected")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading GPS log (",n.progressPct,"%) ")}}function rA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading waypoints (",n.progressPct,"%) ")}}function iA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Saving waypoints (",n.progressPct,"%) ")}}function oA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading MMSI directory (",n.progressPct,"%) ")}}function sA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Saving MMSI directory (",n.progressPct,"%) ")}}function aA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading for YAML edit (",n.progressPct,"%) ")}}function lA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Saving YAML configuration (",n.progressPct,"%) ")}}function cA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading DAT configuration (",n.progressPct,"%) ")}}function uA(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Restoring DAT configuration (",n.progressPct,"%) ")}}function dA(t,e){if(t&1&&(I(0,"div",1)(1,"div",2)(2,"div",3),ge(3,nA,1,1)(4,rA,1,1)(5,iA,1,1)(6,oA,1,1)(7,sA,1,1)(8,aA,1,1)(9,lA,1,1)(10,cA,1,1)(11,uA,1,1),M(),Oe(12,"div",4),M()()),t&2){let n=O();de(3),Se(3,n.state=="gpslog-read"?3:n.state=="nav-read"?4:n.state=="nav-save"?5:n.state=="mmsi-read"?6:n.state=="mmsi-save"?7:n.state=="yaml-read"?8:n.state=="yaml-save"?9:n.state=="dat-read"?10:n.state=="dat-restore"?11:-1)}}var gh=(()=>{let e=class e{constructor(r){this.state="idle",this.progressPct=0,this.configProtocol=r.configSession}ngOnInit(){this.configProtocol.deviceTaskState$.subscribe(r=>this.state=r),this.configProtocol.progress$.subscribe(r=>this.progressPct=Math.floor(r*100))}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["busy-state-modal"]],standalone:!0,features:[je],decls:1,vars:1,consts:[["class","veil"],[1,"veil"],[1,"modal"],[1,"message"],[1,"spinner"]],template:function(i,o){i&1&&ge(0,dA,13,1,"div",0),i&2&&Se(0,o.state=="gpslog-read"||o.state=="nav-read"||o.state=="nav-save"||o.state=="mmsi-read"||o.state=="mmsi-save"||o.state=="yaml-read"||o.state=="yaml-save"||o.state=="dat-read"||o.state=="dat-restore"?0:-1)},styles:[".veil[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border-radius:5px;min-width:200px;display:flex;flex-direction:column;justify-content:center;align-items:center}.spinner[_ngcontent-%COMP%]{width:64px;height:64px;position:relative;border-radius:50%;border:2px solid transparent;border-top-color:#aaa;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.message[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}"]});let t=e;return t})();function fA(t,e){t&1&&E(0," Edit waypoint ")}function hA(t,e){t&1&&E(0," Add waypoint ")}function pA(t,e){if(t&1&&(I(0,"div",13),E(1),M()),t&2){let n=O(2);de(),Jr(n.errorMsg)}}function mA(t,e){if(t&1){let n=Ge();I(0,"div",1)(1,"h2"),ge(2,fA,1,0)(3,hA,1,0),M(),ge(4,pA,2,1,"div",2),I(5,"form",3,4),ne("ngSubmit",function(){ce(n);let i=gd(6),o=O();return ue(o.onSubmit(i))}),I(7,"div",5),E(8," Name: "),I(9,"input",6),ro("ngModelChange",function(i){ce(n);let o=O();return _a(o.wpFormData.name,i)||(o.wpFormData.name=i),ue(i)}),M()(),I(10,"div",5),E(11," Latitude: "),I(12,"input",7),ro("ngModelChange",function(i){ce(n);let o=O();return _a(o.wpFormData.lat,i)||(o.wpFormData.lat=i),ue(i)}),M()(),I(13,"div",5),E(14," Longitude: "),I(15,"input",8),ro("ngModelChange",function(i){ce(n);let o=O();return _a(o.wpFormData.lon,i)||(o.wpFormData.lon=i),ue(i)}),M()(),I(16,"div",9),E(17," Supported formats for latitude / longitude: "),I(18,"li"),E(19,"Degrees and decimal minutes (DMM), e.g. 12 N 34.5678, 12\xB0 34.5678' N"),M(),I(20,"li"),E(21,`Degrees, minutes, seconds (DMS), e.g. 12\xB0 34' 34.1" N`),M(),I(22,"li"),E(23,"Decimal degrees (DD), e.g. 12.57613 (number sign indicates direction)"),M()(),I(24,"div",10)(25,"button",11),ne("click",function(){ce(n);let i=gd(6),o=O();return ue(o.onCancel(i))}),E(26,"Cancel"),M(),I(27,"button",12),E(28,"Done"),M()()()()}if(t&2){let n=O();de(2),Se(2,n.editing?2:3),de(2),Se(4,n.errorMsg?4:-1),de(5),no("ngModel",n.wpFormData.name),de(3),no("ngModel",n.wpFormData.lat),de(3),no("ngModel",n.wpFormData.lon)}}var yh=(()=>{let e=class e{constructor(){this.editing=!1,this.shown=!0}ngOnInit(){}onSubmit(r){if(!this.wpFormData){this.shown=!1;return}var i=this.wpFormData;try{let o=Ja(i)}catch(o){this.errorMsg=o.toString();return}this.shown=!1,this.wpFormData=void 0,this.errorMsg=void 0,console.log(`Submitted form ${r}`),this.callbackFn&&this.callbackFn(i)}onCancel(r){return console.log(`Canceled form ${r}`),this.shown=!1,this.wpFormData=void 0,this.errorMsg=void 0,!1}editWaypoint(r,i){this.shown=!0,this.editing=!0,this.wpFormData={name:r.wp.name,lat:r.getLat(),lon:r.getLon()},this.callbackFn=i}createWaypoint(r){this.editing=!1,this.wpFormData={name:"",lat:"",lon:""},this.shown=!0,this.callbackFn=r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ve({type:e,selectors:[["waypoint-editor"]],standalone:!0,features:[je],decls:1,vars:1,consts:[["class","dialog"],[1,"dialog"],["class","error"],[3,"ngSubmit"],["f","ngForm"],[1,"input"],["type","text","name","wpName","autocomplete","off",3,"ngModel","ngModelChange"],["type","text","name","wpLat","autocomplete","off",3,"ngModel","ngModelChange"],["type","text","name","wpLon","autocomplete","off",3,"ngModel","ngModelChange"],[1,"desc"],[1,"buttons"],["type","button",3,"click"],["type","submit"],[1,"error"]],template:function(i,o){i&1&&ge(0,mA,29,5,"div",0),i&2&&Se(0,o.shown&&o.wpFormData?0:-1)},dependencies:[Si,mw,Vn,Ii,lw,fh,dh],styles:[".dialog[_ngcontent-%COMP%]{display:block;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;padding:1em;box-shadow:#0000004d 1px 1px 10px;border-radius:5px}h2[_ngcontent-%COMP%]{margin-top:10px}.input[_ngcontent-%COMP%]{margin:.5rem 0;display:flex;flex-direction:row;justify-content:space-between}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:1rem}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.error[_ngcontent-%COMP%]{background-color:#ffd5d5;font-size:80%;padding:.4rem;color:#8b0000}.desc[_ngcontent-%COMP%]{font-size:80%}"]});let t=e;return t})();function gA(t,e){t&1&&E(0," No waypoints! ")}function yA(t,e){if(t&1){let n=Ge();I(0,"tr")(1,"td")(2,"a",9),E(3),M()(),I(4,"td"),E(5),M(),I(6,"td"),E(7),M(),I(8,"td",10),ne("click",function(){let o=ce(n).$implicit,s=O(3);return ue(s.draftEditWaypoint(o))}),E(9,"\u270E"),M(),I(10,"td",10),ne("click",function(){let o=ce(n).$implicit,s=O(3);return ue(s.draftDeleteWaypoint(o))}),E(11,"\u2716"),M()()}if(t&2){let n=e.$implicit;de(2),md("href",n.getMapLink(),Um),de(),$e("",n.wp.name," \u2197"),de(2),Jr(n.getLat()),de(2),Jr(n.getLon())}}function vA(t,e){if(t&1&&(I(0,"table")(1,"tr")(2,"th"),E(3,"Name"),M(),I(4,"th"),E(5,"Latitude"),M(),I(6,"th"),E(7,"Longitude"),M()(),Og(8,yA,12,4,"tr",null,xg),M()),t&2){let n=O(2);de(8),kg(n.getDraftWaypoints().waypoints)}}function wA(t,e){if(t&1){let n=Ge();I(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),ge(5,gA,1,0)(6,vA,10,0),I(7,"button",6),ne("click",function(){ce(n);let i=O();return ue(i.draftAddWaypoint())}),E(8,"Add waypoint"),M()()(),Oe(9,"waypoint-editor"),M(),I(10,"div",7)(11,"button",6),ne("click",function(){ce(n);let i=O();return ue(i.draftCancel())}),E(12,"Cancel"),M(),I(13,"button",8),ne("click",function(){ce(n);let i=O();return ue(i.saveDraft())}),E(14," Save "),M()()()()}if(t&2){let n=O(),r;de(5),Se(5,!((r=n.getDraftWaypoints())==null||r.waypoints==null)&&r.waypoints.length?6:5),de(8),ln("disabled",!n.isPendingDraft())}}var vh=(()=>{let e=class e{constructor(r){this.deviceMgr=r,this.shown=!1,this.hex=tt}ngOnInit(){this.deviceMgr.configSession.deviceTaskState$.subscribe(r=>{r=="nav-edit"||r=="nav-save"?this.shown=!0:this.shown=!1}),this.configSubscription=this.deviceMgr.configSession.config.asObservable().subscribe()}getDraftWaypoints(){return this.deviceMgr.configSession.config.getValue().draftWaypoints}draftEditWaypoint(r){let i=this.getDraftWaypoints();i&&this.waypointEditor.editWaypoint(r,o=>i?.editWaypoint(r,o.name,o.lat,o.lon))}draftDeleteWaypoint(r){let i=this.getDraftWaypoints();i&&i.deleteWaypoint(r)}draftAddWaypoint(){let r=this.getDraftWaypoints();this.waypointEditor.createWaypoint(i=>r?.addWaypoint(i))}draftCancel(){this.deviceMgr.configSession.cancelNavInfoDraft()}saveDraft(){this.deviceMgr.configSession.writeNavInfoDraft()}isPendingDraft(){return this.getDraftWaypoints()?.dirtyWaypoints}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["waypoint-sheet"]],viewQuery:function(i,o){if(i&1&&Zr(yh,5),i&2){let s;cr(s=ur())&&(o.waypointEditor=s.first)}},standalone:!0,features:[je],decls:1,vars:1,consts:[["class","veil"],[1,"veil"],[1,"modal"],[1,"contents"],[1,"waypoints"],[1,"list"],[3,"click"],[1,"controls"],[3,"disabled","click"],["target","_blank",3,"href"],[1,"action",3,"click"]],template:function(i,o){i&1&&ge(0,wA,15,2,"div",0),i&2&&Se(0,o.shown?0:-1)},dependencies:[yh],styles:[".veil[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000040}.modal[_ngcontent-%COMP%]{position:fixed;top:30%;left:0%;width:100%;height:70%;background-color:#fff;padding:20px;border-radius:5px;display:flex;flex-direction:column;justify-content:center;align-items:center}.contents[_ngcontent-%COMP%]{max-width:600px;overflow:auto;flex:1}.waypoints[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.waypoints[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.waypoints[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.waypoints[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{align-self:center}.waypoints[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{cursor:pointer}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:1.5rem}"]});let t=e;return t})();function bA(t,e){if(t&1){let n=Ge();I(0,"div",1)(1,"div",2)(2,"h2"),E(3,"Edit MMSI Directory"),M(),I(4,"div",3),E(5,' Input the MMSI directory as CSV with two columns ("name" and "mmsi"). Prefix group MMSIs with an uppercase "G". Warning: this feature is extra experimental. If there are errors in the CSV (name longer than 16 characters, MMSI not numeric, missing columns) the save will fail silently. '),M(),I(6,"div",4),Oe(7,"textarea",5),M(),I(8,"div",6)(9,"button",7),ne("click",function(){ce(n);let i=O();return ue(i.cancel())}),E(10,"Cancel"),M(),I(11,"button",7),ne("click",function(){ce(n);let i=O();return ue(i.save())}),E(12,"Save"),M()()()()}if(t&2){let n=O();de(7),ln("formControl",n.csvControl)}}var wh=(()=>{let e=class e{constructor(r){this.shown=!1,this.csvControl=new ts("Uninitialized"),this.configProtocol=r.configSession}ngOnInit(){this.configProtocol.deviceTaskState$.subscribe(r=>{r=="mmsi-edit"?(this.shown=!0,this.csvControl.setValue(this.configProtocol.config.getValue().mmsiDirectory.toCsv())):this.shown=!1})}save(){this.csvControl.value&&this.configProtocol.config.getValue().mmsiDirectory.initFromCsv(this.csvControl.value),this.configProtocol.writeMmsiDirectory()}cancel(){this.configProtocol.cancelMmsiDirectory()}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["mmsi-sheet"]],standalone:!0,features:[je],decls:1,vars:1,consts:[["class","veil"],[1,"veil"],[1,"modal"],[1,"info"],[1,"contents"],[3,"formControl"],[1,"controls"],[3,"click"]],template:function(i,o){i&1&&ge(0,bA,13,1,"div",0),i&2&&Se(0,o.shown?0:-1)},dependencies:[Si,Vn,Ii,zl,ns],styles:[".veil[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000040}.modal[_ngcontent-%COMP%]{position:fixed;top:30%;left:0%;width:100%;height:70%;background-color:#fff;padding:20px;border-radius:5px;display:flex;flex-direction:column;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{margin-top:10px}.contents[_ngcontent-%COMP%]{width:600px;flex:1}.contents[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100%;width:100%;box-sizing:border-box}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:1.5rem}.info[_ngcontent-%COMP%]{max-width:600px;font-size:12px;padding:0 2em .5em;box-sizing:border-box}"]});let t=e;return t})();function CA(t,e){if(t&1){let n=Ge();I(0,"div",3),E(1,' Connect your HX870 or HX890 radio to this computer with a USB cable, and place it in "CP Mode": '),I(2,"ol")(3,"li"),E(4,"Power the device off"),M(),I(5,"li"),E(6,"Press and hold the Menu key"),M(),I(7,"li"),E(8,"While holding the Menu key, press the power button"),M(),I(9,"li"),E(10,"Release both keys when the screen lights up"),M(),I(11,"li"),E(12,"Click Connect"),M()(),E(13," Alternatively, "),I(14,"a",4),ne("click",function(){ce(n);let i=O();return ue(i.showDatPicker())}),E(15,"load a DAT file"),M(),E(16," for your device to edit it. "),M(),I(17,"button",5),ne("click",function(){ce(n);let i=O();return ue(i.connectUsb())}),E(18," Connect "),M()}if(t&2){let n=O();de(17),ln("disabled",n.connectionState==="usb-connecting")}}function _A(t,e){if(t&1){let n=Ge();I(0,"button",7),ne("click",function(){ce(n);let i=O(2);return ue(i.readGpslog())}),E(1,"Download GPS log"),M()}}function DA(t,e){if(t&1){let n=Ge();I(0,"button",7),ne("click",function(){ce(n);let i=O(2);return ue(i.restoreDat())}),E(1,"Restore from DAT"),M(),I(2,"button",7),ne("click",function(){ce(n);let i=O(2);return ue(i.deviceMgr.disconnect())}),E(3,"Disconnect"),M()}}function EA(t,e){if(t&1){let n=Ge();I(0,"button",7),ne("click",function(){ce(n);let i=O(2);return ue(i.deviceMgr.disconnect())}),E(1,"Close"),M()}}function IA(t,e){if(t&1){let n=Ge();I(0,"div",6)(1,"button",7),ne("click",function(){ce(n);let i=O();return ue(i.readWaypoints())}),E(2,"Waypoints"),M(),I(3,"button",7),ne("click",function(){ce(n);let i=O();return ue(i.readMmsi())}),E(4,"MMSI Directory"),M(),I(5,"button",7),ne("click",function(){ce(n);let i=O();return ue(i.readYaml())}),E(6,"Edit as Yaml"),M(),ge(7,_A,2,0,"button"),I(8,"button",7),ne("click",function(){ce(n);let i=O();return ue(i.saveDat())}),E(9,"Save DAT"),M(),ge(10,DA,4,0)(11,EA,2,0),M()}if(t&2){let n=O();de(7),Se(7,n.connectionState=="usb-connected"?7:-1),de(3),Se(10,n.connectionState=="usb-connected"?10:n.connectionState=="dat-connected"?11:-1)}}var bw=(()=>{let e=class e{constructor(r){this.deviceMgr=r,this.hex=tt,this.connectionState=r.getConnectionState(),this.config=this.deviceMgr.configSession.config,this.deviceTaskState="idle"}ngOnInit(){this.connectionStateSubscription=this.deviceMgr.connectionState$.subscribe(r=>this.connectionState=r),this.configSubscription=this.deviceMgr.configSession.config.asObservable().subscribe(),this.deviceMgr.configSession.deviceTaskState$.subscribe(r=>this.deviceTaskState=r)}readWaypoints(){return N(this,null,function*(){yield this.deviceMgr.configSession.readNavInfo()})}readMmsi(){return N(this,null,function*(){yield this.deviceMgr.configSession.readMmsiDirectory()})}readYaml(){return N(this,null,function*(){yield this.deviceMgr.configSession.startYaml()})}readGpslog(){return N(this,null,function*(){yield this.deviceMgr.configSession.readGpsLog();let r=new Ka(this.deviceMgr.configSession.config.getValue().gpslog).getGpx(),i=new Blob(r,{type:"application/xml"});(0,bh.saveAs)(i,"gpslog.gpx")})}connectUsb(){return N(this,null,function*(){if(!this.deviceMgr.serial){window.alert("This functionality requires Chrome, Edge, or Opera.");return}try{yield this.deviceMgr.connectUsb()}catch(r){window.alert(r)}})}showDatPicker(){return N(this,null,function*(){if(!window.showOpenFilePicker){window.alert("This functionality requires Chrome, Edge, or Opera.");return}let[r]=yield window.showOpenFilePicker({multiple:!1,types:[{description:"DAT files",accept:{"application/octet-stream":[".dat",".bin",".DAT",".bin"]}}]}),o=yield(yield r.getFile()).arrayBuffer();try{this.deviceMgr.connectDat(new Uint8Array(o))}catch(s){window.alert(s)}})}saveDat(){return N(this,null,function*(){let r=yield this.deviceMgr.configSession.readDat(),i=new Blob([r],{type:"application/octet-stream"});(0,bh.saveAs)(i,"hx.dat")})}restoreDat(){return N(this,null,function*(){let[r]=yield window.showOpenFilePicker({multiple:!1,types:[{description:"DAT files",accept:{"application/octet-stream":[".dat",".bin",".DAT",".bin"]}}]});try{let i=yield r.getFile(),o=new Uint8Array(yield i.arrayBuffer());yield this.deviceMgr.configSession.restoreDat(o)}catch(i){window.alert(i)}})}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["app-device"]],viewQuery:function(i,o){if(i&1&&(Zr(vh,5),Zr(wh,5),Zr(gh,5)),i&2){let s;cr(s=ur())&&(o.waypointSheet=s.first),cr(s=ur())&&(o.mmsiSheet=s.first),cr(s=ur())&&(o.busyStateModal=s.first)}},standalone:!0,features:[je],decls:9,vars:1,consts:[[1,"device-panel"],["src","assets/radio.jpeg",1,"device-picture"],[1,"controls"],[1,"desc"],["href","#",3,"click"],[3,"disabled","click"],[1,"connected-buttons"],[3,"click"]],template:function(i,o){i&1&&(I(0,"div",0),Oe(1,"img",1),I(2,"div",2),ge(3,CA,19,1)(4,IA,12,2),M()(),Oe(5,"waypoint-sheet")(6,"mmsi-sheet")(7,"yaml-sheet")(8,"busy-state-modal")),i&2&&(de(3),Se(3,o.connectionState!="usb-connected"&&o.connectionState!="dat-connected"?3:4))},dependencies:[gh,vh,wh,vw],styles:[".device-panel[_ngcontent-%COMP%]{display:flex}.device-picture[_ngcontent-%COMP%]{width:150px;height:150px}.status-lights[_ngcontent-%COMP%]{width:100px;height:auto;display:flex;flex-direction:column;align-items:center;justify-content:center}.status-lights[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:14px;border:solid 1px #444;margin:5px;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_on-light{0%{background-color:#1c881c}50%{background-color:#36ae36}to{background-color:#1c881c}}.status-lights[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{background-color:#1c881c;color:#fff;animation-name:_ngcontent-%COMP%_on-light;animation-duration:1s;animation-iteration-count:infinite}.controls[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;align-items:center;justify-content:center}.connected-buttons[_ngcontent-%COMP%]{flex-flow:wrap}"]});let t=e;return t})();var Cw=(()=>{let e=class e{constructor(){this.title="hxsync"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ve({type:e,selectors:[["app-root"]],standalone:!0,features:[je],decls:10,vars:0,consts:[[1,"main"],[1,"content"],[1,"desc"]],template:function(i,o){i&1&&(I(0,"main",0)(1,"div",1)(2,"h1"),E(3,"HxSync"),M(),I(4,"div",2),E(5," With this utility, you'll be able to edit waypoints on your HX870 or HX890, and download its GPS log in GPX format. "),M(),I(6,"div",2),E(7," This experimental utility is not provided by Standard Horizon. Use at your own risk! "),M(),Oe(8,"app-device"),M()(),Oe(9,"router-outlet"))},dependencies:[uf,bw],styles:['[_nghost-%COMP%]{--bright-blue: oklch(51.01% .274 263.83);--electric-violet: oklch(53.18% .28 296.97);--french-violet: oklch(47.66% .246 305.88);--vivid-pink: oklch(69.02% .277 332.77);--hot-red: oklch(61.42% .238 15.34);--orange-red: oklch(63.32% .24 31.68);--gray-900: oklch(19.37% .006 300.98);--gray-700: oklch(36.98% .014 302.71);--gray-400: oklch(70.9% .015 304.04);--red-to-pink-to-purple-vertical-gradient: linear-gradient( 180deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--red-to-pink-to-purple-horizontal-gradient: linear-gradient( 90deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--pill-accent: var(--bright-blue);box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:3.125rem;color:var(--gray-900);font-weight:500;line-height:100%;letter-spacing:-.125rem;margin:0;font-family:Inter Tight,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}p[_ngcontent-%COMP%]{margin:0;color:var(--gray-700)}main[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;justify-content:center;align-items:center;padding:1rem;box-sizing:inherit;position:relative}.angular-logo[_ngcontent-%COMP%]{max-width:9.2rem}.content[_ngcontent-%COMP%]{justify-content:space-around;width:100%;max-width:700px;margin-bottom:3rem}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1.75rem;margin-bottom:1rem}.content[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:.5rem 0}.divider[_ngcontent-%COMP%]{width:1px;background:var(--red-to-pink-to-purple-vertical-gradient);margin-inline:.5rem}.pill-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex-wrap:wrap;gap:1.25rem}.pill[_ngcontent-%COMP%]{display:flex;align-items:center;--pill-accent: var(--bright-blue);background:color-mix(in srgb,var(--pill-accent) 5%,transparent);color:var(--pill-accent);padding-inline:.75rem;padding-block:.375rem;border-radius:2.75rem;border:0;transition:background .3s ease;font-family:var(--inter-font);font-size:.875rem;font-style:normal;font-weight:500;line-height:1.4rem;letter-spacing:-.00875rem;text-decoration:none}.pill[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--pill-accent) 15%,transparent)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+1){--pill-accent: var(--bright-blue)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+2){--pill-accent: var(--french-violet)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+5){--pill-accent: var(--hot-red)}.pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-inline-start:.25rem}.social-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.73rem;margin-top:1.5rem}.social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:fill .3s ease;fill:var(--gray-400)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--gray-900)}@media screen and (max-width: 650px){.content[_ngcontent-%COMP%]{flex-direction:column;width:max-content}.divider[_ngcontent-%COMP%]{height:1px;width:100%;background:var(--red-to-pink-to-purple-horizontal-gradient);margin-block:1.5rem}}']});let t=e;return t})();oy(Cw,Hy).catch(t=>console.error(t));
