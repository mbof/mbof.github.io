var vw=Object.create;var Ql=Object.defineProperty,ww=Object.defineProperties,bw=Object.getOwnPropertyDescriptor,Cw=Object.getOwnPropertyDescriptors,_w=Object.getOwnPropertyNames,wh=Object.getOwnPropertySymbols,Dw=Object.getPrototypeOf,Ch=Object.prototype.hasOwnProperty,Ew=Object.prototype.propertyIsEnumerable;var Kl=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var bh=(t,e,n)=>e in t?Ql(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})Ch.call(e,n)&&bh(t,n,e[n]);if(wh)for(var n of wh(e))Ew.call(e,n)&&bh(t,n,e[n]);return t},B=(t,e)=>ww(t,Cw(e));var Iw=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Sw=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _w(e))!Ch.call(t,i)&&i!==n&&Ql(t,i,{get:()=>e[i],enumerable:!(r=bw(e,i))||r.enumerable});return t};var Mw=(t,e,n)=>(n=t!=null?vw(Dw(t)):{},Sw(e||!t||!t.__esModule?Ql(n,"default",{value:t,enumerable:!0}):n,t));var A=(t,e,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(c){i(c)}},s=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())}),Nw=function(t,e){this[0]=t,this[1]=e};var y=t=>{var e=t[Kl("asyncIterator")],n=!1,r,i={};return e==null?(e=t[Kl("iterator")](),r=o=>i[o]=s=>e[o](s)):(e=e.call(t),r=o=>i[o]=s=>{if(n){if(n=!1,o==="throw")throw s;return s}return n=!0,{done:!1,value:new Nw(new Promise(a=>{var l=e[o](s);if(!(l instanceof Object))throw TypeError("Object expected");a(l)}),1)}}),i[Kl("iterator")]=()=>i,r("next"),"throw"in e?r("throw"):i.throw=o=>{throw o},"return"in e&&r("return"),i};var Hy=Iw((hf,pf)=>{"use strict";(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof hf<"u"?e():(e(),t.FileSaver={})})(hf,function(){"use strict";function t(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,l,c){var u=new XMLHttpRequest;u.open("GET",a),u.responseType="blob",u.onload=function(){s(u.response,l,c)},u.onerror=function(){console.error("could not download file")},u.send()}function n(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(a,l,c){var u=i.URL||i.webkitURL,d=document.createElement("a");l=l||a.name||"download",d.download=l,d.rel="noopener",typeof a=="string"?(d.href=a,d.origin===location.origin?r(d):n(d.href)?e(a,l,c):r(d,d.target="_blank")):(d.href=u.createObjectURL(a),setTimeout(function(){u.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,c){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(t(a,c),l);else if(n(a))e(a,l,c);else{var u=document.createElement("a");u.href=a,u.target="_blank",setTimeout(function(){r(u)})}}:function(a,l,c,u){if(u=u||open("","_blank"),u&&(u.document.title=u.document.body.innerText="downloading..."),typeof a=="string")return e(a,l,c);var d=a.type==="application/octet-stream",f=/constructor/i.test(i.HTMLElement)||i.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||d&&f||o)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var v=m.result;v=h?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=v:location=v,u=null},m.readAsDataURL(a)}else{var p=i.URL||i.webkitURL,g=p.createObjectURL(a);u?u.location=g:location.href=g,u=null,setTimeout(function(){p.revokeObjectURL(g)},4e4)}});i.saveAs=s.saveAs=s,typeof pf<"u"&&(pf.exports=s)})});var _h=null;var Zl=1,Jl=Symbol("SIGNAL");function Ae(t){let e=_h;return _h=t,e}var Dh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tw(t){if(!(tc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Zl)){if(!t.producerMustRecompute(t)&&!Xl(t)){t.dirty=!1,t.lastCleanEpoch=Zl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Zl}}function Eh(t){return t&&(t.nextProducerIndex=0),Ae(t)}function Ih(t,e){if(Ae(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(tc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ec(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Xl(t){rs(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Tw(n),r!==n.version))return!0}return!1}function Sh(t){if(rs(t),tc(t))for(let e=0;e<t.producerNode.length;e++)ec(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ec(t,e){if(Aw(t),rs(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)ec(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];rs(i),i.producerIndexOfThis[r]=e}}function tc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function rs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Aw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function xw(){throw new Error}var Ow=xw;function Mh(t){Ow=t}function P(t){return typeof t=="function"}function br(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var is=br(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Si(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var De=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(P(r))try{r()}catch(o){e=o instanceof is?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Nh(o)}catch(s){e=e??[],s instanceof is?e=[...e,...s.errors]:e.push(s)}}if(e)throw new is(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Nh(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Si(n,e)}remove(e){let{_finalizers:n}=this;n&&Si(n,e),e instanceof t&&e._removeParent(this)}};De.EMPTY=(()=>{let t=new De;return t.closed=!0,t})();var nc=De.EMPTY;function os(t){return t instanceof De||t&&"closed"in t&&P(t.remove)&&P(t.add)&&P(t.unsubscribe)}function Nh(t){P(t)?t():t.unsubscribe()}var pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Cr={setTimeout(t,e,...n){let{delegate:r}=Cr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Cr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ss(t){Cr.setTimeout(()=>{let{onUnhandledError:e}=pt;if(e)e(t);else throw t})}function Mi(){}var Th=rc("C",void 0,void 0);function Ah(t){return rc("E",void 0,t)}function xh(t){return rc("N",t,void 0)}function rc(t,e,n){return{kind:t,value:e,error:n}}var $n=null;function _r(t){if(pt.useDeprecatedSynchronousErrorHandling){let e=!$n;if(e&&($n={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=$n;if($n=null,n)throw r}}else t()}function Oh(t){pt.useDeprecatedSynchronousErrorHandling&&$n&&($n.errorThrown=!0,$n.error=t)}var jn=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,os(e)&&e.add(this)):this.destination=Pw}static create(e,n,r){return new Dr(e,n,r)}next(e){this.isStopped?oc(xh(e),this):this._next(e)}error(e){this.isStopped?oc(Ah(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?oc(Th,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kw=Function.prototype.bind;function ic(t,e){return kw.call(t,e)}var sc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){as(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){as(r)}else as(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){as(n)}}},Dr=class extends jn{constructor(e,n,r){super();let i;if(P(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&pt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ic(e.next,o),error:e.error&&ic(e.error,o),complete:e.complete&&ic(e.complete,o)}):i=e}this.destination=new sc(i)}};function as(t){pt.useDeprecatedSynchronousErrorHandling?Oh(t):ss(t)}function Rw(t){throw t}function oc(t,e){let{onStoppedNotification:n}=pt;n&&Cr.setTimeout(()=>n(t,e))}var Pw={closed:!0,next:Mi,error:Rw,complete:Mi};var Er=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qe(t){return t}function ac(...t){return lc(t)}function lc(t){return t.length===0?Qe:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Lw(n)?n:new Dr(n,r,i);return _r(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kh(r),new r((i,o)=>{let s=new Dr({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Er](){return this}pipe(...n){return lc(n)(this)}toPromise(n){return n=kh(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function kh(t){var e;return(e=t??pt.Promise)!==null&&e!==void 0?e:Promise}function Fw(t){return t&&P(t.next)&&P(t.error)&&P(t.complete)}function Lw(t){return t&&t instanceof jn||Fw(t)&&os(t)}function cc(t){return P(t?.lift)}function Q(t){return e=>{if(cc(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function W(t,e,n,r,i){return new uc(t,e,n,r,i)}var uc=class extends jn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ir(){return Q((t,e)=>{let n=null;t._refCount++;let r=W(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Sr=class extends ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new De;let n=this.getSubject();e.add(this.source.subscribe(W(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=De.EMPTY)}return e}refCount(){return Ir()(this)}};var Rh=br(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=(()=>{class t extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ls(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Rh}next(n){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?nc:(this.currentObservers=null,o.push(n),new De(()=>{this.currentObservers=null,Si(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ie;return n.source=this,n}}return t.create=(e,n)=>new ls(e,n),t})(),ls=class extends Ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:nc}};var he=class extends Ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var nt=new ie(t=>t.complete());function Ph(t){return t&&P(t.schedule)}function Fh(t){return t[t.length-1]}function cs(t){return P(Fh(t))?t.pop():void 0}function gn(t){return Ph(Fh(t))?t.pop():void 0}function Vh(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Lh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bn(t){return this instanceof Bn?(this.v=t,this):new Bn(t)}function $h(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(m,p){o.push([f,h,m,p])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(m){d(o[0][3],m)}}function l(f){f.value instanceof Bn?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function jh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Lh=="function"?Lh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var us=t=>t&&typeof t.length=="number"&&typeof t!="function";function ds(t){return P(t?.then)}function fs(t){return P(t[Er])}function hs(t){return Symbol.asyncIterator&&P(t?.[Symbol.asyncIterator])}function ps(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Vw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ms=Vw();function gs(t){return P(t?.[ms])}function ys(t){return $h(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Bn(n.read());if(i)return yield Bn(void 0);yield yield Bn(r)}}finally{n.releaseLock()}})}function vs(t){return P(t?.getReader)}function Ce(t){if(t instanceof ie)return t;if(t!=null){if(fs(t))return $w(t);if(us(t))return jw(t);if(ds(t))return Bw(t);if(hs(t))return Bh(t);if(gs(t))return Uw(t);if(vs(t))return Hw(t)}throw ps(t)}function $w(t){return new ie(e=>{let n=t[Er]();if(P(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jw(t){return new ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Bw(t){return new ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ss)})}function Uw(t){return new ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Bh(t){return new ie(e=>{qw(t,e).catch(n=>e.error(n))})}function Hw(t){return Bh(ys(t))}function qw(t,e){var n,r,i,o;return Vh(this,void 0,void 0,function*(){try{for(n=jh(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ge(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function ws(t,e=0){return Q((n,r)=>{n.subscribe(W(r,i=>Ge(r,t,()=>r.next(i),e),()=>Ge(r,t,()=>r.complete(),e),i=>Ge(r,t,()=>r.error(i),e)))})}function bs(t,e=0){return Q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Uh(t,e){return Ce(t).pipe(bs(e),ws(e))}function Hh(t,e){return Ce(t).pipe(bs(e),ws(e))}function qh(t,e){return new ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function zh(t,e){return new ie(n=>{let r;return Ge(n,e,()=>{r=t[ms](),Ge(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>P(r?.return)&&r.return()})}function Cs(t,e){if(!t)throw new Error("Iterable cannot be null");return new ie(n=>{Ge(n,e,()=>{let r=t[Symbol.asyncIterator]();Ge(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Gh(t,e){return Cs(ys(t),e)}function Wh(t,e){if(t!=null){if(fs(t))return Uh(t,e);if(us(t))return qh(t,e);if(ds(t))return Hh(t,e);if(hs(t))return Cs(t,e);if(gs(t))return zh(t,e);if(vs(t))return Gh(t,e)}throw ps(t)}function ve(t,e){return e?Wh(t,e):Ce(t)}function L(...t){let e=gn(t);return ve(t,e)}function Mr(t,e){let n=P(t)?t:()=>t,r=i=>i.error(n());return new ie(e?i=>e.schedule(r,0,i):r)}function dc(t){return!!t&&(t instanceof ie||P(t.lift)&&P(t.subscribe))}var Jt=br(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(t,e){return Q((n,r)=>{let i=0;n.subscribe(W(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:zw}=Array;function Gw(t,e){return zw(e)?t(...e):t(e)}function _s(t){return Y(e=>Gw(t,e))}var{isArray:Ww}=Array,{getPrototypeOf:Yw,prototype:Kw,keys:Qw}=Object;function Ds(t){if(t.length===1){let e=t[0];if(Ww(e))return{args:e,keys:null};if(Zw(e)){let n=Qw(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Zw(t){return t&&typeof t=="object"&&Yw(t)===Kw}function Es(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Is(...t){let e=gn(t),n=cs(t),{args:r,keys:i}=Ds(t);if(r.length===0)return ve([],e);let o=new ie(Jw(r,e,i?s=>Es(i,s):Qe));return n?o.pipe(_s(n)):o}function Jw(t,e,n=Qe){return r=>{Yh(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Yh(e,()=>{let c=ve(t[l],e),u=!1;c.subscribe(W(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Yh(t,e,n){t?Ge(n,t,e):e()}function Kh(t,e,n,r,i,o,s,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=p=>c<r?m(p):l.push(p),m=p=>{o&&e.next(p),c++;let g=!1;Ce(n(p,u++)).subscribe(W(e,v=>{i?.(v),o?h(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){let v=l.shift();s?Ge(e,s,()=>m(v)):m(v)}f()}catch(v){e.error(v)}}))};return t.subscribe(W(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Ee(t,e,n=1/0){return P(e)?Ee((r,i)=>Y((o,s)=>e(r,o,i,s))(Ce(t(r,i))),n):(typeof e=="number"&&(n=e),Q((r,i)=>Kh(r,i,t,n)))}function fc(t=1/0){return Ee(Qe,t)}function Qh(){return fc(1)}function Nr(...t){return Qh()(ve(t,gn(t)))}function Ss(t){return new ie(e=>{Ce(t()).subscribe(e)})}function hc(...t){let e=cs(t),{args:n,keys:r}=Ds(t),i=new ie(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;Ce(n[u]).subscribe(W(o,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?Es(r,a):a),o.complete())}))}});return e?i.pipe(_s(e)):i}function mt(t,e){return Q((n,r)=>{let i=0;n.subscribe(W(r,o=>t.call(e,o,i++)&&r.next(o)))})}function yn(t){return Q((e,n)=>{let r=null,i=!1,o;r=e.subscribe(W(n,void 0,void 0,s=>{o=Ce(t(s,yn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Zh(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(W(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Tr(t,e){return P(e)?Ee(t,e,1):Ee(t,1)}function vn(t){return Q((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Xt(t){return t<=0?()=>nt:Q((e,n)=>{let r=0;e.subscribe(W(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function pc(t){return Y(()=>t)}function Ms(t=Xw){return Q((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Xw(){return new Jt}function Ni(t){return Q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Rt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?mt((i,o)=>t(i,o,r)):Qe,Xt(1),n?vn(e):Ms(()=>new Jt))}function Ar(t){return t<=0?()=>nt:Q((e,n)=>{let r=[];e.subscribe(W(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function mc(t,e){let n=arguments.length>=2;return r=>r.pipe(t?mt((i,o)=>t(i,o,r)):Qe,Ar(1),n?vn(e):Ms(()=>new Jt))}function gc(t,e){return Q(Zh(t,e,arguments.length>=2,!0))}function yc(...t){let e=gn(t);return Q((n,r)=>{(e?Nr(t,n,e):Nr(t,n)).subscribe(r)})}function gt(t,e){return Q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(W(r,l=>{i?.unsubscribe();let c=0,u=o++;Ce(t(l,u)).subscribe(i=W(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vc(t){return Q((e,n)=>{Ce(t).subscribe(W(n,()=>n.complete(),Mi)),!n.closed&&e.subscribe(n)})}function Ne(t,e,n){let r=P(t)||e||n?{next:t,error:e,complete:n}:t;return r?Q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(W(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Qe}var kp="https://g.co/ng/security#xss",x=class extends Error{constructor(e,n){super(Nu(e,n)),this.code=e}};function Nu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var Fc=class extends Ze{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=wc(o),i&&(i=wc(i)),s&&(s=wc(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof De&&e.add(a),a}};function wc(t){return e=>{setTimeout(t,void 0,e)}}var Te=Fc;var H=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(H||{});function We(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(We).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Jh(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Rp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Rp||{}),Lt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Lt||{});function ea(t){return{toString:t}.toString()}var Ti=globalThis;var Pr={},it=[];function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function e0(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var t0=fe({\u0275cmp:fe}),n0=fe({\u0275dir:fe}),r0=fe({\u0275pipe:fe}),i0=fe({\u0275mod:fe}),Fs=fe({\u0275fac:fe}),Ai=fe({__NG_ELEMENT_ID__:fe}),Xh=fe({__NG_ENV_ID__:fe}),Le=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Le||{});function Pp(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Lc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];s0(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function o0(t){return t===3||t===4||t===6}function s0(t){return t.charCodeAt(0)===64}function ki(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ep(t,n,i,null,e[++r]):ep(t,n,i,null,null))}}return t}function ep(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Fp="ng-template";function a0(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&Pp(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function Lp(t){return t.type===4&&t.value!==Fp}function l0(t,e,n){let r=t.type===4&&!n?Fp:t.value;return e===r}function c0(t,e,n){let r=4,i=t.attrs||[],o=f0(i),s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!yt(r)&&!yt(l))return!1;if(s&&yt(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!l0(t,l,n)||l===""&&e.length===1){if(yt(r))return!1;s=!0}}else{let c=r&8?l:e[++a];if(r&8&&t.attrs!==null){if(!a0(t.attrs,c,n)){if(yt(r))return!1;s=!0}continue}let u=r&8?"class":l,d=u0(u,i,Lp(t),n);if(d===-1){if(yt(r))return!1;s=!0;continue}if(c!==""){let f;d>o?f="":f=i[d+1].toLowerCase();let h=r&8?f:null;if(h&&Pp(h,c,0)!==-1||r&2&&c!==f){if(yt(r))return!1;s=!0}}}}return yt(r)||s}function yt(t){return(t&1)===0}function u0(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return h0(e,t)}function d0(t,e,n=!1){for(let r=0;r<e.length;r++)if(c0(t,e[r],n))return!0;return!1}function f0(t){for(let e=0;e<t.length;e++){let n=t[e];if(o0(n))return e}return t.length}function h0(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function tp(t,e){return t?":not("+e.trim()+")":e}function p0(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yt(s)&&(e+=tp(o,i),i=""),r=s,o=o||!yt(r);n++}return i!==""&&(e+=tp(o,i)),e}function m0(t){return t.map(p0).join(",")}function g0(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!yt(i))break;i=o}r++}return{attrs:e,classes:n}}function Ve(t){return ea(()=>{let e=Up(t),n=B(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Rp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Lt.Emulated,styles:t.styles||it,_:null,schemas:t.schemas||null,tView:null,id:""});Hp(n);let r=t.dependencies;return n.directiveDefs=rp(r,!1),n.pipeDefs=rp(r,!0),n.id=w0(n),n})}function y0(t){return qn(t)||Vp(t)}function v0(t){return t!==null}function Xn(t){return ea(()=>({type:t.type,bootstrap:t.bootstrap||it,declarations:t.declarations||it,imports:t.imports||it,exports:t.exports||it,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function np(t,e){if(t==null)return Pr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Le.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Le.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Je(t){return ea(()=>{let e=Up(t);return Hp(e),e})}function qn(t){return t[t0]||null}function Vp(t){return t[n0]||null}function $p(t){return t[r0]||null}function jp(t){let e=qn(t)||Vp(t)||$p(t);return e!==null?e.standalone:!1}function Bp(t,e){let n=t[i0]||null;if(!n&&e===!0)throw new Error(`Type ${We(t)} does not have '\u0275mod' property.`);return n}function Up(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Pr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||it,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:np(t.inputs,e),outputs:np(t.outputs),debugInfo:null}}function Hp(t){t.features?.forEach(e=>e(t))}function rp(t,e){if(!t)return null;let n=e?$p:y0;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(v0)}function w0(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var on=0,F=1,k=2,xe=3,vt=4,bt=5,Ri=6,Pi=7,Pe=8,Fr=9,en=10,Ie=11,Fi=12,ip=13,Ur=14,wt=15,Ki=16,xr=17,tn=18,ta=19,qp=20,xi=21,bc=22,zn=23,ot=25,zp=1;var Gn=7,Ls=8,Lr=9,Fe=10,Tu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Tu||{});function Un(t){return Array.isArray(t)&&typeof t[zp]=="object"}function sn(t){return Array.isArray(t)&&t[zp]===!0}function Gp(t){return(t.flags&4)!==0}function na(t){return t.componentOffset>-1}function Au(t){return(t.flags&1)===1}function bn(t){return!!t.template}function b0(t){return(t[k]&512)!==0}var C0="svg",_0="math",D0=!1;function E0(){return D0}function Vt(t){for(;Array.isArray(t);)t=t[on];return t}function Wp(t,e){return Vt(e[t])}function Ct(t,e){return Vt(e[t.index])}function xu(t,e){return t.data[e]}function I0(t,e){return t[e]}function _n(t,e){let n=e[t];return Un(n)?n:n[on]}function S0(t){return(t[k]&4)===4}function Ou(t){return(t[k]&128)===128}function M0(t){return sn(t[xe])}function Vs(t,e){return e==null?null:t[e]}function Yp(t){t[xr]=0}function N0(t){t[k]&1024||(t[k]|=1024,Ou(t)&&Li(t))}function T0(t,e){for(;t>0;)e=e[Ur],t--;return e}function ku(t){return!!(t[k]&9216||t[zn]?.dirty)}function Vc(t){ku(t)?Li(t):t[k]&64&&(E0()?(t[k]|=1024,Li(t)):t[en].changeDetectionScheduler?.notify())}function Li(t){t[en].changeDetectionScheduler?.notify();let e=Vi(t);for(;e!==null&&!(e[k]&8192||(e[k]|=8192,!Ou(e)));)e=Vi(e)}function A0(t,e){if((t[k]&256)===256)throw new x(911,!1);t[xi]===null&&(t[xi]=[]),t[xi].push(e)}function Vi(t){let e=t[xe];return sn(e)?e[xe]:e}var q={lFrame:tm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function x0(){return q.lFrame.elementDepthCount}function O0(){q.lFrame.elementDepthCount++}function k0(){q.lFrame.elementDepthCount--}function Kp(){return q.bindingsEnabled}function R0(){return q.skipHydrationRootTNode!==null}function P0(t){return q.skipHydrationRootTNode===t}function F0(){q.skipHydrationRootTNode=null}function oe(){return q.lFrame.lView}function He(){return q.lFrame.tView}function le(t){return q.lFrame.contextLView=t,t[Pe]}function ce(t){return q.lFrame.contextLView=null,t}function Xe(){let t=Qp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Qp(){return q.lFrame.currentTNode}function L0(){let t=q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Qi(t,e){let n=q.lFrame;n.currentTNode=t,n.isParent=e}function Zp(){return q.lFrame.isParent}function V0(){q.lFrame.isParent=!1}function $0(){return q.lFrame.contextLView}function j0(t){return q.lFrame.bindingIndex=t}function Zi(){return q.lFrame.bindingIndex++}function B0(t){let e=q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function U0(){return q.lFrame.inI18n}function H0(t,e){let n=q.lFrame;n.bindingIndex=n.bindingRootIndex=t,$c(e)}function q0(){return q.lFrame.currentDirectiveIndex}function $c(t){q.lFrame.currentDirectiveIndex=t}function z0(t){let e=q.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Jp(){return q.lFrame.currentQueryIndex}function Ru(t){q.lFrame.currentQueryIndex=t}function G0(t){let e=t[F];return e.type===2?e.declTNode:e.type===1?t[bt]:null}function Xp(t,e,n){if(n&H.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&H.Host);)if(i=G0(o),i===null||(o=o[Ur],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=q.lFrame=em();return r.currentTNode=e,r.lView=t,!0}function Pu(t){let e=em(),n=t[F];q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function em(){let t=q.lFrame,e=t===null?null:t.child;return e===null?tm(t):e}function tm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function nm(){let t=q.lFrame;return q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var rm=nm;function Fu(){let t=nm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function W0(t){return(q.lFrame.contextLView=T0(t,q.lFrame.contextLView))[Pe]}function er(){return q.lFrame.selectedIndex}function Wn(t){q.lFrame.selectedIndex=t}function Lu(){let t=q.lFrame;return xu(t.tView,t.selectedIndex)}function Y0(){return q.lFrame.currentNamespace}var im=!0;function Vu(){return im}function $u(t){im=t}function K0(){return Hr(Xe(),oe())}function Hr(t,e){return new $t(Ct(t,e))}var $t=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=K0;let t=e;return t})();function Q0(t){return t instanceof $t?t.nativeElement:t}function Z0(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function J0(t){return t.flat(Number.POSITIVE_INFINITY)}function ju(t,e){t.forEach(n=>Array.isArray(n)?ju(n,e):e(n))}function om(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $s(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function X0(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function eb(t,e,n){let r=Ji(t,e);return r>=0?t[r|1]=n:(r=~r,X0(t,r,e,n)),r}function Cc(t,e){let n=Ji(t,e);if(n>=0)return t[n|1]}function Ji(t,e){return tb(t,e,1)}function tb(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}function nb(){return this._results[Symbol.iterator]()}var jc=class t{get changes(){return this._changes??=new Te}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=nb)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=J0(e);(this._changesDetected=!Z0(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function sm(t){return(t.flags&128)===128}var Bc;function am(t){Bc=t}function rb(){if(Bc!==void 0)return Bc;if(typeof document<"u")return document;throw new x(210,!1)}function R(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function tr(t){return{providers:t.providers||[],imports:t.imports||[]}}function ra(t){return op(t,cm)||op(t,um)}function lm(t){return ra(t)!==null}function op(t,e){return t.hasOwnProperty(e)?t[e]:null}function ib(t){let e=t&&(t[cm]||t[um]);return e||null}function sp(t){return t&&(t.hasOwnProperty(ap)||t.hasOwnProperty(ob))?t[ap]:null}var cm=fe({\u0275prov:fe}),ap=fe({\u0275inj:fe}),um=fe({ngInjectableDef:fe}),ob=fe({ngInjectorDef:fe}),$=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=R({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},Bu=new $("",{providedIn:"root",factory:()=>sb}),sb="ng",Uu=new $(""),qr=new $("",{providedIn:"platform",factory:()=>"unknown"});var Hu=new $("",{providedIn:"root",factory:()=>rb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ab=fe({__forward_ref__:fe});function nr(t){return t.__forward_ref__=nr,t.toString=function(){return We(this())},t}function Ue(t){return dm(t)?t():t}function dm(t){return typeof t=="function"&&t.hasOwnProperty(ab)&&t.__forward_ref__===nr}function fm(t){return t&&!!t.\u0275providers}function qu(t){return typeof t=="string"?t:t==null?"":String(t)}function lb(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():qu(t)}function cb(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new x(-200,t)}function zu(t,e){throw new x(-201,!1)}var Uc;function ub(){return Uc}function rt(t){let e=Uc;return Uc=t,e}function hm(t,e,n){let r=ra(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&H.Optional)return null;if(e!==void 0)return e;zu(t,"Injector")}var db={},$i=db,fb="__NG_DI_FLAG__",js="ngTempTokenPath",hb="ngTokenPath",pb=/\n/gm,mb="\u0275",lp="__source",Oi;function wn(t){let e=Oi;return Oi=t,e}function gb(t,e=H.Default){if(Oi===void 0)throw new x(-203,!1);return Oi===null?hm(t,void 0,e):Oi.get(t,e&H.Optional?null:void 0,e)}function Z(t,e=H.Default){return(ub()||gb)(Ue(t),e)}function N(t,e=H.Default){return Z(t,ia(e))}function ia(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Hc(t){let e=[];for(let n=0;n<t.length;n++){let r=Ue(t[n]);if(Array.isArray(r)){if(r.length===0)throw new x(900,!1);let i,o=H.Default;for(let s=0;s<r.length;s++){let a=r[s],l=yb(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(Z(i,o))}else e.push(Z(r))}return e}function yb(t){return t[fb]}function vb(t,e,n,r){let i=t[js];throw e[lp]&&i.unshift(e[lp]),t.message=wb(`
`+t.message,i,n,r),t[hb]=i,t[js]=null,t}function wb(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==mb?t.slice(2):t;let i=We(e);if(Array.isArray(e))i=e.map(We).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):We(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(pb,`
  `)}`}var bb="h",Cb="b";var _b=()=>null;function Gu(t,e,n=!1){return _b(t,e,n)}function Vr(t,e){let n=t.hasOwnProperty(Fs);return n?t[Fs]:null}var $r=new $(""),pm=new $("",-1),mm=new $(""),Bs=class{get(e,n=$i){if(n===$i){let r=new Error(`NullInjectorError: No provider for ${We(e)}!`);throw r.name="NullInjectorError",r}return n}};function oa(t){return{\u0275providers:t}}function Db(...t){return{\u0275providers:gm(!0,t),\u0275fromNgModule:!0}}function gm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return ju(e,s=>{let a=s;qc(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ym(i,o),n}function ym(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Wu(i,o=>{e(o,r)})}}function qc(t,e,n,r){if(t=Ue(t),!t)return!1;let i=null,o=sp(t),s=!o&&qn(t);if(!o&&!s){let l=t.ngModule;if(o=sp(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)qc(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{ju(o.imports,u=>{qc(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&ym(c,e)}if(!a){let c=Vr(i)||(()=>new i);e({provide:i,useFactory:c,deps:it},i),e({provide:mm,useValue:i,multi:!0},i),e({provide:$r,useValue:()=>Z(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=t;Wu(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Wu(t,e){for(let n of t)fm(n)&&(n=n.\u0275providers),Array.isArray(n)?Wu(n,e):e(n)}var Eb=fe({provide:String,useValue:fe});function vm(t){return t!==null&&typeof t=="object"&&Eb in t}function Ib(t){return!!(t&&t.useExisting)}function Sb(t){return!!(t&&t.useFactory)}function jr(t){return typeof t=="function"}function Mb(t){return!!t.useClass}var sa=new $(""),As={},Nb={},_c;function Yu(){return _c===void 0&&(_c=new Bs),_c}var st=class{},ji=class extends st{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gc(e,s=>this.processProvider(s)),this.records.set(pm,Or(void 0,this)),i.has("environment")&&this.records.set(st,Or(void 0,this));let o=this.records.get(sa);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(mm,it,H.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=wn(this),r=rt(void 0),i;try{return e()}finally{wn(n),rt(r)}}get(e,n=$i,r=H.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Xh))return e[Xh](this);r=ia(r);let i,o=wn(this),s=rt(void 0);try{if(!(r&H.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=kb(e)&&ra(e);c&&this.injectableDefInScope(c)?l=Or(zc(e),As):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&H.Self?Yu():this.parent;return n=r&H.Optional&&n===$i?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[js]=a[js]||[]).unshift(We(e)),o)throw a;return vb(a,e,"R3InjectorError",this.source)}else throw a}finally{rt(s),wn(o)}}resolveInjectorInitializers(){let e=wn(this),n=rt(void 0),r;try{let i=this.get($r,it,H.Self);for(let o of i)o()}finally{wn(e),rt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(We(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){e=Ue(e);let n=jr(e)?e:Ue(e&&e.provide),r=Ab(e);if(!jr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Or(void 0,As,!0),i.factory=()=>Hc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===As&&(n.value=Nb,n.value=n.factory()),typeof n.value=="object"&&n.value&&Ob(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ue(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zc(t){let e=ra(t),n=e!==null?e.factory:Vr(t);if(n!==null)return n;if(t instanceof $)throw new x(204,!1);if(t instanceof Function)return Tb(t);throw new x(204,!1)}function Tb(t){if(t.length>0)throw new x(204,!1);let n=ib(t);return n!==null?()=>n.factory(t):()=>new t}function Ab(t){if(vm(t))return Or(void 0,t.useValue);{let e=wm(t);return Or(e,As)}}function wm(t,e,n){let r;if(jr(t)){let i=Ue(t);return Vr(i)||zc(i)}else if(vm(t))r=()=>Ue(t.useValue);else if(Sb(t))r=()=>t.useFactory(...Hc(t.deps||[]));else if(Ib(t))r=()=>Z(Ue(t.useExisting));else{let i=Ue(t&&(t.useClass||t.provide));if(xb(t))r=()=>new i(...Hc(t.deps));else return Vr(i)||zc(i)}return r}function Or(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function xb(t){return!!t.deps}function Ob(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function kb(t){return typeof t=="function"||typeof t=="object"&&t instanceof $}function Gc(t,e){for(let n of t)Array.isArray(n)?Gc(n,e):n&&fm(n)?Gc(n.\u0275providers,e):e(n)}function rr(t,e){t instanceof ji&&t.assertNotDestroyed();let n,r=wn(t),i=rt(void 0);try{return e()}finally{wn(r),rt(i)}}function Rb(t){return typeof t=="function"}var Wc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function bm(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ir(){return Cm}function Cm(t){return t.type.prototype.ngOnChanges&&(t.setInput=Fb),Pb}ir.ngInherit=!0;function Pb(){let t=Dm(this),e=t?.current;if(e){let n=t.previous;if(n===Pr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Fb(t,e,n,r,i){let o=this.declaredInputs[r],s=Dm(t)||Lb(t,{previous:Pr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Wc(c&&c.currentValue,n,l===Pr),bm(t,e,i,n)}var _m="__ngSimpleChanges__";function Dm(t){return t[_m]||null}function Lb(t,e){return t[_m]=e}var cp=null;var Pt=function(t,e,n){cp?.(t,e,n)};function Vb(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Cm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Ku(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function xs(t,e,n){Em(t,e,3,n)}function Os(t,e,n,r){(t[k]&3)===n&&Em(t,e,n,r)}function Dc(t,e){let n=t[k];(n&3)===e&&(n&=16383,n+=1,t[k]=n)}function Em(t,e,n,r){let i=r!==void 0?t[xr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[xr]+=65536),(a<o||o==-1)&&($b(t,n,e,l),t[xr]=(t[xr]&4294901760)+l+2),l++}function up(t,e){Pt(4,t,e);let n=Ae(null);try{e.call(t)}finally{Ae(n),Pt(5,t,e)}}function $b(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[k]>>14<t[xr]>>16&&(t[k]&3)===e&&(t[k]+=16384,up(a,o)):up(a,o)}var Rr=-1,Yn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function jb(t){return t instanceof Yn}function Bb(t){return(t.flags&8)!==0}function Ub(t){return(t.flags&16)!==0}function Im(t){return t!==Rr}function Us(t){return t&32767}function Hb(t){return t>>16}function Hs(t,e){let n=Hb(t),r=e;for(;n>0;)r=r[Ur],n--;return r}var Yc=!0;function dp(t){let e=Yc;return Yc=t,e}var qb=256,Sm=qb-1,Mm=5,zb=0,Ft={};function Gb(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ai)&&(r=n[Ai]),r==null&&(r=n[Ai]=zb++);let i=r&Sm,o=1<<i;e.data[t+(i>>Mm)]|=o}function qs(t,e){let n=Nm(t,e);if(n!==-1)return n;let r=e[F];r.firstCreatePass&&(t.injectorIndex=e.length,Ec(r.data,t),Ec(e,null),Ec(r.blueprint,null));let i=Qu(t,e),o=t.injectorIndex;if(Im(i)){let s=Us(i),a=Hs(i,e),l=a[F].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Ec(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Nm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Qu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=km(i),r===null)return Rr;if(n++,i=i[Ur],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Rr}function Kc(t,e,n){Gb(t,e,n)}function Tm(t,e,n){if(n&H.Optional||t!==void 0)return t;zu(e,"NodeInjector")}function Am(t,e,n,r){if(n&H.Optional&&r===void 0&&(r=null),!(n&(H.Self|H.Host))){let i=t[Fr],o=rt(void 0);try{return i?i.get(e,r,n&H.Optional):hm(e,r,n&H.Optional)}finally{rt(o)}}return Tm(r,e,n)}function xm(t,e,n,r=H.Default,i){if(t!==null){if(e[k]&2048&&!(r&H.Self)){let s=Qb(t,e,n,r,Ft);if(s!==Ft)return s}let o=Om(t,e,n,r,Ft);if(o!==Ft)return o}return Am(e,n,r,i)}function Om(t,e,n,r,i){let o=Yb(n);if(typeof o=="function"){if(!Xp(e,t,r))return r&H.Host?Tm(i,n,r):Am(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&H.Optional))zu(n);else return s}finally{rm()}}else if(typeof o=="number"){let s=null,a=Nm(t,e),l=Rr,c=r&H.Host?e[wt][bt]:null;for((a===-1||r&H.SkipSelf)&&(l=a===-1?Qu(t,e):e[a+8],l===Rr||!hp(r,!1)?a=-1:(s=e[F],a=Us(l),e=Hs(l,e)));a!==-1;){let u=e[F];if(fp(o,a,u.data)){let d=Wb(a,e,n,s,r,c);if(d!==Ft)return d}l=e[a+8],l!==Rr&&hp(r,e[F].data[a+8]===c)&&fp(o,a,e)?(s=u,a=Us(l),e=Hs(l,e)):a=-1}}return i}function Wb(t,e,n,r,i,o){let s=e[F],a=s.data[t+8],l=r==null?na(a)&&Yc:r!=s&&(a.type&3)!==0,c=i&H.Host&&o===a,u=ks(a,s,n,l,c);return u!==null?Kn(e,s,u,a):Ft}function ks(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let m=s[h];if(h<l&&n===m||h>=l&&m.type===n)return h}if(i){let h=s[l];if(h&&bn(h)&&h.type===n)return l}return null}function Kn(t,e,n,r){let i=t[n],o=e.data;if(jb(i)){let s=i;s.resolving&&cb(lb(o[n]));let a=dp(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?rt(s.injectImpl):null,u=Xp(t,r,H.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Vb(n,o[n],e)}finally{c!==null&&rt(c),dp(a),s.resolving=!1,rm()}}return i}function Yb(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ai)?t[Ai]:void 0;return typeof e=="number"?e>=0?e&Sm:Kb:e}function fp(t,e,n){let r=1<<t;return!!(n[e+(t>>Mm)]&r)}function hp(t,e){return!(t&H.Self)&&!(t&H.Host&&e)}var Hn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return xm(this._tNode,this._lView,e,ia(r),n)}};function Kb(){return new Hn(Xe(),oe())}function Xi(t){return ea(()=>{let e=t.prototype.constructor,n=e[Fs]||Qc(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Fs]||Qc(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Qc(t){return dm(t)?()=>{let e=Qc(Ue(t));return e&&e()}:Vr(t)}function Qb(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[k]&2048&&!(s[k]&512);){let a=Om(o,s,n,r|H.Self,Ft);if(a!==Ft)return a;let l=o.parent;if(!l){let c=s[qp];if(c){let u=c.get(n,Ft,r);if(u!==Ft)return u}l=km(s),s=s[Ur]}o=l}return i}function km(t){let e=t[F],n=e.type;return n===2?e.declTNode:n===1?t[bt]:null}function pp(t,e=null,n=null,r){let i=Rm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Rm(t,e=null,n=null,r,i=new Set){let o=[n||it,Db(t)];return r=r||(typeof t=="object"?void 0:We(t)),new ji(o,e||Yu(),r||null,i)}var zr=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return pp({name:""},i,r,"");{let o=r.name??"";return pp({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=$i,e.NULL=new Bs,e.\u0275prov=R({token:e,providedIn:"any",factory:()=>Z(pm)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})(),Zb="ngOriginalError";function Ic(t){return t[Zb]}var nn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ic(e);for(;n&&Ic(n);)n=Ic(n);return n||null}},Pm=new $("",{providedIn:"root",factory:()=>N(nn).handleError.bind(void 0)});var Fm=!1,Jb=new $("",{providedIn:"root",factory:()=>Fm});var zs=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kp})`}};function aa(t){return t instanceof zs?t.changingThisBreaksApplicationSecurity:t}function Lm(t,e){let n=Xb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${kp})`)}return n===e}function Xb(t){return t instanceof zs&&t.getTypeName()||null}var eC=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Vm(t){return t=String(t),t.match(eC)?t:"unsafe:"+t}var Zu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Zu||{});function $m(t){let e=tC();return e?e.sanitize(Zu.URL,t)||"":Lm(t,"URL")?aa(t):Vm(qu(t))}function tC(){let t=oe();return t&&t[en].sanitizer}var jm=new Map,nC=0;function rC(){return nC++}function iC(t){jm.set(t[ta],t)}function oC(t){jm.delete(t[ta])}var mp="__ngContext__";function Qn(t,e){Un(e)?(t[mp]=e[ta],iC(e)):t[mp]=e}function Bm(t){return t instanceof Function?t():t}var rn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(rn||{}),sC;function Ju(t,e){return sC(t,e)}function kr(t,e,n,r,i){if(r!=null){let o,s=!1;sn(r)?o=r:Un(r)&&(s=!0,r=r[on]);let a=Vt(r);t===0&&n!==null?i==null?zm(e,n,a):Gs(e,n,a,i||null,!0):t===1&&n!==null?Gs(e,n,a,i||null,!0):t===2?DC(e,a,s):t===3&&e.destroyNode(a),o!=null&&IC(e,t,o,n,i)}}function aC(t,e){return t.createText(e)}function lC(t,e,n){t.setValue(e,n)}function Um(t,e,n){return t.createElement(e,n)}function cC(t,e){Hm(t,e),e[on]=null,e[bt]=null}function uC(t,e,n,r,i,o){r[on]=i,r[bt]=e,ca(t,r,n,1,i,o)}function Hm(t,e){ca(t,e,e[Ie],2,null,null)}function dC(t){let e=t[Fi];if(!e)return Sc(t[F],t);for(;e;){let n=null;if(Un(e))n=e[Fi];else{let r=e[Fe];r&&(n=r)}if(!n){for(;e&&!e[vt]&&e!==t;)Un(e)&&Sc(e[F],e),e=e[xe];e===null&&(e=t),Un(e)&&Sc(e[F],e),n=e&&e[vt]}e=n}}function fC(t,e,n,r){let i=Fe+r,o=n.length;r>0&&(n[i-1][vt]=e),r<o-Fe?(e[vt]=n[i],om(n,Fe+r,e)):(n.push(e),e[vt]=null),e[xe]=n;let s=e[Ki];s!==null&&n!==s&&hC(s,e);let a=e[tn];a!==null&&a.insertView(t),Vc(e),e[k]|=128}function hC(t,e){let n=t[Lr],i=e[xe][xe][wt];e[wt]!==i&&(t[k]|=Tu.HasTransplantedViews),n===null?t[Lr]=[e]:n.push(e)}function qm(t,e){let n=t[Lr],r=n.indexOf(e);n.splice(r,1)}function Bi(t,e){if(t.length<=Fe)return;let n=Fe+e,r=t[n];if(r){let i=r[Ki];i!==null&&i!==t&&qm(i,r),e>0&&(t[n-1][vt]=r[vt]);let o=$s(t,Fe+e);cC(r[F],r);let s=o[tn];s!==null&&s.detachView(o[F]),r[xe]=null,r[vt]=null,r[k]&=-129}return r}function la(t,e){if(!(e[k]&256)){let n=e[Ie];n.destroyNode&&ca(t,e,n,3,null,null),dC(e)}}function Sc(t,e){if(!(e[k]&256)){e[k]&=-129,e[k]|=256,e[zn]&&Sh(e[zn]),mC(t,e),pC(t,e),e[F].type===1&&e[Ie].destroy();let n=e[Ki];if(n!==null&&sn(e[xe])){n!==e[xe]&&qm(n,e);let r=e[tn];r!==null&&r.detachView(t)}oC(e)}}function pC(t,e){let n=t.cleanup,r=e[Pi];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Pi]=null);let i=e[xi];if(i!==null){e[xi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function mC(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Yn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Pt(4,a,l);try{l.call(a)}finally{Pt(5,a,l)}}else{Pt(4,i,o);try{o.call(i)}finally{Pt(5,i,o)}}}}}function gC(t,e,n){return yC(t,e.parent,n)}function yC(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[on];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Lt.None||o===Lt.Emulated)return null}return Ct(r,n)}}function Gs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function zm(t,e,n){t.appendChild(e,n)}function gp(t,e,n,r,i){r!==null?Gs(t,e,n,r,i):zm(t,e,n)}function vC(t,e,n,r){t.removeChild(e,n,r)}function Xu(t,e){return t.parentNode(e)}function wC(t,e){return t.nextSibling(e)}function bC(t,e,n){return _C(t,e,n)}function CC(t,e,n){return t.type&40?Ct(t,n):null}var _C=CC,yp;function ed(t,e,n,r){let i=gC(t,r,e),o=e[Ie],s=r.parent||e[bt],a=bC(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)gp(o,i,n[l],a,!1);else gp(o,i,n,a,!1);yp!==void 0&&yp(o,r,e,n,i)}function Rs(t,e){if(e!==null){let n=e.type;if(n&3)return Ct(e,t);if(n&4)return Zc(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Rs(t,r);{let i=t[e.index];return sn(i)?Zc(-1,i):Vt(i)}}else{if(n&32)return Ju(e,t)()||Vt(t[e.index]);{let r=Gm(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vi(t[wt]);return Rs(i,r)}else return Rs(t,e.next)}}}return null}function Gm(t,e){if(e!==null){let r=t[wt][bt],i=e.projection;return r.projection[i]}return null}function Zc(t,e){let n=Fe+t+1;if(n<e.length){let r=e[n],i=r[F].firstChild;if(i!==null)return Rs(r,i)}return e[Gn]}function DC(t,e,n){let r=Xu(t,e);r&&vC(t,r,e,n)}function td(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],l=n.type;if(s&&e===0&&(a&&Qn(Vt(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)td(t,e,n.child,r,i,o,!1),kr(e,t,i,a,o);else if(l&32){let c=Ju(n,r),u;for(;u=c();)kr(e,t,i,u,o);kr(e,t,i,a,o)}else l&16?EC(t,e,r,n,i,o):kr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ca(t,e,n,r,i,o){td(n,r,t.firstChild,e,i,o,!1)}function EC(t,e,n,r,i,o){let s=n[wt],l=s[bt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];kr(e,t,i,u,o)}else{let c=l,u=s[xe];sm(r)&&(c.flags|=128),td(t,e,c,u,i,o,!0)}}function IC(t,e,n,r,i){let o=n[Gn],s=Vt(n);o!==s&&kr(e,t,r,o,i);for(let a=Fe;a<n.length;a++){let l=n[a];ca(l[F],l,t,e,r,o)}}function SC(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:rn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=rn.Important),t.setStyle(n,r,i,o))}}function MC(t,e,n){t.setAttribute(e,"style",n)}function Wm(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ym(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Lc(t,e,r),i!==null&&Wm(t,e,i),o!==null&&MC(t,e,o)}var or={};function ue(t=1){Km(He(),oe(),er()+t,!1)}function Km(t,e,n,r){if(!r)if((e[k]&3)===3){let o=t.preOrderCheckHooks;o!==null&&xs(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Os(e,o,0,n)}Wn(n)}function z(t,e=H.Default){let n=oe();if(n===null)return Z(t,e);let r=Xe();return xm(r,n,Ue(t),e)}function Qm(t,e,n,r,i,o){let s=Ae(null);try{let a=null;i&Le.SignalBased&&(a=e[r][Jl]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Le.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):bm(e,a,r,o)}finally{Ae(s)}}function NC(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Wn(~i);else{let o=i,s=n[++r],a=n[++r];H0(s,o);let l=e[o];a(2,l)}}}finally{Wn(-1)}}function ua(t,e,n,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[on]=i,d[k]=r|4|128|8|64,(c!==null||t&&t[k]&2048)&&(d[k]|=2048),Yp(d),d[xe]=d[Ur]=t,d[Pe]=n,d[en]=s||t&&t[en],d[Ie]=a||t&&t[Ie],d[Fr]=l||t&&t[Fr]||null,d[bt]=o,d[ta]=rC(),d[Ri]=u,d[qp]=c,d[wt]=e.type==2?t[wt]:d,d}function da(t,e,n,r,i){let o=t.data[e];if(o===null)o=TC(t,e,n,r,i),U0()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=L0();o.injectorIndex=s===null?-1:s.injectorIndex}return Qi(o,!0),o}function TC(t,e,n,r,i){let o=Qp(),s=Zp(),a=s?o:o&&o.parent,l=t.data[e]=PC(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function Zm(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Jm(t,e,n,r,i){let o=er(),s=r&2;try{Wn(-1),s&&e.length>ot&&Km(t,e,ot,!1),Pt(s?2:0,i),n(r,i)}finally{Wn(o),Pt(s?3:1,i)}}function Xm(t,e,n){if(Gp(e)){let r=Ae(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{Ae(r)}}}function eg(t,e,n){Kp()&&(BC(t,e,n,Ct(n,e)),(n.flags&64)===64&&og(t,e,n))}function tg(t,e,n=Ct){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function ng(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=nd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function nd(t,e,n,r,i,o,s,a,l,c,u){let d=ot+r,f=d+i,h=AC(d,f),m=typeof c=="function"?c():c;return h[F]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}function AC(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:or);return n}function xC(t,e,n,r){let o=r.get(Jb,Fm)||n===Lt.ShadowDom,s=t.selectRootElement(e,o);return OC(s),s}function OC(t){kC(t)}var kC=()=>null;function RC(t,e,n,r){let i=lg(e);i.push(n),t.firstCreatePass&&cg(t).push(r,i.length-1)}function PC(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return R0()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vp(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=Le.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?wp(r,n,c,a,l):wp(r,n,c,a)}return r}function wp(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function FC(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,m=f?f.outputs:null;l=vp(0,d.inputs,u,l,h),c=vp(1,d.outputs,u,c,m);let p=l!==null&&s!==null&&!Lp(e)?QC(l,u,s):null;a.push(p)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function LC(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function rd(t,e,n,r,i,o,s,a){let l=Ct(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(id(t,n,u,r,i),na(e)&&VC(n,e.index)):e.type&3?(r=LC(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function VC(t,e){let n=_n(e,t);n[k]&16||(n[k]|=64)}function rg(t,e,n,r){if(Kp()){let i=r===null?null:{"":-1},o=HC(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&ig(t,e,n,s,i,a),i&&qC(n,r,i)}n.mergedAttrs=ki(n.mergedAttrs,n.attrs)}function ig(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Kc(qs(n,e),t,r[c].type);GC(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Zm(t,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];n.mergedAttrs=ki(n.mergedAttrs,u.hostAttrs),WC(t,n,e,l,u),zC(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}FC(t,n,o)}function $C(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;jC(s)!=a&&s.push(a),s.push(n,r,o)}}function jC(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function BC(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;na(n)&&YC(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||qs(n,e),Qn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let l=t.data[a],c=Kn(e,t,a,n);if(Qn(c,e),s!==null&&KC(e,a-i,c,l,n,s),bn(l)){let u=_n(n.index,e);u[Pe]=Kn(e,t,a,n)}}}function og(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=q0();try{Wn(o);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];$c(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&UC(l,c)}}finally{Wn(-1),$c(s)}}function UC(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function HC(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(d0(e,s.selectors,!1))if(r||(r=[]),bn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;Jc(t,e,l)}else r.unshift(s),Jc(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Jc(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function qC(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new x(-301,!1);r.push(e[i],o)}}}function zC(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;bn(e)&&(n[""]=t)}}function GC(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function WC(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Vr(i.type,!0)),s=new Yn(o,bn(i),z);t.blueprint[r]=s,n[r]=s,$C(t,e,r,Zm(t,n,i.hostVars,or),i)}function YC(t,e,n){let r=Ct(e,t),i=ng(n),o=t[en].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=fa(t,ua(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function KC(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];Qm(r,n,l,c,u,d)}}function QC(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function sg(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ag(t,e){let n=t.contentQueries;if(n!==null){let r=Ae(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Ru(o),a.contentQueries(2,e[s],s)}}}finally{Ae(r)}}}function fa(t,e){return t[Fi]?t[ip][vt]=e:t[Fi]=e,t[ip]=e,e}function Xc(t,e,n){Ru(0);let r=Ae(null);try{e(t,n)}finally{Ae(r)}}function lg(t){return t[Pi]||(t[Pi]=[])}function cg(t){return t.cleanup||(t.cleanup=[])}function ug(t,e){let n=t[Fr],r=n?n.get(nn,null):null;r&&r.handleError(e)}function id(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=e[s],u=t.data[s];Qm(u,c,r,a,l,i)}}function ZC(t,e,n){let r=Wp(e,t);lC(t[Ie],r,n)}function JC(t,e){let n=_n(e,t),r=n[F];XC(r,n);let i=n[on];i!==null&&n[Ri]===null&&(n[Ri]=Gu(i,n[Fr])),od(r,n,n[Pe])}function XC(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function od(t,e,n){Pu(e);try{let r=t.viewQuery;r!==null&&Xc(1,r,n);let i=t.template;i!==null&&Jm(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[tn]?.finishViewCreation(t),t.staticContentQueries&&ag(t,e),t.staticViewQueries&&Xc(2,t.viewQuery,n);let o=t.components;o!==null&&e_(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[k]&=-5,Fu()}}function e_(t,e){for(let n=0;n<e.length;n++)JC(t,e[n])}function ha(t,e,n,r){let i=e.tView,s=t[k]&4096?4096:16,a=ua(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),l=t[e.index];a[Ki]=l;let c=t[tn];return c!==null&&(a[tn]=c.createEmbeddedView(i)),od(i,a,n),a}function dg(t,e){let n=Fe+e;if(n<t.length)return t[n]}function Ui(t,e){return!e||e.firstChild===null||sm(t)}function pa(t,e,n,r=!0){let i=e[F];if(fC(i,e,t,n),r){let s=Zc(n,t),a=e[Ie],l=Xu(a,t[Gn]);l!==null&&uC(i,t[bt],a,e,l,s)}let o=e[Ri];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function fg(t,e){let n=Bi(t,e);return n!==void 0&&la(n[F],n),n}function Ws(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Vt(o)),sn(o)&&t_(o,r);let s=n.type;if(s&8)Ws(t,e,n.child,r);else if(s&32){let a=Ju(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=Gm(e,n);if(Array.isArray(a))r.push(...a);else{let l=Vi(e[wt]);Ws(l[F],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function t_(t,e){for(let n=Fe;n<t.length;n++){let r=t[n],i=r[F].firstChild;i!==null&&Ws(r[F],r,i,e)}t[Gn]!==t[on]&&e.push(t[Gn])}var hg=[];function n_(t){return t[zn]??r_(t)}function r_(t){let e=hg.pop()??Object.create(o_);return e.lView=t,e}function i_(t){t.lView[zn]!==t&&(t.lView=null,hg.push(t))}var o_=B(_({},Dh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Li(t.lView)},consumerOnSignalRead(){this.lView[zn]=this}});function pg(t){return gg(t[Fi])}function mg(t){return gg(t[vt])}function gg(t){for(;t!==null&&!sn(t);)t=t[vt];return t}var yg=100;function vg(t,e=!0,n=0){let r=t[en],i=r.rendererFactory,o=!1;o||i.begin?.();try{s_(t,n)}catch(s){throw e&&ug(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function s_(t,e){eu(t,e);let n=0;for(;ku(t);){if(n===yg)throw new x(103,!1);n++,eu(t,1)}}function a_(t,e,n,r){let i=e[k];if((i&256)===256)return;let o=!1;!o&&e[en].inlineEffectRunner?.flush(),Pu(e);let s=null,a=null;!o&&l_(t)&&(a=n_(e),s=Eh(a));try{Yp(e),j0(t.bindingStartIndex),n!==null&&Jm(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let d=t.preOrderCheckHooks;d!==null&&xs(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Os(e,d,0,null),Dc(e,0)}if(c_(e),wg(e,0),t.contentQueries!==null&&ag(t,e),!o)if(l){let d=t.contentCheckHooks;d!==null&&xs(e,d)}else{let d=t.contentHooks;d!==null&&Os(e,d,1),Dc(e,1)}NC(t,e);let c=t.components;c!==null&&Cg(e,c,0);let u=t.viewQuery;if(u!==null&&Xc(2,u,r),!o)if(l){let d=t.viewCheckHooks;d!==null&&xs(e,d)}else{let d=t.viewHooks;d!==null&&Os(e,d,2),Dc(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[bc]){for(let d of e[bc])d();e[bc]=null}o||(e[k]&=-73)}catch(l){throw Li(e),l}finally{a!==null&&(Ih(a,s),i_(a)),Fu()}}function l_(t){return t.type!==2}function wg(t,e){for(let n=pg(t);n!==null;n=mg(n))for(let r=Fe;r<n.length;r++){let i=n[r];bg(i,e)}}function c_(t){for(let e=pg(t);e!==null;e=mg(e)){if(!(e[k]&Tu.HasTransplantedViews))continue;let n=e[Lr];for(let r=0;r<n.length;r++){let i=n[r],o=i[xe];N0(i)}}}function u_(t,e,n){let r=_n(e,t);bg(r,n)}function bg(t,e){Ou(t)&&eu(t,e)}function eu(t,e){let r=t[F],i=t[k],o=t[zn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Xl(o)),o&&(o.dirty=!1),t[k]&=-9217,s)a_(r,t,r.template,t[Pe]);else if(i&8192){wg(t,1);let a=r.components;a!==null&&Cg(t,a,1)}}function Cg(t,e,n){for(let r=0;r<e.length;r++)u_(t,e[r],n)}function sd(t){for(t[en].changeDetectionScheduler?.notify();t;){t[k]|=64;let e=Vi(t);if(b0(t)&&!e)return t;t=e}return null}var Zn=class{get rootNodes(){let e=this._lView,n=e[F];return Ws(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pe]}set context(e){this._lView[Pe]=e}get destroyed(){return(this._lView[k]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xe];if(sn(e)){let n=e[Ls],r=n?n.indexOf(this):-1;r>-1&&(Bi(e,r),$s(n,r))}this._attachedToViewContainer=!1}la(this._lView[F],this._lView)}onDestroy(e){A0(this._lView,e)}markForCheck(){sd(this._cdRefInjectingView||this._lView)}detach(){this._lView[k]&=-129}reattach(){Vc(this._lView),this._lView[k]|=128}detectChanges(){this._lView[k]|=1024,vg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Hm(this._lView[F],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e,Vc(this._lView)}},Hi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=h_;let t=e;return t})(),d_=Hi,f_=class extends d_{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=ha(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Zn(i)}};function h_(){return ad(Xe(),oe())}function ad(t,e){return t.type&4?new f_(e,t,Hr(t,e)):null}var yk=new RegExp(`^(\\d+)*(${Cb}|${bb})*(.*)`);var p_=()=>null;function qi(t,e){return p_(t,e)}var tu=class{},nu=class{},Ys=class{};function m_(t){let e=Error(`No component factory found for ${We(t)}.`);return e[g_]=t,e}var g_="ngComponent";var ru=class{resolveComponentFactory(e){throw m_(e)}},ma=(()=>{let e=class e{};e.NULL=new ru;let t=e;return t})(),zi=class{},Gr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>y_();let t=e;return t})();function y_(){let t=oe(),e=Xe(),n=_n(e.index,t);return(Un(n)?n:t)[Ie]}var v_=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Mc={};function w_(t){return typeof t=="function"&&t[Jl]!==void 0}var bp=new Set;function ga(t){bp.has(t)||(bp.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function _g(t){return w_(t)&&typeof t.set=="function"}var sr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=b_;let t=e;return t})();function b_(t){return C_(Xe(),oe(),(t&16)===16)}function C_(t,e,n){if(na(t)&&!n){let r=_n(t.index,e);return new Zn(r,r)}else if(t.type&47){let r=e[wt];return new Zn(r,e)}return null}function Cp(...t){}function __(){let t=typeof Ti.requestAnimationFrame=="function",e=Ti[t?"requestAnimationFrame":"setTimeout"],n=Ti[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var _e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=__().nativeRequestAnimationFrame,I_(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new x(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,D_,Cp,Cp);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},D_={};function ld(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function E_(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ti,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,iu(t),t.isCheckStableRunning=!0,ld(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),iu(t))}function I_(t){let e=()=>{E_(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(S_(a))return n.invokeTask(i,o,s,a);try{return _p(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Dp(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return _p(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Dp(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,iu(t),ld(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function iu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function _p(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Dp(t){t._nesting--,ld(t)}function S_(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Dg=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function ou(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Jh(i,a);else if(o==2){let l=a,c=e[++s];r=Jh(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ks=class extends ma{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=qn(e);return new Gi(n,this.ngModule)}};function Ep(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function M_(t){let e=t.toLowerCase();return e==="svg"?C0:e==="math"?_0:null}var su=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ia(r);let i=this.injector.get(e,Mc,r);return i!==Mc||n===Mc?i:this.parentInjector.get(e,n,r)}},Gi=class extends Ys{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ep(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ep(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=m0(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof st?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new su(e,o):e,a=s.get(zi,null);if(a===null)throw new x(407,!1);let l=s.get(v_,null),c=s.get(Dg,null),u=s.get(tu,null),d={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:u},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",m=r?xC(f,r,this.componentDef.encapsulation,s):Um(f,h,M_(h)),p=512;this.componentDef.signals?p|=4096:this.componentDef.onPush||(p|=16);let g=null;m!==null&&(g=Gu(m,s,!0));let v=nd(0,null,null,1,0,null,null,null,null,null,null),w=ua(null,v,null,p,null,null,d,f,s,null,g);Pu(w);let b,D;try{let T=this.componentDef,C,te=null;T.findHostDirectiveDefs?(C=[],te=new Map,T.findHostDirectiveDefs(T,C,te),C.push(T)):C=[T];let ae=N_(w,m),we=T_(ae,m,T,C,w,d,f);D=xu(v,ot),m&&O_(f,T,m,r),n!==void 0&&k_(D,this.ngContentSelectors,n),b=x_(we,T,C,te,w,[R_]),od(v,w,null)}finally{Fu()}return new au(this.componentType,b,Hr(D,w),w,D)}},au=class extends nu{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Zn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;id(o[F],o,i,e,n),this.previousInputValues.set(e,n);let s=_n(this._tNode.index,o);sd(s)}}get injector(){return new Hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function N_(t,e){let n=t[F],r=ot;return t[r]=e,da(n,r,2,"#host",null)}function T_(t,e,n,r,i,o,s){let a=i[F];A_(r,t,e,s);let l=null;e!==null&&(l=Gu(e,i[Fr]));let c=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=ua(i,ng(n),null,u,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&Jc(a,t,r.length-1),fa(i,d),i[t.index]=d}function A_(t,e,n,r){for(let i of t)e.mergedAttrs=ki(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ou(e,e.mergedAttrs,!0),n!==null&&Ym(r,n,e))}function x_(t,e,n,r,i,o){let s=Xe(),a=i[F],l=Ct(s,i);ig(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Kn(i,a,d,s);Qn(f,i)}og(a,i,s),l&&Qn(l,i);let c=Kn(i,a,s.directiveStart+s.componentOffset,s);if(t[Pe]=i[Pe]=c,o!==null)for(let u of o)u(c,e);return Xm(a,s,i),c}function O_(t,e,n,r){if(r)Lc(t,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=g0(e.selectors[0]);i&&Lc(t,n,i),o&&o.length>0&&Wm(t,n,o.join(" "))}}function k_(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function R_(){let t=Xe();Ku(oe()[F],t)}var Wr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=P_;let t=e;return t})();function P_(){let t=Xe();return Ig(t,oe())}var F_=Wr,Eg=class extends F_{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Hr(this._hostTNode,this._hostLView)}get injector(){return new Hn(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qu(this._hostTNode,this._hostLView);if(Im(e)){let n=Hs(e,this._hostLView),r=Us(e),i=n[F].data[r+8];return new Hn(i,n)}else return new Hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Ip(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Fe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=qi(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ui(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!Rb(e),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let l=s?e:new Gi(qn(e)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let p=(s?c:this.parentInjector).get(st,null);p&&(o=p)}let u=qn(l.componentType??{}),d=qi(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,o);return this.insertImpl(h.hostView,a,Ui(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(M0(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[xe],c=new Eg(l,l[bt],l[xe]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return pa(s,i,o,r),e.attachToViewContainerRef(),om(Nc(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Ip(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Bi(this._lContainer,n);r&&($s(Nc(this._lContainer),n),la(r[F],r))}detach(e){let n=this._adjustIndex(e,-1),r=Bi(this._lContainer,n);return r&&$s(Nc(this._lContainer),n)!=null?new Zn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Ip(t){return t[Ls]}function Nc(t){return t[Ls]||(t[Ls]=[])}function Ig(t,e){let n,r=e[t.index];return sn(r)?n=r:(n=sg(r,e,null,t),e[t.index]=n,fa(e,n)),V_(n,e,t,r),new Eg(n,t,e)}function L_(t,e){let n=t[Ie],r=n.createComment(""),i=Ct(e,t),o=Xu(n,i);return Gs(n,o,r,wC(n,i),!1),r}var V_=B_,$_=()=>!1;function j_(t,e,n){return $_(t,e,n)}function B_(t,e,n,r){if(t[Gn])return;let i;n.type&8?i=Vt(r):i=L_(e,n),t[Gn]=i}var lu=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},cu=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)cd(e,n).matches!==null&&this.queries[n].setDirty()}},uu=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=K_(e):this.predicate=e}},du=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},fu=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,U_(n,o)),this.matchTNodeWithReadOption(e,n,ks(n,e,o,!1,!1))}else r===Hi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ks(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===$t||i===Wr||i===Hi&&n.type&4)this.addMatch(n.index,-2);else{let o=ks(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function U_(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function H_(t,e){return t.type&11?Hr(t,e):t.type&4?ad(t,e):null}function q_(t,e,n,r){return n===-1?H_(e,t):n===-2?z_(t,e,r):Kn(t,t[F],n,e)}function z_(t,e,n){if(n===$t)return Hr(e,t);if(n===Hi)return ad(e,t);if(n===Wr)return Ig(e,t)}function Sg(t,e,n,r){let i=e[tn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(q_(e,u,s[l+1],n.metadata.read))}}i.matches=a}return i.matches}function hu(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Sg(t,e,i,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=Fe;d<u.length;d++){let f=u[d];f[Ki]===f[xe]&&hu(f[F],f,c,r)}if(u[Lr]!==null){let d=u[Lr];for(let f=0;f<d.length;f++){let h=d[f];hu(h[F],h,c,r)}}}}}return r}function G_(t,e){return t[tn].queries[e].queryList}function W_(t,e,n){let r=new jc((n&4)===4);return RC(t,e,r,r.destroy),(e[tn]??=new cu).queries.push(new lu(r))-1}function Y_(t,e,n){let r=He();return r.firstCreatePass&&(Q_(r,new uu(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),W_(r,oe(),e)}function K_(t){return t.split(",").map(e=>e.trim())}function Q_(t,e,n){t.queries===null&&(t.queries=new du),t.queries.track(new fu(e,n))}function cd(t,e){return t.queries.getByIndex(e)}function Z_(t,e){let n=t[F],r=cd(n,e);return r.crossesNgTemplate?hu(n,t,e,[]):Sg(n,t,r,e)}function J_(t){return Object.getPrototypeOf(t.prototype).constructor}function an(t){let e=J_(t.type),n=!0,r=[t];for(;e;){let i;if(bn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Ns(t.inputs),s.inputTransforms=Ns(t.inputTransforms),s.declaredInputs=Ns(t.declaredInputs),s.outputs=Ns(t.outputs);let a=i.hostBindings;a&&rD(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&tD(t,l),c&&nD(t,c),X_(t,i),e0(t.outputs,i.outputs),bn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===an&&(n=!1)}}e=Object.getPrototypeOf(e)}eD(r)}function X_(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function eD(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ki(i.hostAttrs,n=ki(n,i.hostAttrs))}}function Ns(t){return t===Pr?{}:t===it?[]:t}function tD(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function nD(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function rD(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Cn=class{},Wi=class{};var pu=class extends Cn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ks(this);let i=Bp(e);this._bootstrapComponents=Bm(i.bootstrap),this._r3Injector=Rm(e,n,[{provide:Cn,useValue:this},{provide:ma,useValue:this.componentFactoryResolver},...r],We(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mu=class extends Wi{constructor(e){super(),this.moduleType=e}create(e){return new pu(this.moduleType,e,[])}};var Qs=class extends Cn{constructor(e){super(),this.componentFactoryResolver=new Ks(this),this.instance=null;let n=new ji([...e.providers,{provide:Cn,useValue:this},{provide:ma,useValue:this.componentFactoryResolver}],e.parent||Yu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ud(t,e,n=null){return new Qs({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ya=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new he(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Yr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function iD(t,e,n,r,i,o,s,a,l){let c=e.consts,u=da(e,t,4,s||null,Vs(c,a));rg(e,n,u,Vs(c,l)),Ku(e,u);let d=u.tView=nd(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function ge(t,e,n,r,i,o,s,a){let l=oe(),c=He(),u=t+ot,d=c.firstCreatePass?iD(u,c,l,e,n,r,i,o,s):c.data[u];Qi(d,!1);let f=oD(c,l,d,t);Vu()&&ed(c,l,f,d),Qn(f,l);let h=sg(f,l,f,d);return l[u]=h,fa(l,h),j_(h,d,l),Au(d)&&eg(c,l,d),s!=null&&tg(l,d,a),ge}var oD=sD;function sD(t,e,n,r){return $u(!0),e[Ie].createComment("")}function Mg(t,e,n,r){return Yr(t,Zi(),n)?e+qu(n)+r:or}function Ts(t,e){return t<<17|e<<2}function Jn(t){return t>>17&32767}function aD(t){return(t&2)==2}function lD(t,e){return t&131071|e<<17}function gu(t){return t|2}function Br(t){return(t&131068)>>2}function Tc(t,e){return t&-131069|e<<2}function cD(t){return(t&1)===1}function yu(t){return t|1}function uD(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Jn(s),l=Br(s);t[r]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Ji(d,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let f=Jn(t[a+1]);t[r+1]=Ts(f,a),f!==0&&(t[f+1]=Tc(t[f+1],r)),t[a+1]=lD(t[a+1],r)}else t[r+1]=Ts(a,0),a!==0&&(t[a+1]=Tc(t[a+1],r)),a=r;else t[r+1]=Ts(l,0),a===0?a=r:t[l+1]=Tc(t[l+1],r),l=r;c&&(t[r+1]=gu(t[r+1])),Sp(t,u,r,!0),Sp(t,u,r,!1),dD(e,u,t,r,o),s=Ts(a,l),o?e.classBindings=s:e.styleBindings=s}function dD(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ji(o,e)>=0&&(n[r+1]=yu(n[r+1]))}function Sp(t,e,n,r){let i=t[n+1],o=e===null,s=r?Jn(i):Br(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];fD(l,e)&&(a=!0,t[s+1]=r?yu(c):gu(c)),s=r?Jn(c):Br(c)}a&&(t[n+1]=r?gu(i):yu(i))}function fD(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ji(t,e)>=0:!1}function ln(t,e,n){let r=oe(),i=Zi();if(Yr(r,i,e)){let o=He(),s=Lu();rd(o,s,r,t,e,r[Ie],n,!1)}return ln}function Mp(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";id(t,n,o[s],s,r)}function va(t,e){return hD(t,e,null,!0),va}function hD(t,e,n,r){let i=oe(),o=He(),s=B0(2);if(o.firstUpdatePass&&mD(o,t,s,r),e!==or&&Yr(i,s,e)){let a=o.data[er()];bD(o,a,i,i[Ie],t,i[s+1]=CD(e,n),r,s)}}function pD(t,e){return e>=t.expandoStartIndex}function mD(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[er()],s=pD(t,n);_D(o,r)&&e===null&&!s&&(e=!1),e=gD(i,o,e,r),uD(i,o,e,n,s,r)}}function gD(t,e,n,r){let i=z0(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Ac(null,t,e,n,r),n=Yi(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Ac(i,t,e,n,r),o===null){let l=yD(t,e,r);l!==void 0&&Array.isArray(l)&&(l=Ac(null,t,e,l[1],r),l=Yi(l,e.attrs,r),vD(t,e,r,l))}else o=wD(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function yD(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Br(r)!==0)return t[Jn(r)]}function vD(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Jn(i)]=r}function wD(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Yi(r,s,n)}return Yi(r,e.attrs,n)}function Ac(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Yi(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Yi(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),eb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function bD(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=cD(c)?Np(l,e,n,i,Br(c),s):void 0;if(!Zs(u)){Zs(o)||aD(c)&&(o=Np(l,null,n,i,a,s));let d=Wp(er(),n);SC(r,s,d,i,o)}}function Np(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=n[i+1];f===or&&(f=d?it:void 0);let h=d?Cc(f,r):u===r?f:void 0;if(c&&!Zs(h)&&(h=Cc(l,r)),Zs(h)&&(a=h,s))return a;let m=t[i+1];i=s?Jn(m):Br(m)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Cc(l,r))}return a}function Zs(t){return t!==void 0}function CD(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=We(aa(t)))),t}function _D(t,e){return(t.flags&(e?8:16))!==0}var vu=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function xc(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function DD(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let l=t.at(o),c=e[o],u=xc(o,l,o,c,n);if(u!==0){u<0&&t.updateValue(o,c),o++;continue}let d=t.at(s),f=e[a],h=xc(s,d,a,f,n);if(h!==0){h<0&&t.updateValue(s,f),s--,a--;continue}let m=n(o,l),p=n(s,d),g=n(o,c);if(Object.is(g,p)){let v=n(a,f);Object.is(v,m)?(t.swap(o,s),t.updateValue(s,f),a--,s--):t.move(s,o),t.updateValue(o,c),o++;continue}if(r??=new Js,i??=Ap(t,o,s,n),wu(t,r,o,g))t.updateValue(o,c),o++,s++;else if(i.has(g))r.set(m,t.detach(o)),s--;else{let v=t.create(o,e[o]);t.attach(o,v),o++,s++}}for(;o<=a;)Tp(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),l=a.next();for(;!l.done&&o<=s;){let c=t.at(o),u=l.value,d=xc(o,c,o,u,n);if(d!==0)d<0&&t.updateValue(o,u),o++,l=a.next();else{r??=new Js,i??=Ap(t,o,s,n);let f=n(o,u);if(wu(t,r,o,f))t.updateValue(o,u),o++,s++,l=a.next();else if(!i.has(f))t.attach(o,t.create(o,u)),o++,s++,l=a.next();else{let h=n(o,c);r.set(h,t.detach(o)),s--}}}for(;!l.done;)Tp(t,r,n,t.length,l.value),l=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function wu(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Tp(t,e,n,r,i){if(wu(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Ap(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Js=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Se(t,e,n){ga("NgControlFlow");let r=oe(),i=Zi(),o=Du(r,ot+t),s=0;if(Yr(r,i,e)){let a=Ae(null);try{if(fg(o,s),e!==-1){let l=Eu(r[F],ot+e),c=qi(o,l.tView.ssrId),u=ha(r,l,n,{dehydratedView:c});pa(o,u,s,Ui(l,c))}}finally{Ae(a)}}else{let a=dg(o,s);a!==void 0&&(a[Pe]=n)}}var bu=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Fe}};function Ng(t,e){return e}var Cu=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Tg(t,e,n,r,i,o,s,a,l,c,u,d,f){ga("NgControlFlow");let h=l!==void 0,m=oe(),p=a?s.bind(m[wt][Pe]):s,g=new Cu(h,p);m[ot+t]=g,ge(t+1,e,n,r,i,o),h&&ge(t+2,l,c,u,d,f)}var _u=class extends vu{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Fe}at(e){return this.getLView(e)[Pe].$implicit}attach(e,n){let r=n[Ri];this.needsIndexUpdate||=e!==this.length,pa(this.lContainer,n,e,Ui(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,ED(this.lContainer,e)}create(e,n){let r=qi(this.lContainer,this.templateTNode.tView.ssrId);return ha(this.hostLView,this.templateTNode,new bu(this.lContainer,n,e),{dehydratedView:r})}destroy(e){la(e[F],e)}updateValue(e,n){this.getLView(e)[Pe].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Pe].$index=e}getLView(e){return ID(this.lContainer,e)}};function Ag(t){let e=Ae(null),n=er();try{let r=oe(),i=r[F],o=r[n];if(o.liveCollection===void 0){let a=n+1,l=Du(r,a),c=Eu(i,a);o.liveCollection=new _u(l,r,c)}else o.liveCollection.reset();let s=o.liveCollection;if(DD(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Zi(),l=s.length===0;if(Yr(r,a,l)){let c=n+2,u=Du(r,c);if(l){let d=Eu(i,c),f=qi(u,d.tView.ssrId),h=ha(r,d,void 0,{dehydratedView:f});pa(u,h,0,Ui(d,f))}else fg(u,0)}}}finally{Ae(e)}}function Du(t,e){return t[e]}function ED(t,e){return Bi(t,e)}function ID(t,e){return dg(t,e)}function Eu(t,e){return xu(t,e)}function SD(t,e,n,r,i,o){let s=e.consts,a=Vs(s,i),l=da(e,t,2,r,a);return rg(e,n,l,Vs(s,o)),l.attrs!==null&&ou(l,l.attrs,!1),l.mergedAttrs!==null&&ou(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function I(t,e,n,r){let i=oe(),o=He(),s=ot+t,a=i[Ie],l=o.firstCreatePass?SD(s,o,i,e,n,r):o.data[s],c=MD(o,i,l,a,e,t);i[s]=c;let u=Au(l);return Qi(l,!0),Ym(a,c,l),(l.flags&32)!==32&&Vu()&&ed(o,i,c,l),x0()===0&&Qn(c,i),O0(),u&&(eg(o,i,l),Xm(o,l,i)),r!==null&&tg(i,l),I}function S(){let t=Xe();Zp()?V0():(t=t.parent,Qi(t,!1));let e=t;P0(e)&&F0(),k0();let n=He();return n.firstCreatePass&&(Ku(n,t),Gp(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Bb(e)&&Mp(n,e,oe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ub(e)&&Mp(n,e,oe(),e.stylesWithoutHost,!1),S}function Oe(t,e,n,r){return I(t,e,n,r),S(),Oe}var MD=(t,e,n,r,i,o)=>($u(!0),Um(r,i,Y0()));function qe(){return oe()}var Xs="en-US";var ND=Xs;function TD(t){typeof t=="string"&&(ND=t.toLowerCase().replace(/_/g,"-"))}function ne(t,e,n,r){let i=oe(),o=He(),s=Xe();return xg(o,i,i[Ie],s,t,e,r),ne}function AD(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Pi],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function xg(t,e,n,r,i,o,s){let a=Au(r),c=t.firstCreatePass&&cg(t),u=e[Pe],d=lg(e),f=!0;if(r.type&3||s){let p=Ct(r,e),g=s?s(p):p,v=d.length,w=s?D=>s(Vt(D[r.index])):r.index,b=null;if(!s&&a&&(b=AD(t,e,i,r.index)),b!==null){let D=b.__ngLastListenerFn__||b;D.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,f=!1}else{o=Op(r,e,u,o,!1);let D=n.listen(g,i,o);d.push(o,D),c&&c.push(i,w,v,v+1)}}else o=Op(r,e,u,o,!1);let h=r.outputs,m;if(f&&h!==null&&(m=h[i])){let p=m.length;if(p)for(let g=0;g<p;g+=2){let v=m[g],w=m[g+1],T=e[v][w].subscribe(o),C=d.length;if(d.push(o,T),c){let te=typeof T=="function"?C+1:-(C+1);c.push(i,r.index,C,te)}}}}function xp(t,e,n,r){try{return Pt(6,e,n),n(r)!==!1}catch(i){return ug(t,i),!1}finally{Pt(7,e,n)}}function Op(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?_n(t.index,e):e;sd(a);let l=xp(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)l=xp(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function O(t=1){return W0(t)}function dd(t,e,n){return Og(t,"",e,"",n),dd}function Og(t,e,n,r,i){let o=oe(),s=Mg(o,e,n,r);if(s!==or){let a=He(),l=Lu();rd(a,l,o,t,s,o[Ie],i,!1)}return Og}function Kr(t,e,n){Y_(t,e,n)}function ar(t){let e=oe(),n=He(),r=Jp();Ru(r+1);let i=cd(n,r);if(t.dirty&&S0(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=Z_(e,r);t.reset(o,Q0),t.notifyOnChanges()}return!0}return!1}function lr(){return G_(oe(),Jp())}function fd(t){let e=$0();return I0(e,ot+t)}function E(t,e=""){let n=oe(),r=He(),i=t+ot,o=r.firstCreatePass?da(r,i,1,e,null):r.data[i],s=xD(r,n,o,e,t);n[i]=s,Vu()&&ed(r,n,s,o),Qi(o,!1)}var xD=(t,e,n,r,i)=>($u(!0),aC(e[Ie],r));function Qr(t){return $e("",t,""),Qr}function $e(t,e,n){let r=oe(),i=Mg(r,t,e,n);return i!==or&&ZC(r,er(),i),$e}function eo(t,e,n){_g(e)&&(e=e());let r=oe(),i=Zi();if(Yr(r,i,e)){let o=He(),s=Lu();rd(o,s,r,t,e,r[Ie],n,!1)}return eo}function wa(t,e){let n=_g(t);return n&&t.set(e),n}function to(t,e){let n=oe(),r=He(),i=Xe();return xg(r,n,n[Ie],i,t,e),to}function OD(t,e,n){let r=He();if(r.firstCreatePass){let i=bn(t);Iu(n,r.data,r.blueprint,i,!0),Iu(e,r.data,r.blueprint,i,!1)}}function Iu(t,e,n,r,i){if(t=Ue(t),Array.isArray(t))for(let o=0;o<t.length;o++)Iu(t[o],e,n,r,i);else{let o=He(),s=oe(),a=Xe(),l=jr(t)?t:Ue(t.provide),c=wm(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(jr(t)||!t.multi){let h=new Yn(c,i,z),m=kc(l,e,i?u:u+f,d);m===-1?(Kc(qs(a,s),o,l),Oc(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[m]=h,s[m]=h)}else{let h=kc(l,e,u+f,d),m=kc(l,e,u,u+f),p=h>=0&&n[h],g=m>=0&&n[m];if(i&&!g||!i&&!p){Kc(qs(a,s),o,l);let v=PD(i?RD:kD,n.length,i,r,c);!i&&g&&(n[m].providerFactory=v),Oc(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)}else{let v=kg(n[i?m:h],c,!i&&r);Oc(o,t,h>-1?h:m,v)}!i&&r&&g&&n[m].componentProviders++}}}function Oc(t,e,n,r){let i=jr(e),o=Mb(e);if(i||o){let l=(o?Ue(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function kg(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function kc(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function kD(t,e,n,r){return Su(this.multi,[])}function RD(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Kn(n,n[F],this.providerFactory.index,r);o=a.slice(0,s),Su(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Su(i,o);return o}function Su(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function PD(t,e,n,r,i){let o=new Yn(t,n,z);return o.multi=[],o.index=e,o.componentProviders=0,kg(o,i,r&&!n),o}function no(t,e=[]){return n=>{n.providersResolver=(r,i)=>OD(r,i?i(t):t,e)}}var FD=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=gm(!1,r.type),o=i.length>0?ud([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=R({token:e,providedIn:"environment",factory:()=>new e(Z(st))});let t=e;return t})();function je(t){ga("NgStandalone"),t.getStandaloneInjector=e=>e.get(FD).getOrCreateStandaloneInjector(t)}var ba=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Rg=new $("");function cr(t){return!!t&&typeof t.then=="function"}function Pg(t){return!!t&&typeof t.subscribe=="function"}var Fg=new $(""),Lg=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=N(Fg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(cr(s))r.push(s);else if(Pg(s)){let a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hd=new $("");function LD(){Mh(()=>{throw new x(600,!1)})}function VD(t){return t.isBoundToModule}function $D(t,e,n){try{let r=n();return cr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ro=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(Pm),this.afterRenderEffectManager=N(Dg),this.componentTypes=[],this.components=[],this.isStable=N(ya).hasPendingTasks.pipe(Y(r=>!r)),this._injector=N(st)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Ys;if(!this._injector.get(Lg).done){let h=!o&&jp(r),m=!1;throw new x(405,m)}let a;o?a=r:a=this._injector.get(ma).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=VD(a)?void 0:this._injector.get(Cn),c=i||a.selector,u=a.create(zr.NULL,[],c,l),d=u.location.nativeElement,f=u.injector.get(Rg,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Rc(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new x(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===yg)throw new x(103,!1);let o=r===0;for(let{_lView:s,notifyErrorHandler:a}of this._views)!o&&!Pc(s)||this.detectChangesInView(s,a,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:s})=>Pc(s))&&(i.execute(),!this._views.some(({_lView:s})=>Pc(s))))break}}detectChangesInView(r,i,o){let s;o?(s=0,r[k]|=1024):r[k]&64?s=0:s=1,vg(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Rc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(hd,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Rc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new x(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Rc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Pc(t){return ku(t)}var Mu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},pd=(()=>{let e=class e{compileModuleSync(r){return new mu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Bp(r),s=Bm(o.declarations).reduce((a,l)=>{let c=qn(l);return c&&a.push(new Gi(c)),a},[]);return new Mu(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jD=(()=>{let e=class e{constructor(){this.zone=N(_e),this.applicationRef=N(ro)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function BD(t){return[{provide:_e,useFactory:t},{provide:$r,multi:!0,useFactory:()=>{let e=N(jD,{optional:!0});return()=>e.initialize()}},{provide:$r,multi:!0,useFactory:()=>{let e=N(zD);return()=>{e.initialize()}}},{provide:Pm,useFactory:UD}]}function UD(){let t=N(_e),e=N(nn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function HD(t){let e=BD(()=>new _e(qD(t)));return oa([[],e])}function qD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var zD=(()=>{let e=class e{constructor(){this.subscription=new De,this.initialized=!1,this.zone=N(_e),this.pendingTasks=N(ya)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GD(){return typeof $localize<"u"&&$localize.locale||Xs}var md=new $("",{providedIn:"root",factory:()=>N(md,H.Optional|H.SkipSelf)||GD()});var Vg=new $("");var Ps=null;function WD(t=[],e){return zr.create({name:e,providers:[{provide:sa,useValue:"platform"},{provide:Vg,useValue:new Set([()=>Ps=null])},...t]})}function YD(t=[]){if(Ps)return Ps;let e=WD(t);return Ps=e,LD(),KD(e),e}function KD(t){t.get(Uu,null)?.forEach(n=>n())}function $g(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=YD(r),o=[HD(),...n||[]],a=new Qs({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(_e);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(nn,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:h=>{c.handleError(h)}})});let d=()=>a.destroy(),f=i.get(Vg);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),$D(c,l,()=>{let h=a.get(Lg);return h.runInitializers(),h.donePromise.then(()=>{let m=a.get(md,Xs);TD(m||Xs);let p=a.get(ro);return e!==void 0&&p.bootstrap(e),p})})})}catch(e){return Promise.reject(e)}}function Ca(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Ug=null;function cn(){return Ug}function Hg(t){Ug??=t}var _a=class{};var lt=new $(""),qg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>N(JD),providedIn:"platform"});let t=e;return t})();var JD=(()=>{let e=class e extends qg{constructor(){super(),this._doc=N(lt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cn().getBaseHref(this._doc)}onPopState(r){let i=cn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=cn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function zg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function jg(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ur(t){return t&&t[0]!=="?"?"?"+t:t}var Ea=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>N(Gg),providedIn:"root"});let t=e;return t})(),XD=new $(""),Gg=(()=>{let e=class e extends Ea{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??N(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return zg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ur(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+ur(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+ur(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Z(qg),Z(XD,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var io=(()=>{let e=class e{constructor(r){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=nE(jg(Bg(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ur(i))}normalize(r){return e.stripTrailingSlash(tE(this._basePath,Bg(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ur(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ur(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=ur,e.joinWithSlash=zg,e.stripTrailingSlash=jg,e.\u0275fac=function(i){return new(i||e)(Z(Ea))},e.\u0275prov=R({token:e,factory:()=>eE(),providedIn:"root"});let t=e;return t})();function eE(){return new io(Z(Ea))}function tE(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Bg(t){return t.replace(/\/index.html$/,"")}function nE(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Wg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Yg="browser",rE="server";function yd(t){return t===rE}var Da=class{};var bd=class extends _a{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Cd=class t extends bd{static makeCurrent(){Hg(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=oE();return n==null?null:sE(n)}resetBaseElement(){oo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Wg(document.cookie,e)}},oo=null;function oE(){return oo=oo||document.querySelector("base"),oo?oo.getAttribute("href"):null}function sE(t){return new URL(t,document.baseURI).pathname}var aE=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),_d=new $(""),Jg=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new x(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Z(_d),Z(_e))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Ia=class{constructor(e){this._doc=e}},vd="ng-app-id",Xg=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yd(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${vd}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(vd),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(vd,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Z(lt),Z(Bu),Z(Hu,8),Z(qr))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),wd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ed=/%COMP%/g,ey="%COMP%",lE=`_nghost-${ey}`,cE=`_ngcontent-${ey}`,uE=!0,dE=new $("",{providedIn:"root",factory:()=>uE});function fE(t){return cE.replace(Ed,t)}function hE(t){return lE.replace(Ed,t)}function ty(t,e){return e.map(n=>n.replace(Ed,t))}var Kg=(()=>{let e=class e{constructor(r,i,o,s,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=yd(l),this.defaultRenderer=new so(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Lt.ShadowDom&&(i=B(_({},i),{encapsulation:Lt.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Sa?o.applyToHost(r):o instanceof ao&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Lt.Emulated:s=new Sa(c,u,i,this.appId,d,a,l,f);break;case Lt.ShadowDom:return new Dd(c,u,r,i,a,l,this.nonce,f);default:s=new ao(c,u,i,d,a,l,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Z(Jg),Z(Xg),Z(Bu),Z(dE),Z(lt),Z(qr),Z(_e),Z(Hu))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),so=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(wd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Qg(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Qg(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=wd[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=wd[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(rn.DashCase|rn.Important)?e.style.setProperty(n,r,i&rn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&rn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=cn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Qg(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Dd=class extends so{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=ty(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ao=class extends so{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?ty(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Sa=class extends ao{constructor(e,n,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=fE(c),this.hostAttr=hE(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},pE=(()=>{let e=class e extends Ia{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(Z(lt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Zg=["alt","control","meta","shift"],mE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gE={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},yE=(()=>{let e=class e extends Ia{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),Zg.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=mE[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Zg.forEach(a=>{if(a!==o){let l=gE[a];l(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Z(lt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function ny(t,e){return $g(_({rootComponent:t},vE(e)))}function vE(t){return{appProviders:[...DE,...t?.providers??[]],platformProviders:_E}}function wE(){Cd.makeCurrent()}function bE(){return new nn}function CE(){return am(document),document}var _E=[{provide:qr,useValue:Yg},{provide:Uu,useValue:wE,multi:!0},{provide:lt,useFactory:CE,deps:[]}];var DE=[{provide:sa,useValue:"root"},{provide:nn,useFactory:bE,deps:[]},{provide:_d,useClass:pE,multi:!0,deps:[lt,_e,qr]},{provide:_d,useClass:yE,multi:!0,deps:[lt]},Kg,Xg,Jg,{provide:zi,useExisting:Kg},{provide:Da,useClass:aE,deps:[]},[]];var ry=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Z(lt))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var j="primary",Do=Symbol("RouteTitle"),Td=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ti(t){return new Td(t)}function SE(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ME(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!jt(t[n],e[n]))return!1;return!0}function jt(t,e){let n=t?Ad(t):void 0,r=e?Ad(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!cy(t[i],e[i]))return!1;return!0}function Ad(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function cy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function uy(t){return t.length>0?t[t.length-1]:null}function In(t){return dc(t)?t:cr(t)?ve(Promise.resolve(t)):L(t)}var NE={exact:fy,subset:hy},dy={exact:TE,subset:AE,ignored:()=>!0};function iy(t,e,n){return NE[n.paths](t.root,e.root,n.matrixParams)&&dy[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function TE(t,e){return jt(t,e)}function fy(t,e,n){if(!fr(t.segments,e.segments)||!Ta(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!fy(t.children[r],e.children[r],n))return!1;return!0}function AE(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>cy(t[n],e[n]))}function hy(t,e,n){return py(t,e,e.segments,n)}function py(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!fr(i,n)||e.hasChildren()||!Ta(i,n,r))}else if(t.segments.length===n.length){if(!fr(t.segments,n)||!Ta(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!hy(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!fr(t.segments,i)||!Ta(t.segments,i,r)||!t.children[j]?!1:py(t.children[j],e,o,r)}}function Ta(t,e,n){return e.every((r,i)=>dy[n](t[i].parameters,r.parameters))}var Dn=class{constructor(e=new se([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ti(this.queryParams),this._queryParamMap}toString(){return kE.serialize(this)}},se=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Aa(this)}},dr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ti(this.parameters),this._parameterMap}toString(){return gy(this)}};function xE(t,e){return fr(t,e)&&t.every((n,r)=>jt(n.parameters,e[r].parameters))}function fr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function OE(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===j&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==j&&(n=n.concat(e(i,r)))}),n}var nf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new Oa,providedIn:"root"});let t=e;return t})(),Oa=class{parse(e){let n=new Od(e);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${lo(e.root,!0)}`,r=FE(e.queryParams),i=typeof e.fragment=="string"?`#${RE(e.fragment)}`:"";return`${n}${r}${i}`}},kE=new Oa;function Aa(t){return t.segments.map(e=>gy(e)).join("/")}function lo(t,e){if(!t.hasChildren())return Aa(t);if(e){let n=t.children[j]?lo(t.children[j],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==j&&r.push(`${i}:${lo(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=OE(t,(r,i)=>i===j?[lo(t.children[j],!1)]:[`${i}:${lo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[j]!=null?`${Aa(t)}/${n[0]}`:`${Aa(t)}/(${n.join("//")})`}}function my(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ma(t){return my(t).replace(/%3B/gi,";")}function RE(t){return encodeURI(t)}function xd(t){return my(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xa(t){return decodeURIComponent(t)}function oy(t){return xa(t.replace(/\+/g,"%20"))}function gy(t){return`${xd(t.path)}${PE(t.parameters)}`}function PE(t){return Object.entries(t).map(([e,n])=>`;${xd(e)}=${xd(n)}`).join("")}function FE(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ma(n)}=${Ma(i)}`).join("&"):`${Ma(n)}=${Ma(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var LE=/^[^\/()?;#]+/;function Id(t){let e=t.match(LE);return e?e[0]:""}var VE=/^[^\/()?;=#]+/;function $E(t){let e=t.match(VE);return e?e[0]:""}var jE=/^[^=?&#]+/;function BE(t){let e=t.match(jE);return e?e[0]:""}var UE=/^[^&#]+/;function HE(t){let e=t.match(UE);return e?e[0]:""}var Od=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[j]=new se(e,n)),r}parseSegment(){let e=Id(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new dr(xa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=$E(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Id(this.remaining);i&&(r=i,this.capture(r))}e[xa(n)]=xa(r)}parseQueryParam(e){let n=BE(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=HE(this.remaining);s&&(r=s,this.capture(r))}let i=oy(n),o=oy(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Id(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new x(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=j);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[j]:new se([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}};function yy(t){return t.segments.length>0?new se([],{[j]:t}):t}function vy(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=vy(i);if(r===j&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new se(t.segments,e);return qE(n)}function qE(t){if(t.numberOfChildren===1&&t.children[j]){let e=t.children[j];return new se(t.segments.concat(e.segments),e.children)}return t}function ni(t){return t instanceof Dn}function zE(t,e,n=null,r=null){let i=wy(t);return by(i,e,n,r)}function wy(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new se(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=yy(r);return e??i}function by(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Sd(i,i,i,n,r);let o=GE(e);if(o.toRoot())return Sd(i,i,new se([],{}),n,r);let s=WE(o,i,t),a=s.processChildren?fo(s.segmentGroup,s.index,o.commands):_y(s.segmentGroup,s.index,o.commands);return Sd(i,s.segmentGroup,a,n,r)}function ka(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function mo(t){return typeof t=="object"&&t!=null&&t.outlets}function Sd(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=Cy(t,e,n);let a=yy(vy(s));return new Dn(a,o,i)}function Cy(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Cy(o,e,n)}),new se(t.segments,r)}var Ra=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ka(r[0]))throw new x(4003,!1);let i=r.find(mo);if(i&&i!==uy(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function GE(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ra(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ra(n,e,r)}var Xr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function WE(t,e,n){if(t.isAbsolute)return new Xr(e,!0,0);if(!n)return new Xr(e,!1,NaN);if(n.parent===null)return new Xr(n,!0,0);let r=ka(t.commands[0])?0:1,i=n.segments.length-1+r;return YE(n,i,t.numberOfDoubleDots)}function YE(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new Xr(r,!1,i-o)}function KE(t){return mo(t[0])?t[0].outlets:{[j]:t}}function _y(t,e,n){if(t??=new se([],{}),t.segments.length===0&&t.hasChildren())return fo(t,e,n);let r=QE(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new se(t.segments.slice(0,r.pathIndex),{});return o.children[j]=new se(t.segments.slice(r.pathIndex),t.children),fo(o,0,i)}else return r.match&&i.length===0?new se(t.segments,{}):r.match&&!t.hasChildren()?kd(t,e,n):r.match?fo(t,0,i):kd(t,e,n)}function fo(t,e,n){if(n.length===0)return new se(t.segments,{});{let r=KE(n),i={};if(Object.keys(r).some(o=>o!==j)&&t.children[j]&&t.numberOfChildren===1&&t.children[j].segments.length===0){let o=fo(t.children[j],e,n);return new se(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=_y(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new se(t.segments,i)}}function QE(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(mo(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!ay(l,c,s))return o;r+=2}else{if(!ay(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function kd(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(mo(o)){let l=ZE(o.outlets);return new se(r,l)}if(i===0&&ka(n[0])){let l=t.segments[e];r.push(new dr(l.path,sy(n[0]))),i++;continue}let s=mo(o)?o.outlets[j]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ka(a)?(r.push(new dr(s,sy(a))),i+=2):(r.push(new dr(s,{})),i++)}return new se(r,{})}function ZE(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=kd(new se([],{}),0,r))}),e}function sy(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ay(t,e,n){return t==n.path&&jt(e,n.parameters)}var ho="imperative",ke=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ke||{}),ut=class{constructor(e,n){this.id=e,this.url=n}},go=class extends ut{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ke.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hr=class extends ut{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ke.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ct=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ct||{}),Rd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Rd||{}),En=class extends ut{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ke.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pr=class extends ut{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ke.NavigationSkipped}},yo=class extends ut{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ke.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Pa=class extends ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pd=class extends ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fd=class extends ut{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ke.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ld=class extends ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vd=class extends ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class{constructor(e){this.route=e,this.type=ke.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jd=class{constructor(e){this.route=e,this.type=ke.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bd=class{constructor(e){this.snapshot=e,this.type=ke.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ud=class{constructor(e){this.snapshot=e,this.type=ke.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hd=class{constructor(e){this.snapshot=e,this.type=ke.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{constructor(e){this.snapshot=e,this.type=ke.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vo=class{},wo=class{constructor(e){this.url=e}};var zd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ba,this.attachRef=null}},Ba=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new zd,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fa=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Gd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Gd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Wd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wd(e,this._root).map(n=>n.value)}};function Gd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Gd(t,n);if(r)return r}return null}function Wd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Wd(t,n);if(r.length)return r.unshift(e),r}return[]}var et=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Jr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var La=class extends Fa{constructor(e,n){super(e),this.snapshot=n,of(this,e)}toString(){return this.snapshot.toString()}};function Dy(t){let e=JE(t),n=new he([new dr("",{})]),r=new he({}),i=new he({}),o=new he({}),s=new he(""),a=new ri(n,r,o,s,i,j,t,e.root);return a.snapshot=e.root,new La(new et(a,[]),e)}function JE(t){let e={},n={},r={},i="",o=new bo([],e,r,i,n,j,t,null,{});return new Va("",new et(o,[]))}var ri=class{constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Y(c=>c[Do]))??L(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>ti(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>ti(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&Iy(i)&&(r.resolve[Do]=i.title),r}var bo=class{get title(){return this.data?.[Do]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ti(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ti(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Va=class extends Fa{constructor(e,n){super(n),this.url=e,of(this,n)}toString(){return Ey(this._root)}};function of(t,e){e.value._routerState=t,e.children.forEach(n=>of(t,n))}function Ey(t){let e=t.children.length>0?` { ${t.children.map(Ey).join(", ")} } `:"";return`${t.value}${e}`}function Md(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,jt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),jt(e.params,n.params)||t.paramsSubject.next(n.params),ME(e.url,n.url)||t.urlSubject.next(n.url),jt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Yd(t,e){let n=jt(t.params,e.params)&&xE(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Yd(t.parent,e.parent))}function Iy(t){return typeof t.title=="string"||t.title===null}var sf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=j,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.parentContexts=N(Ba),this.location=N(Wr),this.changeDetector=N(sr),this.environmentInjector=N(st),this.inputBinder=N(af,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Kd(r,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Je({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ir]});let t=e;return t})(),Kd=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ri?this.route:e===Ba?this.childContexts:this.parent.get(e,n)}},af=new $("");function XE(t,e,n){let r=Co(t,e._root,n?n._root:void 0);return new La(r,e)}function Co(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=eI(t,e,n);return new et(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Co(t,a)),s}}let r=tI(e.value),i=e.children.map(o=>Co(t,o));return new et(r,i)}}function eI(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Co(t,r,i);return Co(t,r)})}function tI(t){return new ri(new he(t.url),new he(t.params),new he(t.queryParams),new he(t.fragment),new he(t.data),t.outlet,t.component,t)}var Sy="ngNavigationCancelingError";function My(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ni(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ny(!1,ct.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Ny(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Sy]=!0,n.cancellationCode=e,n}function nI(t){return Ty(t)&&ni(t.url)}function Ty(t){return!!t&&t[Sy]}var rI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ve({type:e,selectors:[["ng-component"]],standalone:!0,features:[je],decls:1,vars:0,template:function(i,o){i&1&&Oe(0,"router-outlet")},dependencies:[sf],encapsulation:2});let t=e;return t})();function iI(t,e){return t.providers&&!t._injector&&(t._injector=ud(t.providers,e,`Route: ${t.path}`)),t._injector??e}function lf(t){let e=t.children&&t.children.map(lf),n=e?B(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==j&&(n.component=rI),n}function Bt(t){return t.outlet||j}function oI(t,e){let n=t.filter(r=>Bt(r)===e);return n.push(...t.filter(r=>Bt(r)!==e)),n}function Eo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var sI=(t,e,n,r)=>Y(i=>(new Qd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Qd=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Md(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Jr(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Jr(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ud(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Md(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Md(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Eo(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},$a=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ei=class{constructor(e,n){this.component=e,this.route=n}};function aI(t,e,n){let r=t._root,i=e?e._root:null;return co(r,i,n,[r.value])}function lI(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function oi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!lm(t)?t:e.get(t):r}function co(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Jr(e);return t.children.forEach(s=>{cI(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>po(a,n.getContext(s),i)),i}function cI(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=uI(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new $a(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?co(t,e,a?a.children:null,r,i):co(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ei(a.outlet.component,s))}else s&&po(e,a,i),i.canActivateChecks.push(new $a(r)),o.component?co(t,null,a?a.children:null,r,i):co(t,null,n,r,i);return i}function uI(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!fr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fr(t.url,e.url)||!jt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yd(t,e)||!jt(t.queryParams,e.queryParams);case"paramsChange":default:return!Yd(t,e)}}function po(t,e,n){let r=Jr(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?po(s,e.children.getContext(o),n):po(s,null,n):po(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ei(e.outlet.component,i)):n.canDeactivateChecks.push(new ei(null,i)):n.canDeactivateChecks.push(new ei(null,i))}function Io(t){return typeof t=="function"}function dI(t){return typeof t=="boolean"}function fI(t){return t&&Io(t.canLoad)}function hI(t){return t&&Io(t.canActivate)}function pI(t){return t&&Io(t.canActivateChild)}function mI(t){return t&&Io(t.canDeactivate)}function gI(t){return t&&Io(t.canMatch)}function Ay(t){return t instanceof Jt||t?.name==="EmptyError"}var Na=Symbol("INITIAL_VALUE");function ii(){return gt(t=>Is(t.map(e=>e.pipe(Xt(1),yc(Na)))).pipe(Y(e=>{for(let n of e)if(n!==!0){if(n===Na)return Na;if(n===!1||n instanceof Dn)return n}return!0}),mt(e=>e!==Na),Xt(1)))}function yI(t,e){return Ee(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?L(B(_({},n),{guardsResult:!0})):vI(s,r,i,t).pipe(Ee(a=>a&&dI(a)?wI(r,o,t,e):L(a)),Y(a=>B(_({},n),{guardsResult:a})))})}function vI(t,e,n,r){return ve(t).pipe(Ee(i=>EI(i.component,i.route,n,e,r)),Rt(i=>i!==!0,!0))}function wI(t,e,n,r){return ve(e).pipe(Tr(i=>Nr(CI(i.route.parent,r),bI(i.route,r),DI(t,i.path,n),_I(t,i.route,n))),Rt(i=>i!==!0,!0))}function bI(t,e){return t!==null&&e&&e(new Hd(t)),L(!0)}function CI(t,e){return t!==null&&e&&e(new Bd(t)),L(!0)}function _I(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return L(!0);let i=r.map(o=>Ss(()=>{let s=Eo(e)??n,a=oi(o,s),l=hI(a)?a.canActivate(e,t):rr(s,()=>a(e,t));return In(l).pipe(Rt())}));return L(i).pipe(ii())}function DI(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>lI(s)).filter(s=>s!==null).map(s=>Ss(()=>{let a=s.guards.map(l=>{let c=Eo(s.node)??n,u=oi(l,c),d=pI(u)?u.canActivateChild(r,t):rr(c,()=>u(r,t));return In(d).pipe(Rt())});return L(a).pipe(ii())}));return L(o).pipe(ii())}function EI(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return L(!0);let s=o.map(a=>{let l=Eo(e)??i,c=oi(a,l),u=mI(c)?c.canDeactivate(t,e,n,r):rr(l,()=>c(t,e,n,r));return In(u).pipe(Rt())});return L(s).pipe(ii())}function II(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return L(!0);let o=i.map(s=>{let a=oi(s,t),l=fI(a)?a.canLoad(e,n):rr(t,()=>a(e,n));return In(l)});return L(o).pipe(ii(),xy(r))}function xy(t){return ac(Ne(e=>{if(ni(e))throw My(t,e)}),Y(e=>e===!0))}function SI(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return L(!0);let o=i.map(s=>{let a=oi(s,t),l=gI(a)?a.canMatch(e,n):rr(t,()=>a(e,n));return In(l)});return L(o).pipe(ii(),xy(r))}var _o=class{constructor(e){this.segmentGroup=e||null}},ja=class extends Error{constructor(e){super(),this.urlTree=e}};function Zr(t){return Mr(new _o(t))}function MI(t){return Mr(new x(4e3,!1))}function NI(t){return Mr(Ny(!1,ct.GuardRejected))}var Zd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return L(r);if(i.numberOfChildren>1||!i.children[j])return MI(e.redirectTo);i=i.children[j]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new ja(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new se(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Jd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TI(t,e,n,r,i){let o=cf(t,e,n);return o.matched?(r=iI(e,r),SI(r,e,n,i).pipe(Y(s=>s===!0?o:_({},Jd)))):L(o)}function cf(t,e,n){if(e.path==="**")return AI(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},Jd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||SE)(n,t,e);if(!i)return _({},Jd);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function AI(t){return{matched:!0,parameters:t.length>0?uy(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ly(t,e,n,r){return n.length>0&&kI(t,n,r)?{segmentGroup:new se(e,OI(r,new se(n,t.children))),slicedSegments:[]}:n.length===0&&RI(t,n,r)?{segmentGroup:new se(t.segments,xI(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new se(t.segments,t.children),slicedSegments:n}}function xI(t,e,n,r){let i={};for(let o of n)if(Ua(t,e,o)&&!r[Bt(o)]){let s=new se([],{});i[Bt(o)]=s}return _(_({},r),i)}function OI(t,e){let n={};n[j]=e;for(let r of t)if(r.path===""&&Bt(r)!==j){let i=new se([],{});n[Bt(r)]=i}return n}function kI(t,e,n){return n.some(r=>Ua(t,e,r)&&Bt(r)!==j)}function RI(t,e,n){return n.some(r=>Ua(t,e,r))}function Ua(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function PI(t,e,n,r){return Bt(t)!==r&&(r===j||!Ua(e,n,t))?!1:cf(e,t,n).matched}function FI(t,e,n){return e.length===0&&!t.children[n]}var Xd=class{};function LI(t,e,n,r,i,o,s="emptyOnly"){return new ef(t,e,n,r,i,s,o).recognize()}var VI=31,ef=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Zd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new x(4002,`'${e.segmentGroup}'`)}recognize(){let e=ly(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(n=>{let r=new bo([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},j,this.rootComponentType,null,{}),i=new et(r,n),o=new Va("",i),s=zE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,j).pipe(yn(r=>{if(r instanceof ja)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _o?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=rf(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Y(o=>o instanceof et?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ve(i).pipe(Tr(o=>{let s=r.children[o],a=oI(n,o);return this.processSegmentGroup(e,a,s,o)}),gc((o,s)=>(o.push(...s),o)),vn(null),mc(),Ee(o=>{if(o===null)return Zr(r);let s=Oy(o);return $I(s),L(s)}))}processSegment(e,n,r,i,o,s){return ve(n).pipe(Tr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(yn(l=>{if(l instanceof _o)return L(null);throw l}))),Rt(a=>!!a),yn(a=>{if(Ay(a))return FI(r,i,o)?L(new Xd):Zr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return PI(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Zr(i):Zr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=cf(n,i,o);if(!a)return Zr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>VI&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ee(f=>this.processSegment(e,r,n,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=TI(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(gt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(gt(({routes:l})=>{let c=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new bo(u,f,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,BI(r),Bt(r),r.component??r._loadedComponent??null,r,UI(r)),{segmentGroup:m,slicedSegments:p}=ly(n,u,d,l);if(p.length===0&&m.hasChildren())return this.processChildren(c,l,m).pipe(Y(v=>v===null?null:new et(h,v)));if(l.length===0&&p.length===0)return L(new et(h,[]));let g=Bt(r)===o;return this.processSegment(c,l,m,p,g?j:o,!0).pipe(Y(v=>new et(h,v instanceof et?[v]:[])))}))):Zr(n)))}getChildConfig(e,n,r){return n.children?L({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?L({routes:n._loadedRoutes,injector:n._loadedInjector}):II(e,n,r,this.urlSerializer).pipe(Ee(i=>i?this.configLoader.loadChildren(e,n).pipe(Ne(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):NI(n))):L({routes:[],injector:e})}};function $I(t){t.sort((e,n)=>e.value.outlet===j?-1:n.value.outlet===j?1:e.value.outlet.localeCompare(n.value.outlet))}function jI(t){let e=t.value.routeConfig;return e&&e.path===""}function Oy(t){let e=[],n=new Set;for(let r of t){if(!jI(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Oy(r.children);e.push(new et(r.value,i))}return e.filter(r=>!n.has(r))}function BI(t){return t.data||{}}function UI(t){return t.resolve||{}}function HI(t,e,n,r,i,o){return Ee(s=>LI(t,e,n,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:l})=>B(_({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function qI(t,e){return Ee(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return L(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of ky(l))s.add(c);let a=0;return ve(s).pipe(Tr(l=>o.has(l)?zI(l,r,t,e):(l.data=rf(l,l.parent,t).resolve,L(void 0))),Ne(()=>a++),Ar(1),Ee(l=>a===s.size?L(n):nt))})}function ky(t){let e=t.children.map(n=>ky(n)).flat();return[t,...e]}function zI(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Iy(i)&&(o[Do]=i.title),GI(o,t,e,r).pipe(Y(s=>(t._resolvedData=s,t.data=rf(t,t.parent,n).resolve,null)))}function GI(t,e,n,r){let i=Ad(t);if(i.length===0)return L({});let o={};return ve(i).pipe(Ee(s=>WI(t[s],e,n,r).pipe(Rt(),Ne(a=>{o[s]=a}))),Ar(1),pc(o),yn(s=>Ay(s)?nt:Mr(s)))}function WI(t,e,n,r){let i=Eo(e)??r,o=oi(t,i),s=o.resolve?o.resolve(e,n):rr(i,()=>o(e,n));return In(s)}function Nd(t){return gt(e=>{let n=t(e);return n?ve(n).pipe(Y(()=>e)):L(e)})}var Ry=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===j);return i}getResolvedTitleForRoute(r){return r.data[Do]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>N(YI),providedIn:"root"});let t=e;return t})(),YI=(()=>{let e=class e extends Ry{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Z(ry))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uf=new $("",{providedIn:"root",factory:()=>({})}),df=new $(""),KI=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(pd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return L(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=In(r.loadComponent()).pipe(Y(Py),Ne(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ni(()=>{this.componentLoaders.delete(r)})),o=new Sr(i,()=>new Ze).pipe(Ir());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return L({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=QI(i,this.compiler,r,this.onLoadEndListener).pipe(Ni(()=>{this.childrenLoaders.delete(i)})),a=new Sr(s,()=>new Ze).pipe(Ir());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function QI(t,e,n,r){return In(t.loadChildren()).pipe(Y(Py),Ee(i=>i instanceof Wi||Array.isArray(i)?L(i):ve(e.compileModuleAsync(i))),Y(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(df,[],{optional:!0,self:!0}).flat()),{routes:s.map(lf),injector:o}}))}function ZI(t){return t&&typeof t=="object"&&"default"in t}function Py(t){return ZI(t)?t.default:t}var ff=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>N(JI),providedIn:"root"});let t=e;return t})(),JI=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),XI=new $("");var eS=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ze,this.transitionAbortSubject=new Ze,this.configLoader=N(KI),this.environmentInjector=N(st),this.urlSerializer=N(nf),this.rootContexts=N(Ba),this.location=N(io),this.inputBindingEnabled=N(af,{optional:!0})!==null,this.titleStrategy=N(Ry),this.options=N(uf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(ff),this.createViewTransition=N(XI,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>L(void 0),this.rootComponentType=null;let r=o=>this.events.next(new $d(o)),i=o=>this.events.next(new jd(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(B(_(_({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new he({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ho,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(s=>s.id!==0),Y(s=>B(_({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),gt(s=>{this.currentTransition=s;let a=!1,l=!1;return L(s).pipe(Ne(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?B(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),gt(c=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new pr(c.id,this.urlSerializer.serialize(c.rawUrl),f,Rd.IgnoredSameUrlNavigation)),c.resolve(null),nt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return L(c).pipe(gt(f=>{let h=this.transitions?.getValue();return this.events.next(new go(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?nt:Promise.resolve(f)}),HI(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ne(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=B(_({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Pa(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:h,source:m,restoredState:p,extras:g}=c,v=new go(f,this.urlSerializer.serialize(h),m,p);this.events.next(v);let w=Dy(this.rootComponentType).snapshot;return this.currentTransition=s=B(_({},c),{targetSnapshot:w,urlAfterRedirects:h,extras:B(_({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,L(s)}else{let f="";return this.events.next(new pr(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Rd.IgnoredByUrlHandlingStrategy)),c.resolve(null),nt}}),Ne(c=>{let u=new Pd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Y(c=>(this.currentTransition=s=B(_({},c),{guards:aI(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),yI(this.environmentInjector,c=>this.events.next(c)),Ne(c=>{if(s.guardsResult=c.guardsResult,ni(c.guardsResult))throw My(this.urlSerializer,c.guardsResult);let u=new Fd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),mt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ct.GuardRejected),!1)),Nd(c=>{if(c.guards.canActivateChecks.length)return L(c).pipe(Ne(u=>{let d=new Ld(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),gt(u=>{let d=!1;return L(u).pipe(qI(this.paramsInheritanceStrategy,this.environmentInjector),Ne({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",ct.NoDataFromResolver)}}))}),Ne(u=>{let d=new Vd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Nd(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ne(h=>{d.component=h}),Y(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Is(u(c.targetSnapshot.root)).pipe(vn(null),Xt(1))}),Nd(()=>this.afterPreactivation()),gt(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?ve(d).pipe(Y(()=>s)):L(s)}),Y(c=>{let u=XE(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=B(_({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ne(()=>{this.events.next(new vo)}),sI(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Xt(1),Ne({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),vc(this.transitionAbortSubject.pipe(Ne(c=>{throw c}))),Ni(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",ct.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),yn(c=>{if(l=!0,Ty(c))this.events.next(new En(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),nI(c)?this.events.next(new wo(c.url)):s.resolve(!1);else{this.events.next(new yo(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return nt}))}))}cancelNavigationTransition(r,i,o){let s=new En(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tS(t){return t!==ho}var nS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>N(rS),providedIn:"root"});let t=e;return t})(),tf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},rS=(()=>{let e=class e extends tf{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Xi(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>N(iS),providedIn:"root"});let t=e;return t})(),iS=(()=>{let e=class e extends Fy{constructor(){super(...arguments),this.location=N(io),this.urlSerializer=N(nf),this.options=N(uf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(ff),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Dn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Dy(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof go)this.stateMemento=this.createStateMemento();else if(r instanceof pr)this.rawUrlTree=i.initialUrl;else if(r instanceof Pa){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof vo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof En&&(r.code===ct.GuardRejected||r.code===ct.NoDataFromResolver)?this.restoreHistory(i):r instanceof yo?this.restoreHistory(i,!0):r instanceof hr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=_(_({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=_(_({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Xi(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(uo||{});function oS(t,e){t.events.pipe(mt(n=>n instanceof hr||n instanceof En||n instanceof yo||n instanceof pr),Y(n=>n instanceof hr||n instanceof pr?uo.COMPLETE:(n instanceof En?n.code===ct.Redirect||n.code===ct.SupersededByNewNavigation:!1)?uo.REDIRECTING:uo.FAILED),mt(n=>n!==uo.REDIRECTING),Xt(1)).subscribe(()=>{e()})}function sS(t){throw t}var aS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ly=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=N(ba),this.stateManager=N(Fy),this.options=N(uf,{optional:!0})||{},this.pendingTasks=N(ya),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(eS),this.urlSerializer=N(nf),this.location=N(io),this.urlHandlingStrategy=N(ff),this._events=new Ze,this.errorHandler=this.options.errorHandler||sS,this.navigated=!1,this.routeReuseStrategy=N(nS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(df,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(af,{optional:!0}),this.eventsSubscription=new De,this.isNgZoneEnabled=N(_e)instanceof _e&&_e.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof En&&i.code!==ct.Redirect&&i.code!==ct.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof hr)this.navigated=!0;else if(i instanceof wo){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||tS(o.source)};this.scheduleNavigation(a,ho,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}uS(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ho,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=_({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(lf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=_(_({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=wy(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return by(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=ni(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ho,null,i)}navigate(r,i={skipLocationChange:!1}){return cS(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=_({},aS):i===!1?o=_({},lS):o=i,ni(r))return iy(this.currentUrlTree,r,o);let s=this.parseUrl(r);return iy(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,h)=>{l=f,c=h});let d=this.pendingTasks.add();return oS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cS(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new x(4008,!1)}function uS(t){return!(t instanceof vo)&&!(t instanceof wo)}var dS=new $("");function Vy(t,...e){return oa([{provide:df,multi:!0,useValue:t},[],{provide:ri,useFactory:fS,deps:[Ly]},{provide:hd,multi:!0,useFactory:hS},e.map(n=>n.\u0275providers)])}function fS(t){return t.routerState.root}function hS(){let t=N(zr);return e=>{let n=t.get(ro);if(e!==n.components[0])return;let r=t.get(Ly),i=t.get(pS);t.get(mS)===1&&r.initialNavigation(),t.get(gS,null,H.Optional)?.setUpPreloading(),t.get(dS,null,H.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var pS=new $("",{factory:()=>new Ze}),mS=new $("",{providedIn:"root",factory:()=>1});var gS=new $("");var $y=[];var jy={providers:[Vy($y)]};var KR=new TextDecoder,By=new TextEncoder,yS=["#CMDOK","#CMDER","#CMDUN","#CMDSM","#CMDSY"];function tt(t,e){return t.toString(16).toUpperCase().padStart(e,"0")}function Ut(t){return t.reduce((e,n)=>e+tt(n,2),"")}function Ha(t){return Uint8Array.from(t.match(/.{2}/g).map(e=>parseInt(e,16)))}function Mo(t,e){t.match(/.{2}/g).map((n,r)=>e[r]=Number.parseInt(n,16))}function Uy(t,e){if(yS.includes(t))return;let n;if(t[0]=="#")n=By.encode([t].concat(e).join("	")+"	");else if(t[0]=="$")n=By.encode([t.slice(1)]+e.join(","));else return;let r=n.reduce((i,o)=>o==33?i:i^o);return tt(r,2)}var So=class{constructor({encoded:e,type:n,args:r}){if(this.args=r||[],!e){if(!n)throw new Error("Missing message type");this.type=n,this.checksum_calc=Uy(n,this.args);return}if(e[0]=="#"){let i=e.replace(/[\r\n]*$/,"").split("	");this.type=i[0],i.length>1&&(this.checksum_recv=i.at(-1)),i.length>2&&(this.args=i.slice(1,-1))}else if(e[0]=="$"){this.type=e.slice(0,5);let i=e.slice(5).replace(/[\r\n]*$/,"").split("*");this.checksum_recv=i[1],this.args=i[0].split(",")}else throw new Error(`Invalid message ${e}`);this.checksum_calc=Uy(this.type,this.args)}toString(){if(!this.checksum_calc)return this.type+`\r
`;let e=this.checksum_recv||this.checksum_calc;if(this.type[0]=="#")return[this.type].concat(this.args).concat([e]).join("	")+`\r
`;if(this.type[0]=="$")return[this.type]+this.args.join(",")+`*${e}\r
`;throw new Error(`Unknown message type ${this.type}`)}validate(){return!this.checksum_calc||!this.checksum_recv||this.checksum_calc==this.checksum_recv}};var yh=Mw(Hy());var mf=class{constructor(e,n){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=n}generateVariable(e){let n=[...this.scopes[this.scopes.length-1]];return e&&n.push(e),n.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+`
`}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let n=this.reverseImports.get(e);return n||(n=this.imports.push(e)-1,this.reverseImports.set(e,n)),`${this.importPath}[${n}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){let n=this.references.get(e);n&&(n.resolved=!0)}markRequested(e){e.forEach(n=>{let r=this.references.get(n);r&&(r.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([e,n])=>!n.resolved&&!n.requested).map(([e,n])=>e)}},_t=new Map,mr="___parser_",Dt={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},qa={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},za={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},No=class t{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new t}primitiveGenerateN(e,n){let r=qa[e],i=za[e];n.pushCode(`${n.generateVariable(this.varName)} = dataView.get${r}(offset, ${i});`),n.pushCode(`offset += ${Dt[e]};`)}primitiveN(e,n,r){return this.setNextParser(e,n,r)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,n={}){return this.primitiveN("uint8",e,n)}uint16(e,n={}){return this.primitiveN(this.useThisEndian("uint16"),e,n)}uint16le(e,n={}){return this.primitiveN("uint16le",e,n)}uint16be(e,n={}){return this.primitiveN("uint16be",e,n)}uint32(e,n={}){return this.primitiveN(this.useThisEndian("uint32"),e,n)}uint32le(e,n={}){return this.primitiveN("uint32le",e,n)}uint32be(e,n={}){return this.primitiveN("uint32be",e,n)}int8(e,n={}){return this.primitiveN("int8",e,n)}int16(e,n={}){return this.primitiveN(this.useThisEndian("int16"),e,n)}int16le(e,n={}){return this.primitiveN("int16le",e,n)}int16be(e,n={}){return this.primitiveN("int16be",e,n)}int32(e,n={}){return this.primitiveN(this.useThisEndian("int32"),e,n)}int32le(e,n={}){return this.primitiveN("int32le",e,n)}int32be(e,n={}){return this.primitiveN("int32be",e,n)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,n={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,n)}int64be(e,n={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,n)}int64le(e,n={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,n)}uint64(e,n={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,n)}uint64be(e,n={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,n)}uint64le(e,n={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,n)}floatle(e,n={}){return this.primitiveN("floatle",e,n)}floatbe(e,n={}){return this.primitiveN("floatbe",e,n)}doublele(e,n={}){return this.primitiveN("doublele",e,n)}doublebe(e,n={}){return this.primitiveN("doublebe",e,n)}bitN(e,n,r){return r.length=e,this.setNextParser("bit",n,r)}bit1(e,n={}){return this.bitN(1,e,n)}bit2(e,n={}){return this.bitN(2,e,n)}bit3(e,n={}){return this.bitN(3,e,n)}bit4(e,n={}){return this.bitN(4,e,n)}bit5(e,n={}){return this.bitN(5,e,n)}bit6(e,n={}){return this.bitN(6,e,n)}bit7(e,n={}){return this.bitN(7,e,n)}bit8(e,n={}){return this.bitN(8,e,n)}bit9(e,n={}){return this.bitN(9,e,n)}bit10(e,n={}){return this.bitN(10,e,n)}bit11(e,n={}){return this.bitN(11,e,n)}bit12(e,n={}){return this.bitN(12,e,n)}bit13(e,n={}){return this.bitN(13,e,n)}bit14(e,n={}){return this.bitN(14,e,n)}bit15(e,n={}){return this.bitN(15,e,n)}bit16(e,n={}){return this.bitN(16,e,n)}bit17(e,n={}){return this.bitN(17,e,n)}bit18(e,n={}){return this.bitN(18,e,n)}bit19(e,n={}){return this.bitN(19,e,n)}bit20(e,n={}){return this.bitN(20,e,n)}bit21(e,n={}){return this.bitN(21,e,n)}bit22(e,n={}){return this.bitN(22,e,n)}bit23(e,n={}){return this.bitN(23,e,n)}bit24(e,n={}){return this.bitN(24,e,n)}bit25(e,n={}){return this.bitN(25,e,n)}bit26(e,n={}){return this.bitN(26,e,n)}bit27(e,n={}){return this.bitN(27,e,n)}bit28(e,n={}){return this.bitN(28,e,n)}bit29(e,n={}){return this.bitN(29,e,n)}bit30(e,n={}){return this.bitN(30,e,n)}bit31(e,n={}){return this.bitN(31,e,n)}bit32(e,n={}){return this.bitN(32,e,n)}namely(e){return _t.set(e,this),this.alias=e,this}skip(e,n={}){return this.seek(e,n)}seek(e,n={}){if(n.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,n){if(!n.zeroTerminated&&!n.length&&!n.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((n.zeroTerminated||n.length)&&n.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(n.stripNull&&!(n.length||n.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return n.encoding=n.encoding||"utf8",this.setNextParser("string",e,n)}buffer(e,n){if(!n.length&&!n.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,n)}wrapped(e,n){if(typeof n!="object"&&typeof e=="object"&&(n=e,e=""),!n||!n.wrapper||!n.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!n.length&&!n.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,n)}array(e,n){if(!n.readUntil&&!n.length&&!n.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!n.type)throw new Error("type is required for array.");if(typeof n.type=="string"&&!_t.has(n.type)&&!(n.type in Dt))throw new Error(`Array element type "${n.type}" is unkown.`);return this.setNextParser("array",e,n)}choice(e,n){if(typeof n!="object"&&typeof e=="object"&&(n=e,e=""),!n)throw new Error("tag and choices are are required for choice.");if(!n.tag)throw new Error("tag is requird for choice.");if(!n.choices)throw new Error("choices is required for choice.");for(let r in n.choices){let i=parseInt(r,10),o=n.choices[i];if(isNaN(i))throw new Error(`Choice key "${r}" is not a number.`);if(typeof o=="string"&&!_t.has(o)&&!(o in Dt))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",e,n)}nest(e,n){if(typeof n!="object"&&typeof e=="object"&&(n=e,e=""),!n||!n.type)throw new Error("type is required for nest.");if(!(n.type instanceof t)&&!_t.has(n.type))throw new Error("type must be a known parser name or a Parser object.");if(!(n.type instanceof t)&&!e)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,n)}pointer(e,n){if(!n.offset)throw new Error("offset is required for pointer.");if(!n.type)throw new Error("type is required for pointer.");if(typeof n.type=="string"&&!(n.type in Dt)&&!_t.has(n.type))throw new Error(`Pointer type "${n.type}" is unkown.`);return this.setNextParser("pointer",e,n)}saveOffset(e,n={}){return this.setNextParser("saveOffset",e,n)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){let n=new mf(e,this.useContextVariables);return n.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(n),n.pushCode(`return ${mr+this.alias}(0).result;`)):this.addRawCode(n),n}getCode(){return this.getContext("imports").code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${mr+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){let n=e.getUnresolvedReferences();e.markRequested(n),n.forEach(r=>{var i;(i=_t.get(r))===null||i===void 0||i.addAliasedCode(e)})}compile(){let e="imports",n=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${n.code} };`)(n.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(Dt).indexOf(this.type)>=0)e=Dt[this.type];else if(this.type==="string"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let n=NaN;typeof this.options.type=="string"?n=Dt[this.options.type]:this.options.type instanceof t&&(n=this.options.type.sizeOf()),e=this.options.length*n}else this.type==="seek"?e=this.options.length:this.type==="nest"?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,n,r){let i=new t;return i.type=e,i.varName=n,i.options=r,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e);break}this.type!=="bit"&&this.generateAssert(e)}let n=e.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(e,n,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;let n=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{let r=e.addImport(this.options.assert);e.pushCode(`if (!${r}.call(vars, ${n})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${n}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${n}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${n} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){let n=JSON.parse(JSON.stringify(this));if(n.options=this.options,n.generateAssert=this.generateAssert.bind(this),n.generateFormatter=this.generateFormatter.bind(this),n.varName=e.generateVariable(n.varName),e.bitFields.push(n),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){let r=e.generateTmpVariable();e.pushCode(`var ${r} = 0;`);let i=(u=0)=>{let d=0;for(let f=u;f<e.bitFields.length;f++){let h=e.bitFields[f].options.length;if(d+h>32)break;d+=h}return d},o=u=>(u<=8?(e.pushCode(`${r} = dataView.getUint8(offset);`),u=8):u<=16?(e.pushCode(`${r} = dataView.getUint16(offset);`),u=16):u<=24?(e.pushCode(`${r} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),u=24):(e.pushCode(`${r} = dataView.getUint32(offset);`),u=32),e.pushCode(`offset += ${u/8};`),u),s=0,a=this.endian==="be",l=0,c=0;e.bitFields.forEach((u,d)=>{let f=u.options.length;if(f>c){if(c){let p=-1>>>32-c;e.pushCode(`${u.varName} = (${r} & 0x${p.toString(16)}) << ${f-c};`),f-=c}s=0,c=l=o(i(d)-c)}let h=a?l-s-f:s,m=-1>>>32-f;e.pushCode(`${u.varName} ${f<u.options.length?"|=":"="} ${r} >> ${h} & 0x${m.toString(16)};`),u.options.length===32&&e.pushCode(`${u.varName} >>>= 0`),u.options.assert&&u.generateAssert(e),u.options.formatter&&u.generateFormatter(e,u.varName,u.options.formatter),s+=f,c-=f}),e.bitFields=[]}}generateSeek(e){let n=e.generateOption(this.options.length);e.pushCode(`offset += ${n};`)}generateString(e){let n=e.generateVariable(this.varName),r=e.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",s='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){let a=this.options.length;e.pushCode(`var ${r} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${r} < ${a});`);let l=`offset - ${r} < ${a} ? offset - 1 : offset`;e.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, ${l}), ${s}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, ${l}));`)}else if(this.options.length){let a=e.generateOption(this.options.length);e.pushCode(o?`${n} = Array.from(buffer.subarray(offset, offset + ${a}), ${s}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${a}));`),e.pushCode(`offset += ${a};`)}else this.options.zeroTerminated?(e.pushCode(`var ${r} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, offset - 1), ${s}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${r} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, offset), ${s}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset));`));this.options.stripNull&&e.pushCode(`${n} = ${n}.replace(/\\x00+$/g, '')`)}generateBuffer(e){let n=e.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){let r=this.options.readUntil,i=e.generateTmpVariable(),o=e.generateTmpVariable();e.pushCode(`var ${i} = offset;`),e.pushCode(`var ${o} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${o} = dataView.getUint8(offset);`);let s=e.addImport(r);e.pushCode(`if (${s}.call(${e.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${n} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${n} = buffer.subarray(offset);`);else{let r=e.generateOption(this.options.length);e.pushCode(`${n} = buffer.subarray(offset, offset + ${r});`),e.pushCode(`offset += ${r};`)}this.options.clone&&e.pushCode(`${n} = buffer.constructor.from(${n});`)}generateArray(e){let n=e.generateOption(this.options.length),r=e.generateOption(this.options.lengthInBytes),i=this.options.type,o=e.generateTmpVariable(),s=e.generateVariable(this.varName),a=e.generateTmpVariable(),l=this.options.key,c=typeof l=="string";if(c?e.pushCode(`${s} = {};`):e.pushCode(`${s} = [];`),typeof this.options.readUntil=="function"?e.pushCode("do {"):this.options.readUntil==="eof"?e.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):r!==void 0?e.pushCode(`for (var ${o} = offset + ${r}; offset < ${o}; ) {`):e.pushCode(`for (var ${o} = ${n}; ${o} > 0; ${o}--) {`),typeof i=="string")if(_t.get(i)){let u=e.generateTmpVariable();if(e.pushCode(`var ${u} = ${mr+i}(offset, {`),e.useContextVariables){let d=e.generateVariable();e.pushCode(`$parent: ${d},`),e.pushCode(`$root: ${d}.$root,`),!this.options.readUntil&&r===void 0&&e.pushCode(`$index: ${n} - ${o},`)}e.pushCode("});"),e.pushCode(`var ${a} = ${u}.result; offset = ${u}.offset;`),i!==this.alias&&e.addReference(i)}else{let u=qa[i],d=za[i];e.pushCode(`var ${a} = dataView.get${u}(offset, ${d});`),e.pushCode(`offset += ${Dt[i]};`)}else if(i instanceof t){e.pushCode(`var ${a} = {};`);let u=e.generateVariable();e.pushScope(a),e.useContextVariables&&(e.pushCode(`${a}.$parent = ${u};`),e.pushCode(`${a}.$root = ${u}.$root;`),!this.options.readUntil&&r===void 0&&e.pushCode(`${a}.$index = ${n} - ${o};`)),i.generate(e),e.useContextVariables&&(e.pushCode(`delete ${a}.$parent;`),e.pushCode(`delete ${a}.$root;`),e.pushCode(`delete ${a}.$index;`)),e.popScope()}if(c?e.pushCode(`${s}[${a}.${l}] = ${a};`):e.pushCode(`${s}.push(${a});`),e.pushCode("}"),typeof this.options.readUntil=="function"){let u=this.options.readUntil,d=e.addImport(u);e.pushCode(`while (!${d}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset)));`)}}generateChoiceCase(e,n,r){if(typeof r=="string"){let i=e.generateVariable(this.varName);if(_t.has(r)){let o=e.generateTmpVariable();e.pushCode(`var ${o} = ${mr+r}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${i}.$parent,`),e.pushCode(`$root: ${i}.$root,`)),e.pushCode("});"),e.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),r!==this.alias&&e.addReference(r)}else{let o=qa[r],s=za[r];e.pushCode(`${i} = dataView.get${o}(offset, ${s});`),e.pushCode(`offset += ${Dt[r]}`)}}else r instanceof t&&(e.pushPath(n),r.generate(e),e.popPath(n))}generateChoice(e){let n=e.generateOption(this.options.tag),r=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${r} = {};`),e.useContextVariables)){let i=e.generateVariable();e.pushCode(`${r}.$parent = ${i};`),e.pushCode(`${r}.$root = ${i}.$root;`)}e.pushCode(`switch(${n}) {`);for(let i in this.options.choices){let o=parseInt(i,10),s=this.options.choices[o];e.pushCode(`case ${o}:`),this.generateChoiceCase(e,this.varName,s),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${n} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}generateNest(e){let n=e.generateVariable(this.varName);if(this.options.type instanceof t){if(this.varName&&(e.pushCode(`${n} = {};`),e.useContextVariables)){let r=e.generateVariable();e.pushCode(`${n}.$parent = ${r};`),e.pushCode(`${n}.$root = ${r}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${n}.$parent;`),e.pushCode(`delete ${n}.$root;`))}else if(_t.has(this.options.type)){let r=e.generateTmpVariable();if(e.pushCode(`var ${r} = ${mr+this.options.type}(offset, {`),e.useContextVariables){let i=e.generateVariable();e.pushCode(`$parent: ${i},`),e.pushCode(`$root: ${i}.$root,`)}e.pushCode("});"),e.pushCode(`${n} = ${r}.result; offset = ${r}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){let n=e.generateVariable(this.varName),r=e.generateTmpVariable();if(typeof this.options.readUntil=="function"){let l=this.options.readUntil,c=e.generateTmpVariable(),u=e.generateTmpVariable();e.pushCode(`var ${c} = offset;`),e.pushCode(`var ${u} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${u} = dataView.getUint8(offset);`);let d=e.addImport(l);e.pushCode(`if (${d}.call(${e.generateVariable()}, ${u}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${r} = buffer.subarray(${c}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${r} = buffer.subarray(offset);`);else{let l=e.generateOption(this.options.length);e.pushCode(`${r} = buffer.subarray(offset, offset + ${l});`),e.pushCode(`offset += ${l};`)}this.options.clone&&e.pushCode(`${r} = buffer.constructor.from(${r});`);let i=e.generateTmpVariable(),o=e.generateTmpVariable(),s=e.generateTmpVariable(),a=e.addImport(this.options.wrapper);if(e.pushCode(`${r} = ${a}.call(this, ${r}).subarray(0);`),e.pushCode(`var ${i} = buffer;`),e.pushCode(`var ${o} = offset;`),e.pushCode(`var ${s} = dataView;`),e.pushCode(`buffer = ${r};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof t)this.varName&&e.pushCode(`${n} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(_t.has(this.options.type)){let l=e.generateTmpVariable();e.pushCode(`var ${l} = ${mr+this.options.type}(0);`),e.pushCode(`${n} = ${l}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${i};`),e.pushCode(`dataView = ${s};`),e.pushCode(`offset = ${o};`)}generateFormatter(e,n,r){if(typeof r=="function"){let i=e.addImport(r);e.pushCode(`${n} = ${i}.call(${e.generateVariable()}, ${n});`)}}generatePointer(e){let n=this.options.type,r=e.generateOption(this.options.offset),i=e.generateTmpVariable(),o=e.generateVariable(this.varName);if(e.pushCode(`var ${i} = offset;`),e.pushCode(`offset = ${r};`),this.options.type instanceof t){if(e.pushCode(`${o} = {};`),e.useContextVariables){let s=e.generateVariable();e.pushCode(`${o}.$parent = ${s};`),e.pushCode(`${o}.$root = ${s}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${o}.$parent;`),e.pushCode(`delete ${o}.$root;`))}else if(_t.has(this.options.type)){let s=e.generateTmpVariable();if(e.pushCode(`var ${s} = ${mr+this.options.type}(offset, {`),e.useContextVariables){let a=e.generateVariable();e.pushCode(`$parent: ${a},`),e.pushCode(`$root: ${a}.$root,`)}e.pushCode("});"),e.pushCode(`${o} = ${s}.result; offset = ${s}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(Dt).indexOf(this.options.type)>=0){let s=qa[n],a=za[n];e.pushCode(`${o} = dataView.get${s}(offset, ${a});`),e.pushCode(`offset += ${Dt[n]};`)}e.pushCode(`offset = ${i};`)}generateSaveOffset(e){let n=e.generateVariable(this.varName);e.pushCode(`${n} = offset`)}};function qy(t){return t.reduce((e,n)=>e^n)}var Ht=function(t){return t[t.UTC=1]="UTC",t[t.VALID=2]="VALID",t[t.LAT=4]="LAT",t[t.LON=8]="LON",t[t.HGT=16]="HGT",t[t.SPD=32]="SPD",t[t.TRK=64]="TRK",t[t.HDOP=1024]="HDOP",t[t.NSAT=4096]="NSAT",t}(Ht||{});function vS(t){let e=0,n=new No().endianness("little"),r=[],i=[];return t&Ht.UTC&&n.int32("utc"),t&Ht.VALID&&n.uint8("valid"),t&Ht.LAT&&n.floatle("lat"),t&Ht.LON&&n.floatle("lon"),t&Ht.HGT&&n.int16("hgt"),t&Ht.SPD&&n.uint16("spd"),t&Ht.TRK&&n.int16("trk"),t&Ht.HDOP&&n.int16("hdop"),t&Ht.NSAT&&n.uint8("nsat"),n.uint8("checksum"),n}var zy=function(t){return t[t.INVALID=0]="INVALID",t[t.SPS=1]="SPS",t[t.DGPS=2]="DGPS",t[t.PPS=3]="PPS",t[t.RTK=4]="RTK",t[t.FRTK=5]="FRTK",t[t.ESTIMATED=6]="ESTIMATED",t[t.MANUAL=7]="MANUAL",t[t.SIMULATOR=8]="SIMULATOR",t}(zy||{}),To=class extends Error{};function wS(t,e=!0){if(t.length<16)throw new Error("Insufficient data for parsing header");let r=new No().endianness("little").uint16("sectorId").uint8("loggingType").uint8("loggingMode").uint16("logContent").uint16("unknown_06").uint16("intervalSetting").uint16("distanceSetting").uint16("speedSetting").uint8("unknown_0e").uint8("checksum").parse(t.slice(0,16));if(e&&r.checksum!==qy(t.slice(0,15)))throw new To(`Invalid header checksum in ${Ut(t)}`);return r}function bS(t,e,n=!0){if(e.slice(0,6).every(i=>i===255)||e.slice(0,6).every(i=>i===0))return;let r=t.parse(e);if(n&&r.checksum!==qy(e.slice(0,e.length-1)))throw new To(`Checksum mismatch in waypoint data: ${Ut(e)}`);return r}function CS(t,e){let n=vS(t.logContent),r=[];for(let i=0;i<e.length;i+=n.sizeOf())try{let o=bS(n,e.slice(i,i+n.sizeOf()),!0);r.push(o)}catch(o){if(o instanceof To)break;throw o}return r}var gf=class{constructor(e,n=!0){this.waypoints=[],this.header=wS(e.slice(0,18),n),this.mask=e.slice(17,60),this.unknown_3c=e.slice(60,64),this.waypoints=CS(this.header,e.slice(64))}};function _S(t,e){if(t.push(`<trkpt lat="${e.lat}" lon="${e.lon}">`),t.push(`<ele>${e.hgt}</ele>`),t.push(`<time>${new Date(e.utc*1e3).toISOString().replace("Z","")}</time>`),e.spd||e.trk){let n={};e.spd&&(n.spd=e.spd),e.trk&&(n.trk=e.trk),t.push(`<cmt>${JSON.stringify(n)}</cmt>`)}e.valid==zy.DGPS&&t.push("<fix>dgps</fix>"),e.nsat&&t.push(`<sat>${e.nsat}</sat>`),e.hdop&&t.push(`<hdop>${e.hdop}</hdop>`),t.push("</trkpt>")}var Ga=class{constructor(e,n=!0){this.sectors=[];for(let r=0;r+4096<=e.length;r+=4096){let i=e.slice(r,r+4096);this.sectors.push(new gf(i,n))}}getGpx(){let e=[`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="Nghx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://www.topografix.com/GPX/1/1"
 xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
`];e.push("<trk><trkseg>");for(let n of this.sectors)for(let r of n.waypoints)r&&_S(e,r);return e.push("</trkseg></trk></gpx>"),e}};var DS=new TextDecoder("utf-8"),Wa=class{constructor(e){this.reader=e,this.chunk="",this.pos=0}_getNextChunk(){return A(this,null,function*(){let e=yield this.reader.read();if(e.done)throw new Error("Stream is done");this.chunk=DS.decode(e.value),this.pos=0})}read(e){return A(this,null,function*(){for(var n="";;)if(this.pos+e-n.length<=this.chunk.length){let r=this.pos+e-n.length;return n+=this.chunk.slice(this.pos,r),this.pos=r,n}else n+=this.chunk.slice(this.pos),yield this._getNextChunk()})}readline(){return A(this,null,function*(){for(var e="";;){if(this.pos<this.chunk.length){let n=this.chunk.indexOf(`
`,this.pos);if(n!=-1)return e+=this.chunk.slice(this.pos,n+1),this.pos=n+1,e;e+=this.chunk.slice(this.pos)}yield this._getNextChunk()}})}flush(){this.chunk=""}};function Gy(t,e){let n=e=="lat"?t.toUpperCase().match(/^ *(\d+) *(N|S) *(\d+)\.(\d+) *$/):t.toUpperCase().match(/^ *(\d+) *(E|W) *(\d+)\.(\d+) *$/);if(n){let[r,i,o,s,a]=n,l=a.slice(0,4).padEnd(4,"0"),c=Number.parseInt(i,10),u=Number.parseInt(s,10)*1e4+Number.parseInt(l,10);return{deg:c,dir:o,min:u}}if(n=e=="lat"?t.toUpperCase().match(/^ *(\d+) * *(\d+)\.(\d+) *['`]? *(N|S) *$/):t.toUpperCase().match(/^ *(\d+) * *(\d+)\.(\d+) *['`]? *(E|W) *$/),n){let[r,i,o,s,a]=n,l=s.slice(0,4).padEnd(4,"0"),c=Number.parseInt(i,10),u=Number.parseInt(o,10)*1e4+Number.parseInt(l,10);return{deg:c,dir:a,min:u}}if(n=e=="lat"?t.toUpperCase().match(/^ *(\d+) * *(\d+) *['`] *(\d+|\d+\.\d+) *["]? *(N|S) *$/):t.toUpperCase().match(/^ *(\d+) * *(\d+) *['`] *(\d+|\d+\.\d+) *["]? *(E|W) *$/),n){let[r,i,o,s,a]=n,l=Number.parseInt(i,10),c=Number.parseInt(o,10)*1e4+Math.round(Number.parseFloat(s)*1e4/60);return{deg:l,dir:a,min:c}}if(n=t.match(/^ *([+-]?\d+(\.\d+)?) *$/),n){let[r,i]=n,o=Number.parseFloat(i),s;e=="lat"?s=o>0?"N":"S":s=o>0?"E":"W";let a=Math.floor(Math.abs(o)),l=Math.round((Math.abs(o)-a)*60*1e4);return{deg:a,dir:s,min:l}}}function si(t){let e=Gy(t,"lat");if(e)return{lat_deg:e.deg,lat_dir:e.dir,lat_min:e.min}}function ai(t){let e=Gy(t,"lon");if(e)return{lon_deg:e.deg,lon_dir:e.dir,lon_min:e.min}}var Sn=class{constructor(e){this.wp=e}toString(){let e=`${this.wp.id}, ${this.wp.name}, ${this.wp.lat_deg}${this.wp.lat_dir}${this.wp.lat_min}, ${this.wp.lon_deg}${this.wp.lon_dir}${this.wp.lon_min}`;return this.wp.address?`@0x${tt(this.wp.address,4)}: `+e:e}getLat(e){let n=Math.floor(this.wp.lat_min/1e4).toString(10).padStart(2,"0"),r=(this.wp.lat_min%1e4).toString(10).padStart(4,"0");return e?`${this.wp.lat_deg}${this.wp.lat_dir}${n}.${r}`:`${this.wp.lat_deg}\xB0 ${n}.${r}\u2019 ${this.wp.lat_dir}`}getLon(e){let n=Math.floor(this.wp.lon_min/1e4).toString(10).padStart(2,"0"),r=(this.wp.lon_min%1e4).toString(10).padStart(4,"0");return e?`${this.wp.lon_deg}${this.wp.lon_dir}${n}.${r}`:`${this.wp.lon_deg}\xB0 ${n}.${r}\u2019 ${this.wp.lon_dir}`}getMapLink(){let e=(this.wp.lat_dir=="N"?1:-1)*(this.wp.lat_deg+this.wp.lat_min/1e4/60),n=(this.wp.lon_dir=="E"?1:-1)*(this.wp.lon_deg+this.wp.lon_min/1e4/60);return`https://www.google.com/maps/place/${e},${n}`}fillConfig(e,n){if(!this.wp.address)throw new Error("The waypoint must have an address");let r=this.wp.address-n;if(r<0||r>e.length-32)throw new Error(`Waypoint address ${this.wp.address} (offset ${r}) is out of bounds`);let i=this.wp.name;i.length>=15&&(console.log(`Waypoint name too long ${i}, truncating`),i=i.substring(0,14));let o=e.subarray(r,r+32);this.wp.dsc_origin?o.set(this.wp.dsc_origin):o.set([255,255,255,255,240]),o[31]=this.wp.id;let s=o.subarray(16,31),{written:a}=ES.encodeInto(i,s);s.fill(255,a,15);let l=o.subarray(5,9),c=this.wp.lat_deg.toString(10).padStart(2,"0");if(c+=this.wp.lat_min.toString(10).padStart(6,"0"),c.length!=8)throw new Error(`Encoded waypoint lat too long ${c}`);Mo(c,l),o[9]=this.wp.lat_dir.charCodeAt(0);let u=o.subarray(10,15),d=this.wp.lon_deg.toString(10).padStart(4,"0");if(d+=this.wp.lon_min.toString(10).padStart(6,"0"),d.length!=10)throw new Error(`Encoded waypoint lon too long ${d}`);Mo(d,u),o[15]=this.wp.lon_dir.charCodeAt(0)}},yf=new TextDecoder,ES=new TextEncoder;function Ya(t,e){let n=t[31];if(n==255)return;for(var r=30;r>=16&&[0,255,32].includes(t[r]);r-=1);let i=yf.decode(t.slice(16,r+1)),o=Ut(t.slice(5,9)),s=Number(o.slice(0,2)),a=Number(o.slice(2,9)),l=yf.decode(t.slice(9,10)),c=Ut(t.slice(10,15)).slice(1),u=Number(c.slice(0,3)),d=Number(c.slice(3,10)),f=yf.decode(t.slice(15,16));return new Sn({id:n,name:i,lat_deg:s,lat_min:a,lat_dir:l,lon_deg:u,lon_min:d,lon_dir:f,address:e,dsc_origin:t.slice(0,5)})}function Ka({name:t,lat:e,lon:n}){if(t.length==0)throw new Error("No name was provided");if(t.length>=15)throw new Error(`Waypoint name too long "${t}". Consider "${t.trim().substring(0,14).trim()}".`);if(!/^[-!"#%&'*+,.:<>\?\[\]_0-9A-Za-z ]+$/.test(t)){let o=/[^-!"#%&'*+,.:<>\?\[\]_0-9A-Za-z ]/g,s=t.matchAll(o),a="";for(let l of s){let c=l[0];a.includes(c)||(a=a+c)}throw new Error(`Waypoint name cannot contain ${a}`)}let r=si(e),i=ai(n);if(!r||!i)throw new Error(`Unparseable position ${e} ${n}`);if(r.lat_deg>90||r.lat_deg<0||r.lat_min<0||r.lat_min>60*1e4)throw new Error(`Bad latitude ${e}`);if(i.lon_deg>180||i.lon_deg<0||i.lon_min<0||i.lon_min>60*1e4)throw new Error(`Bad longitude ${n}`);if(!["N","S"].includes(r.lat_dir))throw new Error(`Bad latitude direction in ${e}`);if(!["E","W"].includes(i.lon_dir))throw new Error(`Bad longitude direction in ${n}`);return{lat:r,lon:i}}var Mn=32;var IS=new TextDecoder,SS=new TextEncoder,Nn=class{constructor(e){this.route={name:e.name,waypointIds:e.waypointIds.slice()}}fillConfig(e,n,r,i){if(n<0||n>e.length-i)throw new Error(`Waypoint offset ${n} is out of bounds`);let o=this.route.name;o.length>=16&&(console.log(`Route name too long ${o}, truncating`),o=o.substring(0,15));let s=e.subarray(n,n+16),{written:a}=SS.encodeInto(o,s);s.fill(255,a,16);let l=this.route.waypointIds;l.length>r&&(console.log(`Too many waypoints in route (${l.length}), truncating to ${r}`),l=l.slice(0,r));let c=e.subarray(n+16,n+i);for(let[u,d]of l.entries())c[u]=d;c.fill(255,l.length,i-16)}};function Qa(t,e){for(var n=15;n>=0&&[0,255,32].includes(t[n]);n-=1);let r=IS.decode(t.slice(0,n+1));for(var i=e-1;i>=0&&t[16+i]==255;i-=1);if(r==""||i==-1)return;let o=t.subarray(16,16+i+1);return new Nn({name:r,waypointIds:Array.from(o)})}var li=class{constructor(e,n,r,i){this.deviceConfig=r,this.updateCallback=i,this.dirtyWaypoints=!1,this.dirtyRoutes=!1,this.waypoints=e.slice(),this.routes=Array.from({length:n.length},(o,s)=>new Nn(n[s].route))}maybeUpdateCallback(){this.updateCallback&&this.updateCallback()}deleteWaypoint(e){let n=this.waypoints.findIndex(r=>r.wp.address==e.wp.address);this.waypoints.splice(n,1),this.dirtyWaypoints=!0;for(let r of this.routes){let i=r.route.waypointIds.filter(o=>o!=e.wp.id);i.length!=r.route.waypointIds.length&&(r.route.waypointIds=i,this.dirtyRoutes=!0)}this.routes=this.routes.filter(r=>r.route.waypointIds.length>0),this.maybeUpdateCallback()}editWaypoint(e,n,r,i){if(n.length>15)throw new Error(`Waypoint name too long ${n}`);let o=si(r),s=ai(i);if(!o||!s)throw new Error(`Unparseable position ${r} ${i}`);let a=this.waypoints.findIndex(l=>l.wp.address==e.wp.address);if(a==-1)throw new Error(`Could not find waypoint at ${e.wp.address}`);this.waypoints[a]=new Sn(B(_(_(_({},this.waypoints[a].wp),o),s),{name:n})),this.dirtyWaypoints=!0,this.maybeUpdateCallback()}addWaypoint(e){if(this.waypoints.length>=this.deviceConfig.waypointsNumber)throw new Error("No more room for waypoints");let{lat:n,lon:r}=Ka(e),i;for(i=1;i<255&&this.waypoints.find(o=>o.wp.id==i);i+=1);this.waypoints.push(new Sn(B(_(_({},n),r),{name:e.name,id:i}))),this.dirtyWaypoints=!0,this.maybeUpdateCallback()}deleteRoute(e){this.routes.splice(e,1),this.dirtyRoutes=!0,this.maybeUpdateCallback()}addRoute(e){if(this.routes.length>=this.deviceConfig.routesNumber)throw new Error(`No room for more routes (${this.routes.length})`);return this.routes.push(new Nn({name:e,waypointIds:[]})),this.dirtyRoutes=!0,this.maybeUpdateCallback(),this.routes.length-1}insertWaypointInRoute(e,n,r){let i=this.routes[e].route;if(i.waypointIds.length>=this.deviceConfig.numWaypointsPerRoute)throw new Error(`No room for more waypoints (${i.waypointIds.length})`);i.waypointIds.splice(r,0,n),this.dirtyRoutes=!0,this.maybeUpdateCallback()}deleteWaypointFromRoute(e,n){this.routes[e].route.waypointIds.splice(n,1),this.dirtyRoutes=!0,this.maybeUpdateCallback()}swapWaypointsInRoute(e,n,r){if(n==r)return;let i=this.routes[e].route,o=i.waypointIds[n],s=i.waypointIds[r];n<r?(i.waypointIds.splice(r,1,o),i.waypointIds.splice(n,1,s)):(i.waypointIds.splice(n,1,s),i.waypointIds.splice(r,1,o)),this.dirtyRoutes=!0,this.maybeUpdateCallback()}getBinaryWaypointData(e){let n=new Uint8Array(Mn*this.deviceConfig.waypointsNumber);return n.fill(255),vf(this.waypoints,e,n),n}getBinaryRouteData(){this.routes.sort((n,r)=>n.route.name.localeCompare(r.route.name));let e=new Uint8Array(this.deviceConfig.routeBytes*this.deviceConfig.routesNumber);e.fill(255);for(let[n,r]of this.routes.entries())r.fillConfig(e,n*this.deviceConfig.routeBytes,this.deviceConfig.numWaypointsPerRoute,this.deviceConfig.routeBytes);return e}};function vf(t,e,n){t.sort((i,o)=>i.wp.name.localeCompare(o.wp.name));let r=e;for(let i of t)i.wp.address=r,r+=Mn;for(let i of t)i.fillConfig(n,e)}var J=class t extends Error{constructor(e,n,r,...i){Array.isArray(n)&&(n=n.join(" ").trim()),super(n),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,t),this.code=e;for(let o of i)for(let s in o){let a=o[s];this[s]=Buffer.isBuffer(a)?a.toString(r.encoding):a==null?a:JSON.parse(JSON.stringify(a))}}};var Wy=function(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)};var Za=function(t){let e=[];for(let n=0,r=t.length;n<r;n++){let i=t[n];if(i==null||i===!1)e[n]={disabled:!0};else if(typeof i=="string")e[n]={name:i};else if(Wy(i)){if(typeof i.name!="string")throw new J("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${n}`,"when column is an object literal"]);e[n]=i}else throw new J("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(i)} at position ${n}`])}return e};var wf=class{constructor(e=100){this.size=e,this.length=0,this.buf=Buffer.allocUnsafe(e)}prepend(e){if(Buffer.isBuffer(e)){let n=this.length+e.length;if(n>=this.size&&(this.resize(),n>=this.size))throw Error("INVALID_BUFFER_STATE");let r=this.buf;this.buf=Buffer.allocUnsafe(this.size),e.copy(this.buf,0),r.copy(this.buf,e.length),this.length+=e.length}else{let n=this.length++;n===this.size&&this.resize();let r=this.clone();this.buf[0]=e,r.copy(this.buf,1,0,n)}}append(e){let n=this.length++;n===this.size&&this.resize(),this.buf[n]=e}clone(){return Buffer.from(this.buf.slice(0,this.length))}resize(){let e=this.length;this.size=this.size*2;let n=Buffer.allocUnsafe(this.size);this.buf.copy(n,0,0,e),this.buf=n}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}},bf=wf;var MS=12,NS=13,TS=10,AS=32,xS=9,Yy=function(t){return{bomSkipped:!1,bufBytesStart:0,castField:t.cast_function,commenting:!1,error:void 0,enabled:t.from_line===1,escaping:!1,escapeIsQuote:Buffer.isBuffer(t.escape)&&Buffer.isBuffer(t.quote)&&Buffer.compare(t.escape,t.quote)===0,expectedRecordLength:Array.isArray(t.columns)?t.columns.length:void 0,field:new bf(20),firstLineToHeaders:t.cast_first_line_to_header,needMoreDataSize:Math.max(t.comment!==null?t.comment.length:0,...t.delimiter.map(e=>e.length),t.quote!==null?t.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new bf(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:t.record_delimiter.length===0?0:Math.max(...t.record_delimiter.map(e=>e.length)),trimChars:[Buffer.from(" ",t.encoding)[0],Buffer.from("	",t.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[Buffer.from(Buffer.from([NS],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([TS],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([MS],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([AS],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([xS],"utf8").toString(),t.encoding)]}};var Ky=function(t){return t.replace(/([A-Z])/g,function(e,n){return"_"+n.toLowerCase()})};var Cf=function(t){let e={};for(let r in t)e[Ky(r)]=t[r];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new J("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new J("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new J("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(r){let i=Date.parse(r);return isNaN(i)?r:new Date(i)};else if(typeof e.cast_date!="function")throw new J("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=Za(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new J("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new J("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new J("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=Buffer.from(e.comment,e.encoding)),!Buffer.isBuffer(e.comment))throw new J("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new J("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);let n=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new J("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${n}`],e);if(e.delimiter=e.delimiter.map(function(r){if(r==null||r===!1)return Buffer.from(",",e.encoding);if(typeof r=="string"&&(r=Buffer.from(r,e.encoding)),!Buffer.isBuffer(r)||r.length===0)throw new J("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${n}`],e);return r}),e.escape===void 0||e.escape===!0?e.escape=Buffer.from('"',e.encoding):typeof e.escape=="string"?e.escape=Buffer.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!Buffer.isBuffer(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(t.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(t.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(t.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new J("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new J("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(Buffer.isBuffer(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new J("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=Buffer.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=Buffer.from(e.quote,e.encoding)),!Buffer.isBuffer(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||Buffer.isBuffer(e.record_delimiter)){if(e.record_delimiter.length===0)throw new J("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new J("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(r,i){if(typeof r!="string"&&!Buffer.isBuffer(r))throw new J("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${i},`,`got ${JSON.stringify(r)}`],e);if(r.length===0)throw new J("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${i},`,`got ${JSON.stringify(r)}`],e);return typeof r=="string"&&(r=Buffer.from(r,e.encoding)),r}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&t.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&t.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(t.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(t.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(t.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(t.to_line)}`);return e};var Qy=function(t){return t.every(e=>e==null||e.toString&&e.toString().trim()==="")},OS=13,kS=10,ci={utf8:Buffer.from([239,187,191]),utf16le:Buffer.from([255,254])},Zy=function(t={}){let e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},n=Cf(t);return{info:e,original_options:t,options:n,state:Yy(n),__needMoreData:function(r,i,o){if(o)return!1;let{encoding:s,escape:a,quote:l}=this.options,{quoting:c,needMoreDataSize:u,recordDelimiterMaxLength:d}=this.state,f=i-r-1,h=Math.max(u,d===0?Buffer.from(`\r
`,s).length:d,c?(a===null?0:a.length)+l.length:0,c?l.length+d:0);return f<h},parse:function(r,i,o,s){let{bom:a,comment_no_infix:l,encoding:c,from_line:u,ltrim:d,max_record_size:f,raw:h,relax_quotes:m,rtrim:p,skip_empty_lines:g,to:v,to_line:w}=this.options,{comment:b,escape:D,quote:T,record_delimiter:C}=this.options,{bomSkipped:te,previousBuf:ae,rawBuffer:we,escapeIsQuote:Qt}=this.state,G;if(ae===void 0)if(r===void 0){s();return}else G=r;else ae!==void 0&&r===void 0?G=ae:G=Buffer.concat([ae,r]);if(te===!1)if(a===!1)this.state.bomSkipped=!0;else if(G.length<3){if(i===!1){this.state.previousBuf=G;return}}else{for(let be in ci)if(ci[be].compare(G,0,ci[be].length)===0){let mn=ci[be].length;this.state.bufBytesStart+=mn,G=G.slice(mn),this.options=Cf(B(_({},this.original_options),{encoding:be})),{comment:b,escape:D,quote:T}=this.options;break}this.state.bomSkipped=!0}let me=G.length,V;for(V=0;V<me&&!this.__needMoreData(V,me,i);V++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),w!==-1&&this.info.lines>w){this.state.stop=!0,s();return}this.state.quoting===!1&&C.length===0&&this.__autoDiscoverRecordDelimiter(G,V)&&(C=this.options.record_delimiter);let be=G[V];if(h===!0&&we.append(be),(be===OS||be===kS)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(D!==null&&this.state.quoting===!0&&this.__isEscape(G,V,be)&&V+D.length<me)if(Qt){if(this.__isQuote(G,V+D.length)){this.state.escaping=!0,V+=D.length-1;continue}}else{this.state.escaping=!0,V+=D.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(G,V))if(this.state.quoting===!0){let Re=G[V+T.length],Ln=p&&this.__isCharTrimable(G,V+T.length),Zt=b!==null&&this.__compareBytes(b,G,V+T.length,Re),Vn=this.__isDelimiter(G,V+T.length,Re),ns=C.length===0?this.__autoDiscoverRecordDelimiter(G,V+T.length):this.__isRecordDelimiter(Re,G,V+T.length);if(D!==null&&this.__isEscape(G,V,be)&&this.__isQuote(G,V+D.length))V+=D.length-1;else if(!Re||Vn||ns||Zt||Ln){this.state.quoting=!1,this.state.wasQuoting=!0,V+=T.length-1;continue}else if(m===!1){let vh=this.__error(new J("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(Re)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(vh!==void 0)return vh}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(T),V+=T.length-1}else if(this.state.field.length!==0){if(m===!1){let Re=this.__infoField(),Ln=Object.keys(ci).map(Vn=>ci[Vn].equals(this.state.field.toString())?Vn:!1).filter(Boolean)[0],Zt=this.__error(new J("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(Re.column)} at line ${Re.lines}, value is ${JSON.stringify(this.state.field.toString(c))}`,Ln?`(${Ln} bom)`:void 0],this.options,Re,{field:this.state.field}));if(Zt!==void 0)return Zt}}else{this.state.quoting=!0,V+=T.length-1;continue}if(this.state.quoting===!1){let Re=this.__isRecordDelimiter(be,G,V);if(Re!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=u){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),V+=Re-1;continue}if(g===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,V+=Re-1;continue}this.info.bytes=this.state.bufBytesStart+V;let Vn=this.__onField();if(Vn!==void 0)return Vn;this.info.bytes=this.state.bufBytesStart+V+Re;let ns=this.__onRecord(o);if(ns!==void 0)return ns;if(v!==-1&&this.info.records>=v){this.state.stop=!0,s();return}}this.state.commenting=!1,V+=Re-1;continue}if(this.state.commenting)continue;if(b!==null&&(l===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(b,G,V,be)!==0){this.state.commenting=!0;continue}let Ln=this.__isDelimiter(G,V,be);if(Ln!==0){this.info.bytes=this.state.bufBytesStart+V;let Zt=this.__onField();if(Zt!==void 0)return Zt;V+=Ln-1;continue}}}if(this.state.commenting===!1&&f!==0&&this.state.record_length+this.state.field.length>f)return this.__error(new J("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${f}`,`at line ${this.info.lines}`],this.options,this.__infoField()));let mn=d===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(G,V),yw=p===!1||this.state.wasQuoting===!1;if(mn===!0&&yw===!0)this.state.field.append(be);else{if(p===!0&&!this.__isCharTrimable(G,V))return this.__error(new J("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));mn===!1&&(V+=this.__isCharTrimable(G,V)-1);continue}}if(i===!0)if(this.state.quoting===!0){let be=this.__error(new J("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(be!==void 0)return be}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+V;let be=this.__onField();if(be!==void 0)return be;let mn=this.__onRecord(o);if(mn!==void 0)return mn}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=V,this.state.previousBuf=G.slice(V);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(r){let{columns:i,group_columns_by_name:o,encoding:s,info:a,from:l,relax_column_count:c,relax_column_count_less:u,relax_column_count_more:d,raw:f,skip_records_with_empty_values:h}=this.options,{enabled:m,record:p}=this.state;if(m===!1)return this.__resetRecord();let g=p.length;if(i===!0){if(h===!0&&Qy(p)){this.__resetRecord();return}return this.__firstLineToColumns(p)}if(i===!1&&this.info.records===0&&(this.state.expectedRecordLength=g),g!==this.state.expectedRecordLength){let v=i===!1?new J("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${g} on line ${this.info.lines}`],this.options,this.__infoField(),{record:p}):new J("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${i.length},`,`got ${g} on line ${this.info.lines}`],this.options,this.__infoField(),{record:p});if(c===!0||u===!0&&g<this.state.expectedRecordLength||d===!0&&g>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=v;else{let w=this.__error(v);if(w)return w}}if(h===!0&&Qy(p)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,l===1||this.info.records>=l){let{objname:v}=this.options;if(i!==!1){let w={};for(let b=0,D=p.length;b<D;b++)i[b]===void 0||i[b].disabled||(o===!0&&w[i[b].name]!==void 0?Array.isArray(w[i[b].name])?w[i[b].name]=w[i[b].name].concat(p[b]):w[i[b].name]=[w[i[b].name],p[b]]:w[i[b].name]=p[b]);if(f===!0||a===!0){let b=Object.assign({record:w},f===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),D=this.__push(v===void 0?b:[w[v],b],r);if(D)return D}else{let b=this.__push(v===void 0?w:[w[v],w],r);if(b)return b}}else if(f===!0||a===!0){let w=Object.assign({record:p},f===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),b=this.__push(v===void 0?w:[p[v],w],r);if(b)return b}else{let w=this.__push(v===void 0?p:[p[v],p],r);if(w)return w}}this.__resetRecord()},__firstLineToColumns:function(r){let{firstLineToHeaders:i}=this.state;try{let o=i===void 0?r:i.call(null,r);if(!Array.isArray(o))return this.__error(new J("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(o)}`],this.options,this.__infoField(),{headers:o}));let s=Za(o);this.state.expectedRecordLength=s.length,this.options.columns=s,this.__resetRecord();return}catch(o){return o}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){let{cast:r,encoding:i,rtrim:o,max_record_size:s}=this.options,{enabled:a,wasQuoting:l}=this.state;if(a===!1)return this.__resetField();let c=this.state.field.toString(i);if(o===!0&&l===!1&&(c=c.trimRight()),r===!0){let[u,d]=this.__cast(c);if(u!==void 0)return u;c=d}this.state.record.push(c),s!==0&&typeof c=="string"&&(this.state.record_length+=c.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(r,i){let{on_record:o}=this.options;if(o!==void 0){let s=this.__infoRecord();try{r=o.call(null,r,s)}catch(a){return a}if(r==null)return}i(r)},__cast:function(r){let{columns:i,relax_column_count:o}=this.options;if(Array.isArray(i)===!0&&o&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{let a=this.__infoField();return[void 0,this.state.castField.call(null,r,a)]}catch(a){return[a]}if(this.__isFloat(r))return[void 0,parseFloat(r)];if(this.options.cast_date!==!1){let a=this.__infoField();return[void 0,this.options.cast_date.call(null,r,a)]}return[void 0,r]},__isCharTrimable:function(r,i){return((s,a)=>{let{timchars:l}=this.state;e:for(let c=0;c<l.length;c++){let u=l[c];for(let d=0;d<u.length;d++)if(u[d]!==s[a+d])continue e;return u.length}return 0})(r,i)},__isFloat:function(r){return r-parseFloat(r)+1>=0},__compareBytes:function(r,i,o,s){if(r[0]!==s)return 0;let a=r.length;for(let l=1;l<a;l++)if(r[l]!==i[o+l])return 0;return a},__isDelimiter:function(r,i,o){let{delimiter:s,ignore_last_delimiters:a}=this.options;if(a===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(a!==!1&&typeof a=="number"&&this.state.record.length===a-1)return 0;e:for(let l=0;l<s.length;l++){let c=s[l];if(c[0]===o){for(let u=1;u<c.length;u++)if(c[u]!==r[i+u])continue e;return c.length}}return 0},__isRecordDelimiter:function(r,i,o){let{record_delimiter:s}=this.options,a=s.length;e:for(let l=0;l<a;l++){let c=s[l],u=c.length;if(c[0]===r){for(let d=1;d<u;d++)if(c[d]!==i[o+d])continue e;return c.length}}return 0},__isEscape:function(r,i,o){let{escape:s}=this.options;if(s===null)return!1;let a=s.length;if(s[0]===o){for(let l=0;l<a;l++)if(s[l]!==r[i+l])return!1;return!0}return!1},__isQuote:function(r,i){let{quote:o}=this.options;if(o===null)return!1;let s=o.length;for(let a=0;a<s;a++)if(o[a]!==r[i+a])return!1;return!0},__autoDiscoverRecordDelimiter:function(r,i){let{encoding:o}=this.options,s=[Buffer.from(`\r
`,o),Buffer.from(`
`,o),Buffer.from("\r",o)];e:for(let a=0;a<s.length;a++){let l=s[a].length;for(let c=0;c<l;c++)if(s[a][c]!==r[i+c])continue e;return this.options.record_delimiter.push(s[a]),this.state.recordDelimiterMaxLength=s[a].length,s[a].length}return 0},__error:function(r){let{encoding:i,raw:o,skip_records_with_error:s}=this.options,a=typeof r=="string"?new Error(r):r;if(s){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(a,o?this.state.rawBuffer.toString(i):void 0);return}else return a},__infoDataSet:function(){return B(_({},this.info),{columns:this.options.columns})},__infoRecord:function(){let{columns:r,raw:i,encoding:o}=this.options;return B(_({},this.__infoDataSet()),{error:this.state.error,header:r===!0,index:this.state.record.length,raw:i?this.state.rawBuffer.toString(o):void 0})},__infoField:function(){let{columns:r}=this.options,i=Array.isArray(r);return B(_({},this.__infoRecord()),{column:i===!0?r.length>this.state.record.length?r[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting})}}};var Jy=function(t,e={}){typeof t=="string"&&(t=Buffer.from(t));let n=e&&e.objname?{}:[],r=Zy(e),i=l=>{r.options.objname===void 0?n.push(l):n[l[0]]=l[1]},o=()=>{},s=r.parse(t,!1,i,o);if(s!==void 0)throw s;let a=r.parse(void 0,!0,i,o);if(a!==void 0)throw a;return n};function Ja(t,e){if(!e.match(/^G?[0-9]{9}$/))throw new Error("MMSI number should have exactly 9 digits");if(t.length>16)throw new Error("Name must not be more than 16 characters")}var RS=new TextDecoder,PS=new TextEncoder,Et=16,Tn=class{constructor(e,n){this.name=e,this.number=n}validate(){return Ja(this.name,this.number)}fillConfig(e,n,r){Ja(this.name,this.number);let i=r*Et,o=e.subarray(i,i+Et);o.fill(255),PS.encodeInto(this.name,o);let s=It(r);Mo(this.number+"0",n.subarray(s)),r%3==2&&(n[s+5]=255)}};function It(t){return t*5+(t-t%3)/3}function Xy(t,e){for(var n=Et-1;n>=0&&[0,255,32].includes(t[n]);n-=1);let r=RS.decode(t.subarray(0,n+1)),i=Ut(e.subarray(0,5)).slice(0,9);try{return Ja(r,i),new Tn(r,i)}catch{return}}var An=class{constructor(e,n){this.maxIndividualMmsis=e,this.maxGroupMmsis=n,this.individualMmsis=[],this.groupMmsis=[]}sort(){this.sortIndividual(),this.sortGroup()}sortIndividual(){this.individualMmsis.sort((e,n)=>e.name.localeCompare(n.name))}sortGroup(){this.groupMmsis.sort((e,n)=>e.name.localeCompare(n.name))}toCsv(){let e=`name,mmsi
`;this.sort();for(let n of this.individualMmsis){n.validate();let r=/,/.test(n.name)?`"${n.name.replace('"','""')}"`:n.name;e+=`${n.name},${n.number}
`}for(let n of this.groupMmsis){n.validate();let r=/,/.test(n.name)?`"${n.name.replace('"','""')}"`:n.name;e+=`${n.name},G${n.number}
`}return e}initFromCsv(e){let n=[],r=[],i=Jy(e,{skip_empty_lines:!0,columns:!0});for(let o of i){let s=o.name,a=o.mmsi;if(Ja(s,a),a[0]=="G"){let l=new Tn(s,a.slice(1));r.push(l)}else{let l=new Tn(s,a);n.push(l)}}if(n.length>this.maxIndividualMmsis)throw new Error("Too many MMSIs");if(r.length>this.maxGroupMmsis)throw new Error("Too many group MMSIs");this.individualMmsis=n,this.groupMmsis=r}fillConfig(e,n,r,i){this.fillIndividualConfig(e,n),this.fillGroupConfig(r,i)}fillIndividualConfig(e,n){if(this.sortIndividual(),this.individualMmsis.length>this.maxIndividualMmsis)throw new Error("Too many MMSIs");e.fill(255),n.fill(255);for(let[r,i]of this.individualMmsis.entries())i.fillConfig(e,n,r)}fillGroupConfig(e,n){if(this.sortGroup(),this.groupMmsis.length>this.maxGroupMmsis)throw new Error("Too many group MMSIs");e.fill(255),n.fill(255);for(let[r,i]of this.groupMmsis.entries())i.fillConfig(e,n,r)}initFromConfig(e,n,r,i){let o=[],s=[];for(let a=0;a<this.maxIndividualMmsis;a++){let l=Xy(e.subarray(a*16,(a+1)*16),n.subarray(It(a)));l&&o.push(l)}for(let a=0;a<this.maxGroupMmsis;a++){let l=Xy(r.subarray(a*16,(a+1)*16),i.subarray(It(a)));l&&s.push(l)}this.individualMmsis=o,this.groupMmsis=s}};var Xa=64;function el(t,e){return A(this,null,function*(){let n,r=new Promise((i,o)=>{n=setTimeout(()=>o(new Error("Timeout")),e)});return Promise.race([t,r]).then(i=>(clearTimeout(n),i))})}var ui=class{constructor(e){this.dev=e}supportsMessaging(){return!0}sendMessage(e,n,r){return A(this,null,function*(){let i=new So({type:e,args:n}).toString();r?yield el(this.dev.write(i),r):yield this.dev.write(i),console.log(`Wrote command ${JSON.stringify(i)}`)})}receiveMessage(e){return A(this,null,function*(){let n;return e?n=yield el(this.dev.readline(),e):n=yield this.dev.readline(),console.log(`Received line ${n}`),new So({encoded:n})})}waitForReady_(){return A(this,null,function*(){let e="";for(;e!="00";){if(this.dev.flushInput(),yield this.sendMessage("#CEPSR",["00"]),(yield this.receiveMessage()).type!="#CMDOK")throw new Error("Device did not acknowledge status request");let r=yield this.receiveMessage();if(r.type!="#CEPSD")throw new Error("Device did not return status");e=r.args[0],e!="00"&&console.log(`Waiting for radio, state=${e}`),this.sendMessage("#CMDOK")}})}waitForReady(){return A(this,null,function*(){yield el(this.waitForReady_(),1e3)})}readConfigMemoryChunk(e,n){return A(this,null,function*(){if(yield this.waitForReady(),yield this.sendMessage("#CEPRD",[tt(e,4),tt(n,2)]),(yield this.receiveMessage()).type!="#CMDOK")throw new Error("Device did not acknowledge read");let i=yield this.receiveMessage();if(i.type!="#CEPDT")throw new Error("Device did not reply with data");return this.sendMessage("#CMDOK"),Ha(i.args[2])})}writeConfigMemoryChunk(e,n){return A(this,null,function*(){yield this.waitForReady();let r=Ut(n);if(yield this.sendMessage("#CEPWR",[tt(e,4),tt(n.length,2),r]),(yield this.receiveMessage()).type!="#CMDOK")throw new Error("Device did not acknowledge write")})}readConfigMemory(e,n,r){return A(this,null,function*(){let i=new Uint8Array(n);for(let o=0;o<n;o+=Xa)i.set(yield this.readConfigMemoryChunk(e+o,Math.min(n-o,Xa)),o),r(o);return i})}writeConfigMemory(e,n,r){return A(this,null,function*(){for(let i=0;i<e.length;i+=Xa)yield this.writeConfigMemoryChunk(n+i,e.subarray(i,Math.min(i+Xa,e.length))),r(i)})}waitForGps_(){return A(this,null,function*(){for(;;){this.dev.flushInput(),this.sendMessage("$PMTK",["000"]);let e=yield this.receiveMessage();if(e.type=="$PMTK"&&e.args.length==3&&e.args[0]=="001"&&e.args[1]=="0"&&e.args[2]=="3")return}})}waitForGps(){return A(this,null,function*(){yield el(this.waitForGps_(),1e3)})}},di=class{constructor(e){this.datImage=e}supportsMessaging(){return!1}sendMessage(e,n,r){throw new Error("sendMessage is unavailable on DatConfigProtocol.")}receiveMessage(e){throw new Error("sendMessage is unavailable on DatConfigProtocol.")}waitForReady(){return A(this,null,function*(){})}waitForGps(){return A(this,null,function*(){})}readConfigMemory(e,n,r){return A(this,null,function*(){return r(n),this.datImage.slice(e,e+n)})}writeConfigMemory(e,n,r){return A(this,null,function*(){r(e.length),this.datImage.subarray(n).set(e)})}};var tl=class{constructor(e){this.configProtocol=e,this.ranges=new Map}addRange(e,n,r){this.ranges.set(e,{start:n,end:r})}reset(){this.ranges.clear()}read(e){return A(this,null,function*(){let n=new Map,r=0,i=0;this.ranges.forEach(o=>{i+=o.end-o.start});for(let[o,s]of this.ranges.entries())n.set(o,yield this.configProtocol.readConfigMemory(s.start,s.end-s.start,a=>{e((a+r)/i)})),r+=s.end-s.start;return n})}};var nl=Symbol.for("yaml.alias"),rl=Symbol.for("yaml.document"),St=Symbol.for("yaml.map"),_f=Symbol.for("yaml.pair"),dt=Symbol.for("yaml.scalar"),un=Symbol.for("yaml.seq"),ze=Symbol.for("yaml.node.type"),Mt=t=>!!t&&typeof t=="object"&&t[ze]===nl,dn=t=>!!t&&typeof t=="object"&&t[ze]===rl,Nt=t=>!!t&&typeof t=="object"&&t[ze]===St,K=t=>!!t&&typeof t=="object"&&t[ze]===_f,U=t=>!!t&&typeof t=="object"&&t[ze]===dt,Tt=t=>!!t&&typeof t=="object"&&t[ze]===un;function re(t){if(t&&typeof t=="object")switch(t[ze]){case St:case un:return!0}return!1}function X(t){if(t&&typeof t=="object")switch(t[ze]){case nl:case St:case dt:case un:return!0}return!1}var ev=t=>(U(t)||re(t))&&!!t.anchor;var Ye=Symbol("break visit"),tv=Symbol("skip children"),qt=Symbol("remove node");function Ke(t,e){let n=nv(e);dn(t)?fi(null,t.contents,n,Object.freeze([t]))===qt&&(t.contents=null):fi(null,t,n,Object.freeze([]))}Ke.BREAK=Ye;Ke.SKIP=tv;Ke.REMOVE=qt;function fi(t,e,n,r){let i=rv(t,e,n,r);if(X(i)||K(i))return iv(t,r,i),fi(t,i,n,r);if(typeof i!="symbol"){if(re(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){let s=fi(o,e.items[o],n,r);if(typeof s=="number")o=s-1;else{if(s===Ye)return Ye;s===qt&&(e.items.splice(o,1),o-=1)}}}else if(K(e)){r=Object.freeze(r.concat(e));let o=fi("key",e.key,n,r);if(o===Ye)return Ye;o===qt&&(e.key=null);let s=fi("value",e.value,n,r);if(s===Ye)return Ye;s===qt&&(e.value=null)}}return i}function il(t,e){return A(this,null,function*(){let n=nv(e);dn(t)?(yield hi(null,t.contents,n,Object.freeze([t])))===qt&&(t.contents=null):yield hi(null,t,n,Object.freeze([]))})}il.BREAK=Ye;il.SKIP=tv;il.REMOVE=qt;function hi(t,e,n,r){return A(this,null,function*(){let i=yield rv(t,e,n,r);if(X(i)||K(i))return iv(t,r,i),hi(t,i,n,r);if(typeof i!="symbol"){if(re(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){let s=yield hi(o,e.items[o],n,r);if(typeof s=="number")o=s-1;else{if(s===Ye)return Ye;s===qt&&(e.items.splice(o,1),o-=1)}}}else if(K(e)){r=Object.freeze(r.concat(e));let o=yield hi("key",e.key,n,r);if(o===Ye)return Ye;o===qt&&(e.key=null);let s=yield hi("value",e.value,n,r);if(s===Ye)return Ye;s===qt&&(e.value=null)}}return i})}function nv(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function rv(t,e,n,r){if(typeof n=="function")return n(t,e,r);if(Nt(e))return n.Map?.(t,e,r);if(Tt(e))return n.Seq?.(t,e,r);if(K(e))return n.Pair?.(t,e,r);if(U(e))return n.Scalar?.(t,e,r);if(Mt(e))return n.Alias?.(t,e,r)}function iv(t,e,n){let r=e[e.length-1];if(re(r))r.items[t]=n;else if(K(r))t==="key"?r.key=n:r.value=n;else if(dn(r))r.contents=n;else{let i=Mt(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}var FS={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},LS=t=>t.replace(/[!,[\]{}]/g,e=>FS[e]),pi=(()=>{class t{constructor(n,r){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},t.defaultYaml,n),this.tags=Object.assign({},t.defaultTags,r)}clone(){let n=new t(this.yaml,this.tags);return n.docStart=this.docStart,n}atDocument(){let n=new t(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:t.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},t.defaultTags);break}return n}add(n,r){this.atNextDocument&&(this.yaml={explicit:t.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},t.defaultTags),this.atNextDocument=!1);let i=n.trim().split(/[ \t]+/),o=i.shift();switch(o){case"%TAG":{if(i.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),i.length<2))return!1;let[s,a]=i;return this.tags[s]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,i.length!==1)return r(0,"%YAML directive should contain exactly one part"),!1;let[s]=i;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{let a=/^\d+\.\d+$/.test(s);return r(6,`Unsupported YAML version ${s}`,a),!1}}default:return r(0,`Unknown directive ${o}`,!0),!1}}tagName(n,r){if(n==="!")return"!";if(n[0]!=="!")return r(`Not a valid tag: ${n}`),null;if(n[1]==="<"){let a=n.slice(2,-1);return a==="!"||a==="!!"?(r(`Verbatim tags aren't resolved, so ${n} is invalid.`),null):(n[n.length-1]!==">"&&r("Verbatim tags must end with a >"),a)}let[,i,o]=n.match(/^(.*!)([^!]*)$/s);o||r(`The ${n} tag has no suffix`);let s=this.tags[i];if(s)try{return s+decodeURIComponent(o)}catch(a){return r(String(a)),null}return i==="!"?n:(r(`Could not resolve tag: ${n}`),null)}tagString(n){for(let[r,i]of Object.entries(this.tags))if(n.startsWith(i))return r+LS(n.substring(i.length));return n[0]==="!"?n:`!<${n}>`}toString(n){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags),o;if(n&&i.length>0&&X(n.contents)){let s={};Ke(n.contents,(a,l)=>{X(l)&&l.tag&&(s[l.tag]=!0)}),o=Object.keys(s)}else o=[];for(let[s,a]of i)s==="!!"&&a==="tag:yaml.org,2002:"||(!n||o.some(l=>l.startsWith(a)))&&r.push(`%TAG ${s} ${a}`);return r.join(`
`)}}return t.defaultYaml={explicit:!1,version:"1.2"},t.defaultTags={"!!":"tag:yaml.org,2002:"},t})();function ol(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Df(t){let e=new Set;return Ke(t,{Value(n,r){r.anchor&&e.add(r.anchor)}}),e}function Ef(t,e){for(let n=1;;++n){let r=`${t}${n}`;if(!e.has(r))return r}}function ov(t,e){let n=[],r=new Map,i=null;return{onAnchor:o=>{n.push(o),i||(i=Df(t));let s=Ef(e,i);return i.add(s),s},setAnchors:()=>{for(let o of n){let s=r.get(o);if(typeof s=="object"&&s.anchor&&(U(s.node)||re(s.node)))s.node.anchor=s.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:r}}function xn(t,e,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,o=r.length;i<o;++i){let s=r[i],a=xn(t,r,String(i),s);a===void 0?delete r[i]:a!==s&&(r[i]=a)}else if(r instanceof Map)for(let i of Array.from(r.keys())){let o=r.get(i),s=xn(t,r,i,o);s===void 0?r.delete(i):s!==o&&r.set(i,s)}else if(r instanceof Set)for(let i of Array.from(r)){let o=xn(t,r,i,i);o===void 0?r.delete(i):o!==i&&(r.delete(i),r.add(o))}else for(let[i,o]of Object.entries(r)){let s=xn(t,r,i,o);s===void 0?delete r[i]:s!==o&&(r[i]=s)}return t.call(e,n,r)}function Me(t,e,n){if(Array.isArray(t))return t.map((r,i)=>Me(r,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!ev(t))return t.toJSON(e,n);let r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=o=>{r.res=o,delete n.onCreate};let i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!n?.keep?Number(t):t}var On=class{constructor(e){Object.defineProperty(this,ze,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){if(!dn(e))throw new TypeError("A document argument is required");let s={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=Me(this,"",s);if(typeof i=="function")for(let{count:l,res:c}of s.anchors.values())i(c,l);return typeof o=="function"?xn(o,{"":a},"",a):a}};var fn=class extends On{constructor(e){super(nl),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return Ke(e,{Node:(r,i)=>{if(i===this)return Ke.BREAK;i.anchor===this.source&&(n=i)}}),n}toJSON(e,n){if(!n)return{source:this.source};let{anchors:r,doc:i,maxAliasCount:o}=n,s=this.resolve(i);if(!s){let l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(s);if(a||(Me(s,null,n),a=r.get(s)),!a||a.res===void 0){let l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=sl(i,s,r)),a.count*a.aliasCount>o)){let l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,r){let i=`*${this.source}`;if(e){if(ol(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}};function sl(t,e,n){if(Mt(e)){let r=e.resolve(t),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(re(e)){let r=0;for(let i of e.items){let o=sl(t,i,n);o>r&&(r=o)}return r}else if(K(e)){let r=sl(t,e.key,n),i=sl(t,e.value,n);return Math.max(r,i)}return 1}var al=t=>!t||typeof t!="function"&&typeof t!="object",M=(()=>{class t extends On{constructor(n){super(dt),this.value=n}toJSON(n,r){return r?.keep?this.value:Me(this.value,n,r)}toString(){return String(this.value)}}return t.BLOCK_FOLDED="BLOCK_FOLDED",t.BLOCK_LITERAL="BLOCK_LITERAL",t.PLAIN="PLAIN",t.QUOTE_DOUBLE="QUOTE_DOUBLE",t.QUOTE_SINGLE="QUOTE_SINGLE",t})();var VS="tag:yaml.org,2002:";function $S(t,e,n){if(e){let r=n.filter(o=>o.tag===e),i=r.find(o=>!o.format)??r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(r=>r.identify?.(t)&&!r.format)}function hn(t,e,n){if(dn(t)&&(t=t.contents),X(t))return t;if(K(t)){let d=n.schema[St].createNode?.(n.schema,null,n);return d.items.push(t),d}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:r,onAnchor:i,onTagObj:o,schema:s,sourceObjects:a}=n,l;if(r&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor||(l.anchor=i(t)),new fn(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=VS+e.slice(2));let c=$S(t,e,s.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let d=new M(t);return l&&(l.node=d),d}c=t instanceof Map?s[St]:Symbol.iterator in Object(t)?s[un]:s[St]}o&&(o(c),delete n.onTagObj);let u=c?.createNode?c.createNode(n.schema,t,n):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(n.schema,t,n):new M(t);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}function Ao(t,e,n){let r=n;for(let i=e.length-1;i>=0;--i){let o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){let s=[];s[o]=r,r=s}else r=new Map([[o,r]])}return hn(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var mi=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,ll=(()=>{class t extends On{constructor(n,r){super(n),Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(n){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return n&&(r.schema=n),r.items=r.items.map(i=>X(i)||K(i)?i.clone(n):i),this.range&&(r.range=this.range.slice()),r}addIn(n,r){if(mi(n))this.add(r);else{let[i,...o]=n,s=this.get(i,!0);if(re(s))s.addIn(o,r);else if(s===void 0&&this.schema)this.set(i,Ao(this.schema,o,r));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${o}`)}}deleteIn(n){let[r,...i]=n;if(i.length===0)return this.delete(r);let o=this.get(r,!0);if(re(o))return o.deleteIn(i);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}getIn(n,r){let[i,...o]=n,s=this.get(i,!0);return o.length===0?!r&&U(s)?s.value:s:re(s)?s.getIn(o,r):void 0}hasAllNullValues(n){return this.items.every(r=>{if(!K(r))return!1;let i=r.value;return i==null||n&&U(i)&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}hasIn(n){let[r,...i]=n;if(i.length===0)return this.has(r);let o=this.get(r,!0);return re(o)?o.hasIn(i):!1}setIn(n,r){let[i,...o]=n;if(o.length===0)this.set(i,r);else{let s=this.get(i,!0);if(re(s))s.setIn(o,r);else if(s===void 0&&this.schema)this.set(i,Ao(this.schema,o,r));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${o}`)}}}return t.maxFlowStringSingleLineLength=60,t})();var sv=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function ft(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}var zt=(t,e,n)=>t.endsWith(`
`)?ft(n,e):n.includes(`
`)?`
`+ft(n,e):(t.endsWith(" ")?"":" ")+n;var If="flow",cl="block",xo="quoted";function Oo(t,e,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;let l=Math.max(1+o,1+i-e.length);if(t.length<=l)return t;let c=[],u={},d=i-e.length;typeof r=="number"&&(r>i-Math.max(2,o)?c.push(0):d=i-r);let f,h,m=!1,p=-1,g=-1,v=-1;n===cl&&(p=av(t,p,e.length),p!==-1&&(d=p+l));for(let b;b=t[p+=1];){if(n===xo&&b==="\\"){switch(g=p,t[p+1]){case"x":p+=3;break;case"u":p+=5;break;case"U":p+=9;break;default:p+=1}v=p}if(b===`
`)n===cl&&(p=av(t,p,e.length)),d=p+e.length+l,f=void 0;else{if(b===" "&&h&&h!==" "&&h!==`
`&&h!=="	"){let D=t[p+1];D&&D!==" "&&D!==`
`&&D!=="	"&&(f=p)}if(p>=d)if(f)c.push(f),d=f+l,f=void 0;else if(n===xo){for(;h===" "||h==="	";)h=b,b=t[p+=1],m=!0;let D=p>v+1?p-2:g-1;if(u[D])return t;c.push(D),u[D]=!0,d=D+l,f=void 0}else m=!0}h=b}if(m&&a&&a(),c.length===0)return t;s&&s();let w=t.slice(0,c[0]);for(let b=0;b<c.length;++b){let D=c[b],T=c[b+1]||t.length;D===0?w=`
${e}${t.slice(0,T)}`:(n===xo&&u[D]&&(w+=`${t[D]}\\`),w+=`
${e}${t.slice(D+1,T)}`)}return w}function av(t,e,n){let r=e,i=e+1,o=t[i];for(;o===" "||o==="	";)if(e<i+n)o=t[++e];else{do o=t[++e];while(o&&o!==`
`);r=e,i=e+1,o=t[i]}return r}var dl=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),fl=t=>/^(%|---|\.\.\.)/m.test(t);function jS(t,e,n){if(!e||e<0)return!1;let r=e-n,i=t.length;if(i<=r)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>r)return!0;if(s=o+1,i-s<=r)return!1}return!0}function ko(t,e){let n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;let{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(fl(t)?"  ":""),s="",a=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(s+=n.slice(a,l)+"\\ ",l+=1,a=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{s+=n.slice(a,l);let u=n.substr(l+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(s+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)s+=`
`,l+=2;s+=o,n[l+2]===" "&&(s+="\\"),l+=1,a=l+1}break;default:l+=1}return s=a?s+n.slice(a):n,r?s:Oo(s,o,xo,dl(e,!1))}function Sf(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return ko(t,e);let n=e.indent||(fl(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:Oo(r,n,If,dl(e,!1))}function gi(t,e){let{singleQuote:n}=e.options,r;if(n===!1)r=ko;else{let i=t.includes('"'),o=t.includes("'");i&&!o?r=Sf:o&&!i?r=ko:r=n?Sf:ko}return r(t,e)}var Mf;try{Mf=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Mf=/\n+(?!\n|$)/g}function ul({comment:t,type:e,value:n},r,i,o){let{blockQuote:s,commentString:a,lineWidth:l}=r.options;if(!s||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return gi(n,r);let c=r.indent||(r.forceBlockIndent||fl(n)?"  ":""),u=s==="literal"?!0:s==="folded"||e===M.BLOCK_FOLDED?!1:e===M.BLOCK_LITERAL?!0:!jS(n,l,c.length);if(!n)return u?`|
`:`>
`;let d,f;for(f=n.length;f>0;--f){let C=n[f-1];if(C!==`
`&&C!=="	"&&C!==" ")break}let h=n.substring(f),m=h.indexOf(`
`);m===-1?d="-":n===h||m!==h.length-1?(d="+",o&&o()):d="",h&&(n=n.slice(0,-h.length),h[h.length-1]===`
`&&(h=h.slice(0,-1)),h=h.replace(Mf,`$&${c}`));let p=!1,g,v=-1;for(g=0;g<n.length;++g){let C=n[g];if(C===" ")p=!0;else if(C===`
`)v=g;else break}let w=n.substring(0,v<g?v+1:g);w&&(n=n.substring(w.length),w=w.replace(/\n+/g,`$&${c}`));let D=(u?"|":">")+(p?c?"2":"1":"")+d;if(t&&(D+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),u)return n=n.replace(/\n+/g,`$&${c}`),`${D}
${c}${w}${n}${h}`;n=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let T=Oo(`${w}${n}${h}`,c,cl,dl(r,!0));return`${D}
${c}${T}`}function BS(t,e,n,r){let{type:i,value:o}=t,{actualString:s,implicitKey:a,indent:l,indentStep:c,inFlow:u}=e;if(a&&o.includes(`
`)||u&&/[[\]{},]/.test(o))return gi(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return a||u||!o.includes(`
`)?gi(o,e):ul(t,e,n,r);if(!a&&!u&&i!==M.PLAIN&&o.includes(`
`))return ul(t,e,n,r);if(fl(o)){if(l==="")return e.forceBlockIndent=!0,ul(t,e,n,r);if(a&&l===c)return gi(o,e)}let d=o.replace(/\n+/g,`$&
${l}`);if(s){let f=p=>p.default&&p.tag!=="tag:yaml.org,2002:str"&&p.test?.test(d),{compat:h,tags:m}=e.doc.schema;if(m.some(f)||h?.some(f))return gi(o,e)}return a?d:Oo(d,l,If,dl(e,!1))}function gr(t,e,n,r){let{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==M.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=M.QUOTE_DOUBLE);let l=u=>{switch(u){case M.BLOCK_FOLDED:case M.BLOCK_LITERAL:return i||o?gi(s.value,e):ul(s,e,n,r);case M.QUOTE_DOUBLE:return ko(s.value,e);case M.QUOTE_SINGLE:return Sf(s.value,e);case M.PLAIN:return BS(s,e,n,r);default:return null}},c=l(a);if(c===null){let{defaultKeyType:u,defaultStringType:d}=e.options,f=i&&u||d;if(c=l(f),c===null)throw new Error(`Unsupported default string type ${f}`)}return c}function hl(t,e){let n=Object.assign({blockQuote:!0,commentString:sv,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e),r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function US(t,e){if(e.tag){let i=t.filter(o=>o.tag===e.tag);if(i.length>0)return i.find(o=>o.format===e.format)??i[0]}let n,r;if(U(e)){r=e.value;let i=t.filter(o=>o.identify?.(r));n=i.find(o=>o.format===e.format)??i.find(o=>!o.format)}else r=e,n=t.find(i=>i.nodeClass&&r instanceof i.nodeClass);if(!n){let i=r?.constructor?.name??typeof r;throw new Error(`Tag not resolved for ${i} value`)}return n}function HS(t,e,{anchors:n,doc:r}){if(!r.directives)return"";let i=[],o=(U(t)||re(t))&&t.anchor;o&&ol(o)&&(n.add(o),i.push(`&${o}`));let s=t.tag?t.tag:e.default?null:e.tag;return s&&i.push(r.directives.tagString(s)),i.join(" ")}function pn(t,e,n,r){if(K(t))return t.toString(e,n,r);if(Mt(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i,o=X(t)?t:e.doc.createNode(t,{onTagObj:l=>i=l});i||(i=US(e.doc.schema.tags,o));let s=HS(o,i,e);s.length>0&&(e.indentAtStart=(e.indentAtStart??0)+s.length+1);let a=typeof i.stringify=="function"?i.stringify(o,e,n,r):U(o)?gr(o,e,n,r):o.toString(e,n,r);return s?U(o)||a[0]==="{"||a[0]==="["?`${s} ${a}`:`${s}
${e.indent}${a}`:a}function lv({key:t,value:e},n,r,i){let{allNullValues:o,doc:s,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:d}}=n,f=X(t)&&t.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(re(t)){let te="With simple keys, collection cannot be used as a key value";throw new Error(te)}}let h=!d&&(!t||f&&e==null&&!n.inFlow||re(t)||(U(t)?t.type===M.BLOCK_FOLDED||t.type===M.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!h&&(d||!o),indent:a+l});let m=!1,p=!1,g=pn(t,n,()=>m=!0,()=>p=!0);if(!h&&!n.inFlow&&g.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(n.inFlow){if(o||e==null)return m&&r&&r(),g===""?"?":h?`? ${g}`:g}else if(o&&!d||e==null&&h)return g=`? ${g}`,f&&!m?g+=zt(g,n.indent,c(f)):p&&i&&i(),g;m&&(f=null),h?(f&&(g+=zt(g,n.indent,c(f))),g=`? ${g}
${a}:`):(g=`${g}:`,f&&(g+=zt(g,n.indent,c(f))));let v,w,b;X(e)?(v=!!e.spaceBefore,w=e.commentBefore,b=e.comment):(v=!1,w=null,b=null,e&&typeof e=="object"&&(e=s.createNode(e))),n.implicitKey=!1,!h&&!f&&U(e)&&(n.indentAtStart=g.length+1),p=!1,!u&&l.length>=2&&!n.inFlow&&!h&&Tt(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let D=!1,T=pn(e,n,()=>D=!0,()=>p=!0),C=" ";if(f||v||w){if(C=v?`
`:"",w){let te=c(w);C+=`
${ft(te,n.indent)}`}T===""&&!n.inFlow?C===`
`&&(C=`

`):C+=`
${n.indent}`}else if(!h&&re(e)){let te=T[0],ae=T.indexOf(`
`),we=ae!==-1,Qt=n.inFlow??e.flow??e.items.length===0;if(we||!Qt){let G=!1;if(we&&(te==="&"||te==="!")){let me=T.indexOf(" ");te==="&"&&me!==-1&&me<ae&&T[me+1]==="!"&&(me=T.indexOf(" ",me+1)),(me===-1||ae<me)&&(G=!0)}G||(C=`
${n.indent}`)}}else(T===""||T[0]===`
`)&&(C="");return g+=C+T,n.inFlow?D&&r&&r():b&&!D?g+=zt(g,n.indent,c(b)):p&&i&&i(),g}function Nf(t,e){(t==="debug"||t==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}var cv="<<";function pl(t,e,{key:n,value:r}){if(t?.doc.schema.merge&&qS(n))if(r=Mt(r)?r.resolve(t.doc):r,Tt(r))for(let i of r.items)Tf(t,e,i);else if(Array.isArray(r))for(let i of r)Tf(t,e,i);else Tf(t,e,r);else{let i=Me(n,"",t);if(e instanceof Map)e.set(i,Me(r,i,t));else if(e instanceof Set)e.add(i);else{let o=zS(n,i,t),s=Me(r,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}var qS=t=>t===cv||U(t)&&t.value===cv&&(!t.type||t.type===M.PLAIN);function Tf(t,e,n){let r=t&&Mt(n)?n.resolve(t.doc):n;if(!Nt(r))throw new Error("Merge sources must be maps or map aliases");let i=r.toJSON(null,t,Map);for(let[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function zS(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(X(t)&&n?.doc){let r=hl(n.doc,{});r.anchors=new Set;for(let o of n.anchors.keys())r.anchors.add(o.anchor);r.inFlow=!0,r.inStringifyKey=!0;let i=t.toString(r);if(!n.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),Nf(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function yi(t,e,n){let r=hn(t,void 0,n),i=hn(e,void 0,n);return new ye(r,i)}var ye=class t{constructor(e,n=null){Object.defineProperty(this,ze,{value:_f}),this.key=e,this.value=n}clone(e){let{key:n,value:r}=this;return X(n)&&(n=n.clone(e)),X(r)&&(r=r.clone(e)),new t(n,r)}toJSON(e,n){let r=n?.mapAsMap?new Map:{};return pl(n,r,this)}toString(e,n,r){return e?.doc?lv(this,e,n,r):JSON.stringify(this)}};function gl(t,e,n){return(e.inFlow??t.flow?WS:GS)(t,e,n)}function GS({comment:t,items:e},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:s,onComment:a}){let{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:o,type:null}),d=!1,f=[];for(let m=0;m<e.length;++m){let p=e[m],g=null;if(X(p))!d&&p.spaceBefore&&f.push(""),ml(n,f,p.commentBefore,d),p.comment&&(g=p.comment);else if(K(p)){let w=X(p.key)?p.key:null;w&&(!d&&w.spaceBefore&&f.push(""),ml(n,f,w.commentBefore,d))}d=!1;let v=pn(p,u,()=>g=null,()=>d=!0);g&&(v+=zt(v,o,c(g))),d&&g&&(d=!1),f.push(r+v)}let h;if(f.length===0)h=i.start+i.end;else{h=f[0];for(let m=1;m<f.length;++m){let p=f[m];h+=p?`
${l}${p}`:`
`}}return t?(h+=`
`+ft(c(t),l),a&&a()):d&&s&&s(),h}function WS({items:t},e,{flowChars:n,itemIndent:r}){let{indent:i,indentStep:o,flowCollectionPadding:s,options:{commentString:a}}=e;r+=o;let l=Object.assign({},e,{indent:r,inFlow:!0,type:null}),c=!1,u=0,d=[];for(let m=0;m<t.length;++m){let p=t[m],g=null;if(X(p))p.spaceBefore&&d.push(""),ml(e,d,p.commentBefore,!1),p.comment&&(g=p.comment);else if(K(p)){let w=X(p.key)?p.key:null;w&&(w.spaceBefore&&d.push(""),ml(e,d,w.commentBefore,!1),w.comment&&(c=!0));let b=X(p.value)?p.value:null;b?(b.comment&&(g=b.comment),b.commentBefore&&(c=!0)):p.value==null&&w?.comment&&(g=w.comment)}g&&(c=!0);let v=pn(p,l,()=>g=null);m<t.length-1&&(v+=","),g&&(v+=zt(v,r,a(g))),!c&&(d.length>u||v.includes(`
`))&&(c=!0),d.push(v),u=d.length}let{start:f,end:h}=n;if(d.length===0)return f+h;if(!c){let m=d.reduce((p,g)=>p+g.length+2,2);c=e.options.lineWidth>0&&m>e.options.lineWidth}if(c){let m=f;for(let p of d)m+=p?`
${o}${i}${p}`:`
`;return`${m}
${i}${h}`}else return`${f}${s}${d.join(" ")}${s}${h}`}function ml({indent:t,options:{commentString:e}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){let o=ft(e(r),t);n.push(o.trimStart())}}function kn(t,e){let n=U(e)?e.value:e;for(let r of t)if(K(r)&&(r.key===e||r.key===n||U(r.key)&&r.key.value===n))return r}var de=class extends ll{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(St,e),this.items=[]}static from(e,n,r){let{keepUndefined:i,replacer:o}=r,s=new this(e),a=(l,c)=>{if(typeof o=="function")c=o.call(n,l,c);else if(Array.isArray(o)&&!o.includes(l))return;(c!==void 0||i)&&s.items.push(yi(l,c,r))};if(n instanceof Map)for(let[l,c]of n)a(l,c);else if(n&&typeof n=="object")for(let l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&s.items.sort(e.sortMapEntries),s}add(e,n){let r;K(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new ye(e,e?.value):r=new ye(e.key,e.value);let i=kn(this.items,r.key),o=this.schema?.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);U(i.value)&&al(r.value)?i.value.value=r.value:i.value=r.value}else if(o){let s=this.items.findIndex(a=>o(r,a)<0);s===-1?this.items.push(r):this.items.splice(s,0,r)}else this.items.push(r)}delete(e){let n=kn(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){let i=kn(this.items,e)?.value;return(!n&&U(i)?i.value:i)??void 0}has(e){return!!kn(this.items,e)}set(e,n){this.add(new ye(e,n),!0)}toJSON(e,n,r){let i=r?new r:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(i);for(let o of this.items)pl(n,i,o);return i}toString(e,n,r){if(!e)return JSON.stringify(this);for(let i of this.items)if(!K(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),gl(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:n})}};var At={collection:"map",default:!0,nodeClass:de,tag:"tag:yaml.org,2002:map",resolve(t,e){return Nt(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>de.from(t,e,n)};var pe=class extends ll{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(un,e),this.items=[]}add(e){this.items.push(e)}delete(e){let n=yl(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){let r=yl(e);if(typeof r!="number")return;let i=this.items[r];return!n&&U(i)?i.value:i}has(e){let n=yl(e);return typeof n=="number"&&n<this.items.length}set(e,n){let r=yl(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);let i=this.items[r];U(i)&&al(n)?i.value=n:this.items[r]=n}toJSON(e,n){let r=[];n?.onCreate&&n.onCreate(r);let i=0;for(let o of this.items)r.push(Me(o,String(i++),n));return r}toString(e,n,r){return e?gl(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(e,n,r){let{replacer:i}=r,o=new this(e);if(n&&Symbol.iterator in Object(n)){let s=0;for(let a of n){if(typeof i=="function"){let l=n instanceof Set?a:String(s++);a=i.call(n,l,a)}o.items.push(hn(a,void 0,r))}}return o}};function yl(t){let e=U(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}var xt={collection:"seq",default:!0,nodeClass:pe,tag:"tag:yaml.org,2002:seq",resolve(t,e){return Tt(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>pe.from(t,e,n)};var Rn={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),gr(t,e,n,r)}};var yr={identify:t=>t==null,createNode:()=>new M(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new M(null),stringify:({source:t},e)=>typeof t=="string"&&yr.test.test(t)?t:e.options.nullStr};var Ro={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new M(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&Ro.test.test(t)){let r=t[0]==="t"||t[0]==="T";if(e===r)return t}return e?n.options.trueStr:n.options.falseStr}};function Be({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);let i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}var vl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Be},wl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():Be(t)}},bl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new M(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Be};var Cl=t=>typeof t=="bigint"||Number.isInteger(t),Af=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function uv(t,e,n){let{value:r}=t;return Cl(r)&&r>=0?n+r.toString(e):Be(t)}var _l={identify:t=>Cl(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>Af(t,2,8,n),stringify:t=>uv(t,8,"0o")},Dl={identify:Cl,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>Af(t,0,10,n),stringify:Be},El={identify:t=>Cl(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>Af(t,2,16,n),stringify:t=>uv(t,16,"0x")};var dv=[At,xt,Rn,yr,Ro,_l,Dl,El,vl,wl,bl];function fv(t){return typeof t=="bigint"||Number.isInteger(t)}var Il=({value:t})=>JSON.stringify(t),YS=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Il},{identify:t=>t==null,createNode:()=>new M(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Il},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:Il},{identify:fv,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>fv(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Il}],KS={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},hv=[At,xt].concat(YS,KS);var Po={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let n=atob(t.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,i,o){let s=n,a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=M.BLOCK_LITERAL),e!==M.QUOTE_DOUBLE){let l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let d=0,f=0;d<c;++d,f+=l)u[d]=a.substr(f,l);a=u.join(e===M.BLOCK_LITERAL?`
`:" ")}return gr({comment:t,type:e,value:a},r,i,o)}};function xf(t,e){if(Tt(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!K(r)){if(Nt(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");let i=r.items[0]||new ye(new M(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){let o=i.value??i.key;o.comment=o.comment?`${r.comment}
${o.comment}`:r.comment}r=i}t.items[n]=K(r)?r:new ye(r)}}else e("Expected a sequence for this tag");return t}function Of(t,e,n){let{replacer:r}=n,i=new pe(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof r=="function"&&(s=r.call(e,String(o++),s));let a,l;if(Array.isArray(s))if(s.length===2)a=s[0],l=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){let c=Object.keys(s);if(c.length===1)a=c[0],l=s[a];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else a=s;i.items.push(yi(a,l,n))}return i}var Fo={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:xf,createNode:Of};var kf=(()=>{class t extends pe{constructor(){super(),this.add=de.prototype.add.bind(this),this.delete=de.prototype.delete.bind(this),this.get=de.prototype.get.bind(this),this.has=de.prototype.has.bind(this),this.set=de.prototype.set.bind(this),this.tag=t.tag}toJSON(n,r){if(!r)return super.toJSON(n);let i=new Map;r?.onCreate&&r.onCreate(i);for(let o of this.items){let s,a;if(K(o)?(s=Me(o.key,"",r),a=Me(o.value,s,r)):s=Me(o,"",r),i.has(s))throw new Error("Ordered maps must not include duplicate keys");i.set(s,a)}return i}static from(n,r,i){let o=Of(n,r,i),s=new this;return s.items=o.items,s}}return t.tag="tag:yaml.org,2002:omap",t})(),Lo={collection:"seq",identify:t=>t instanceof Map,nodeClass:kf,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let n=xf(t,e),r=[];for(let{key:i}of n.items)U(i)&&(r.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new kf,n)},createNode:(t,e,n)=>kf.from(t,e,n)};function pv({value:t,source:e},n){return e&&(t?Rf:Pf).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}var Rf={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new M(!0),stringify:pv},Pf={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new M(!1),stringify:pv};var mv={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Be},gv={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():Be(t)}},yv={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new M(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){let r=t.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:Be};var Vo=t=>typeof t=="bigint"||Number.isInteger(t);function Sl(t,e,n,{intAsBigInt:r}){let i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let s=BigInt(t);return i==="-"?BigInt(-1)*s:s}let o=parseInt(t,n);return i==="-"?-1*o:o}function Ff(t,e,n){let{value:r}=t;if(Vo(r)){let i=r.toString(e);return r<0?"-"+n+i.substr(1):n+i}return Be(t)}var vv={identify:Vo,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Sl(t,2,2,n),stringify:t=>Ff(t,2,"0b")},wv={identify:Vo,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Sl(t,1,8,n),stringify:t=>Ff(t,8,"0")},bv={identify:Vo,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Sl(t,0,10,n),stringify:Be},Cv={identify:Vo,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Sl(t,2,16,n),stringify:t=>Ff(t,16,"0x")};var Lf=(()=>{class t extends de{constructor(n){super(n),this.tag=t.tag}add(n){let r;K(n)?r=n:n&&typeof n=="object"&&"key"in n&&"value"in n&&n.value===null?r=new ye(n.key,null):r=new ye(n,null),kn(this.items,r.key)||this.items.push(r)}get(n,r){let i=kn(this.items,n);return!r&&K(i)?U(i.key)?i.key.value:i.key:i}set(n,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let i=kn(this.items,n);i&&!r?this.items.splice(this.items.indexOf(i),1):!i&&r&&this.items.push(new ye(n))}toJSON(n,r){return super.toJSON(n,r,Set)}toString(n,r,i){if(!n)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},n,{allNullValues:!0}),r,i);throw new Error("Set items must all have null values")}static from(n,r,i){let{replacer:o}=i,s=new this(n);if(r&&Symbol.iterator in Object(r))for(let a of r)typeof o=="function"&&(a=o.call(r,a,a)),s.items.push(yi(a,null,i));return s}}return t.tag="tag:yaml.org,2002:set",t})(),$o={collection:"map",identify:t=>t instanceof Set,nodeClass:Lf,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>Lf.from(t,e,n),resolve(t,e){if(Nt(t)){if(t.hasAllNullValues(!0))return Object.assign(new Lf,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function Vf(t,e){let n=t[0],r=n==="-"||n==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=r.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return n==="-"?i(-1)*o:o}function _v(t){let{value:e}=t,n=s=>s;if(typeof e=="bigint")n=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return Be(t);let r="";e<0&&(r="-",e*=n(-1));let i=n(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),r+o.map(s=>String(s).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var Ml={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>Vf(t,n),stringify:_v},Nl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Vf(t,!1),stringify:_v},vi={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(vi.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,n,r,i,o,s,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0,c=Date.UTC(n,r-1,i,o||0,s||0,a||0,l),u=e[8];if(u&&u!=="Z"){let d=Vf(u,!1);Math.abs(d)<30&&(d*=60),c-=6e4*d}return new Date(c)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};var $f=[At,xt,Rn,yr,Rf,Pf,vv,wv,bv,Cv,mv,gv,yv,Po,Lo,Fo,$o,Ml,Nl,vi];var Dv=new Map([["core",dv],["failsafe",[At,xt,Rn]],["json",hv],["yaml11",$f],["yaml-1.1",$f]]),Ev={binary:Po,bool:Ro,float:bl,floatExp:wl,floatNaN:vl,floatTime:Nl,int:Dl,intHex:El,intOct:_l,intTime:Ml,map:At,null:yr,omap:Lo,pairs:Fo,seq:xt,set:$o,timestamp:vi},Iv={"tag:yaml.org,2002:binary":Po,"tag:yaml.org,2002:omap":Lo,"tag:yaml.org,2002:pairs":Fo,"tag:yaml.org,2002:set":$o,"tag:yaml.org,2002:timestamp":vi};function Tl(t,e){let n=Dv.get(e);if(!n)if(Array.isArray(t))n=[];else{let r=Array.from(Dv.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${r} or define customTags array`)}if(Array.isArray(t))for(let r of t)n=n.concat(r);else typeof t=="function"&&(n=t(n.slice()));return n.map(r=>{if(typeof r!="string")return r;let i=Ev[r];if(i)return i;let o=Object.keys(Ev).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${r}"; use one of ${o}`)})}var QS=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,jo=class t{constructor({compat:e,customTags:n,merge:r,resolveKnownTags:i,schema:o,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?Tl(e,"compat"):e?Tl(null,e):null,this.merge=!!r,this.name=typeof o=="string"&&o||"core",this.knownTags=i?Iv:{},this.tags=Tl(n,this.name),this.toStringOptions=a??null,Object.defineProperty(this,St,{value:At}),Object.defineProperty(this,dt,{value:Rn}),Object.defineProperty(this,un,{value:xt}),this.sortMapEntries=typeof s=="function"?s:s===!0?QS:null}clone(){let e=Object.create(t.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};function Sv(t,e){let n=[],r=e.directives===!0;if(e.directives!==!1&&t.directives){let l=t.directives.toString(t);l?(n.push(l),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");let i=hl(t,e),{commentString:o}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");let l=o(t.commentBefore);n.unshift(ft(l,""))}let s=!1,a=null;if(t.contents){if(X(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){let u=o(t.contents.commentBefore);n.push(ft(u,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}let l=a?void 0:()=>s=!0,c=pn(t.contents,i,()=>a=null,l);a&&(c+=zt(c,"",o(a))),(c[0]==="|"||c[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${c}`:n.push(c)}else n.push(pn(t.contents,i));if(t.directives?.docEnd)if(t.comment){let l=o(t.comment);l.includes(`
`)?(n.push("..."),n.push(ft(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&s&&(l=l.replace(/^\n+/,"")),l&&((!s||a)&&n[n.length-1]!==""&&n.push(""),n.push(ft(o(l),"")))}return n.join(`
`)+`
`}var Gt=class t{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,ze,{value:rl});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);let o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},r);this.options=o;let{version:s}=o;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new pi({version:s}),this.setSchema(s,r),this.contents=e===void 0?null:this.createNode(e,i,r)}clone(){let e=Object.create(t.prototype,{[ze]:{value:rl}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=X(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){wi(this.contents)&&this.contents.add(e)}addIn(e,n){wi(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){let r=Df(this);e.anchor=!n||r.has(n)?Ef(n||"a",r):n}return new fn(e.anchor)}createNode(e,n,r){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){let g=w=>typeof w=="number"||w instanceof String||w instanceof Number,v=n.filter(g).map(String);v.length>0&&(n=n.concat(v)),i=n}else r===void 0&&n&&(r=n,n=void 0);let{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:l,onTagObj:c,tag:u}=r??{},{onAnchor:d,setAnchors:f,sourceObjects:h}=ov(this,s||"a"),m={aliasDuplicateObjects:o??!0,keepUndefined:l??!1,onAnchor:d,onTagObj:c,replacer:i,schema:this.schema,sourceObjects:h},p=hn(e,u,m);return a&&re(p)&&(p.flow=!0),f(),p}createPair(e,n,r={}){let i=this.createNode(e,null,r),o=this.createNode(n,null,r);return new ye(i,o)}delete(e){return wi(this.contents)?this.contents.delete(e):!1}deleteIn(e){return mi(e)?this.contents==null?!1:(this.contents=null,!0):wi(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return re(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return mi(e)?!n&&U(this.contents)?this.contents.value:this.contents:re(this.contents)?this.contents.getIn(e,n):void 0}has(e){return re(this.contents)?this.contents.has(e):!1}hasIn(e){return mi(e)?this.contents!==void 0:re(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=Ao(this.schema,[e],n):wi(this.contents)&&this.contents.set(e,n)}setIn(e,n){mi(e)?this.contents=n:this.contents==null?this.contents=Ao(this.schema,Array.from(e),n):wi(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new pi({version:"1.1"}),r={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new pi({version:e}),r={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{let i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new jo(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:o,reviver:s}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=Me(this.contents,n??"",a);if(typeof o=="function")for(let{count:c,res:u}of a.anchors.values())o(u,c);return typeof s=="function"?xn(s,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Sv(this,e)}};function wi(t){if(re(t))return!0;throw new Error("Expected a YAML collection as document contents")}var Bo=class extends Error{constructor(e,n,r,i){super(),this.name=e,this.code=r,this.message=i,this.pos=n}},Ot=class extends Bo{constructor(e,n,r){super("YAMLParseError",e,n,r)}},Uo=class extends Bo{constructor(e,n,r){super("YAMLWarning",e,n,r)}},jf=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));let{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){let a=Math.min(o-39,s.length-79);s="\u2026"+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+"\u2026"),r>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),s=a+s}if(/[^ ]/.test(s)){let a=1,l=n.linePos[1];l&&l.line===r&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-o)));let c=" ".repeat(o)+"^".repeat(a);n.message+=`:

${s}
${c}
`}};function Wt(t,{flow:e,indicator:n,next:r,offset:i,onError:o,startOnNewline:s}){let a=!1,l=s,c=s,u="",d="",f=!1,h=!1,m=!1,p=null,g=null,v=null,w=null,b=null;for(let C of t)switch(m&&(C.type!=="space"&&C.type!=="newline"&&C.type!=="comma"&&o(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m=!1),C.type){case"space":!e&&l&&n!=="doc-start"&&C.source[0]==="	"&&o(C,"TAB_AS_INDENT","Tabs are not allowed as indentation"),c=!0;break;case"comment":{c||o(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let te=C.source.substring(1)||" ";u?u+=d+te:u=te,d="",l=!1;break}case"newline":l?u?u+=C.source:a=!0:d+=C.source,l=!0,f=!0,(p||g)&&(h=!0),c=!0;break;case"anchor":p&&o(C,"MULTIPLE_ANCHORS","A node can have at most one anchor"),C.source.endsWith(":")&&o(C.offset+C.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),p=C,b===null&&(b=C.offset),l=!1,c=!1,m=!0;break;case"tag":{g&&o(C,"MULTIPLE_TAGS","A node can have at most one tag"),g=C,b===null&&(b=C.offset),l=!1,c=!1,m=!0;break}case n:(p||g)&&o(C,"BAD_PROP_ORDER",`Anchors and tags must be after the ${C.source} indicator`),w&&o(C,"UNEXPECTED_TOKEN",`Unexpected ${C.source} in ${e??"collection"}`),w=C,l=!1,c=!1;break;case"comma":if(e){v&&o(C,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),v=C,l=!1,c=!1;break}default:o(C,"UNEXPECTED_TOKEN",`Unexpected ${C.type} token`),l=!1,c=!1}let D=t[t.length-1],T=D?D.offset+D.source.length:i;return m&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:v,found:w,spaceBefore:a,comment:u,hasNewline:f,hasNewlineAfterProp:h,anchor:p,tag:g,end:T,start:b??T}}function Pn(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let n of e.start)if(n.type==="newline")return!0;if(e.sep){for(let n of e.sep)if(n.type==="newline")return!0}if(Pn(e.key)||Pn(e.value))return!0}return!1;default:return!0}}function Ho(t,e,n){if(e?.type==="flow-collection"){let r=e.end[0];r.indent===t&&(r.source==="]"||r.source==="}")&&Pn(e)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Al(t,e,n){let{uniqueKeys:r}=t.options;if(r===!1)return!1;let i=typeof r=="function"?r:(o,s)=>o===s||U(o)&&U(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,n))}var Mv="All mapping items must start at the same column";function Nv({composeNode:t,composeEmptyNode:e},n,r,i,o){let s=o?.nodeClass??de,a=new s(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,c=null;for(let u of r.items){let{start:d,key:f,sep:h,value:m}=u,p=Wt(d,{indicator:"explicit-key-ind",next:f??h?.[0],offset:l,onError:i,startOnNewline:!0}),g=!p.found;if(g){if(f&&(f.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in f&&f.indent!==r.indent&&i(l,"BAD_INDENT",Mv)),!p.anchor&&!p.tag&&!h){c=p.end,p.comment&&(a.comment?a.comment+=`
`+p.comment:a.comment=p.comment);continue}(p.hasNewlineAfterProp||Pn(f))&&i(f??d[d.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else p.found?.indent!==r.indent&&i(l,"BAD_INDENT",Mv);let v=p.end,w=f?t(n,f,p,i):e(n,v,d,null,p,i);n.schema.compat&&Ho(r.indent,f,i),Al(n,a.items,w)&&i(v,"DUPLICATE_KEY","Map keys must be unique");let b=Wt(h??[],{indicator:"map-value-ind",next:m,offset:w.range[2],onError:i,startOnNewline:!f||f.type==="block-scalar"});if(l=b.end,b.found){g&&(m?.type==="block-map"&&!b.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&p.start<b.found.offset-1024&&i(w.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let D=m?t(n,m,b,i):e(n,l,h,null,b,i);n.schema.compat&&Ho(r.indent,m,i),l=D.range[2];let T=new ye(w,D);n.options.keepSourceTokens&&(T.srcToken=u),a.items.push(T)}else{g&&i(w.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),b.comment&&(w.comment?w.comment+=`
`+b.comment:w.comment=b.comment);let D=new ye(w);n.options.keepSourceTokens&&(D.srcToken=u),a.items.push(D)}}return c&&c<l&&i(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,c??l],a}function Tv({composeNode:t,composeEmptyNode:e},n,r,i,o){let s=o?.nodeClass??pe,a=new s(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,c=null;for(let{start:u,value:d}of r.items){let f=Wt(u,{indicator:"seq-item-ind",next:d,offset:l,onError:i,startOnNewline:!0});if(!f.found)if(f.anchor||f.tag||d)d&&d.type==="block-seq"?i(f.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{c=f.end,f.comment&&(a.comment=f.comment);continue}let h=d?t(n,d,f,i):e(n,f.end,u,null,f,i);n.schema.compat&&Ho(r.indent,d,i),l=h.range[2],a.items.push(h)}return a.range=[r.offset,l,c??l],a}function Yt(t,e,n,r){let i="";if(t){let o=!1,s="";for(let a of t){let{source:l,type:c}=a;switch(c){case"space":o=!0;break;case"comment":{n&&!o&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=l.substring(1)||" ";i?i+=s+u:i=u,s="";break}case"newline":i&&(s+=l),o=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:i,offset:e}}var Bf="Block collections are not allowed within flow collections",Uf=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Av({composeNode:t,composeEmptyNode:e},n,r,i,o){let s=r.start.source==="{",a=s?"flow map":"flow sequence",l=o?.nodeClass??(s?de:pe),c=new l(n.schema);c.flow=!0;let u=n.atRoot;u&&(n.atRoot=!1);let d=r.offset+r.start.source.length;for(let g=0;g<r.items.length;++g){let v=r.items[g],{start:w,key:b,sep:D,value:T}=v,C=Wt(w,{flow:a,indicator:"explicit-key-ind",next:b??D?.[0],offset:d,onError:i,startOnNewline:!1});if(!C.found){if(!C.anchor&&!C.tag&&!D&&!T){g===0&&C.comma?i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):g<r.items.length-1&&i(C.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),C.comment&&(c.comment?c.comment+=`
`+C.comment:c.comment=C.comment),d=C.end;continue}!s&&n.options.strict&&Pn(b)&&i(b,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(g===0)C.comma&&i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(C.comma||i(C.start,"MISSING_CHAR",`Missing , between ${a} items`),C.comment){let te="";e:for(let ae of w)switch(ae.type){case"comma":case"space":break;case"comment":te=ae.source.substring(1);break e;default:break e}if(te){let ae=c.items[c.items.length-1];K(ae)&&(ae=ae.value??ae.key),ae.comment?ae.comment+=`
`+te:ae.comment=te,C.comment=C.comment.substring(te.length+1)}}if(!s&&!D&&!C.found){let te=T?t(n,T,C,i):e(n,C.end,D,null,C,i);c.items.push(te),d=te.range[2],Uf(T)&&i(te.range,"BLOCK_IN_FLOW",Bf)}else{let te=C.end,ae=b?t(n,b,C,i):e(n,te,w,null,C,i);Uf(b)&&i(ae.range,"BLOCK_IN_FLOW",Bf);let we=Wt(D??[],{flow:a,indicator:"map-value-ind",next:T,offset:ae.range[2],onError:i,startOnNewline:!1});if(we.found){if(!s&&!C.found&&n.options.strict){if(D)for(let me of D){if(me===we.found)break;if(me.type==="newline"){i(me,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}C.start<we.found.offset-1024&&i(we.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else T&&("source"in T&&T.source&&T.source[0]===":"?i(T,"MISSING_CHAR",`Missing space after : in ${a}`):i(we.start,"MISSING_CHAR",`Missing , or : between ${a} items`));let Qt=T?t(n,T,we,i):we.found?e(n,we.end,D,null,we,i):null;Qt?Uf(T)&&i(Qt.range,"BLOCK_IN_FLOW",Bf):we.comment&&(ae.comment?ae.comment+=`
`+we.comment:ae.comment=we.comment);let G=new ye(ae,Qt);if(n.options.keepSourceTokens&&(G.srcToken=v),s){let me=c;Al(n,me.items,ae)&&i(te,"DUPLICATE_KEY","Map keys must be unique"),me.items.push(G)}else{let me=new de(n.schema);me.flow=!0,me.items.push(G),c.items.push(me)}d=Qt?Qt.range[2]:we.end}}let f=s?"}":"]",[h,...m]=r.end,p=d;if(h&&h.source===f)p=h.offset+h.source.length;else{let g=a[0].toUpperCase()+a.substring(1),v=u?`${g} must end with a ${f}`:`${g} in block collection must be sufficiently indented and end with a ${f}`;i(d,u?"MISSING_CHAR":"BAD_INDENT",v),h&&h.source.length!==1&&m.unshift(h)}if(m.length>0){let g=Yt(m,p,n.options.strict,i);g.comment&&(c.comment?c.comment+=`
`+g.comment:c.comment=g.comment),c.range=[r.offset,p,g.offset]}else c.range=[r.offset,p,p];return c}function Hf(t,e,n,r,i,o){let s=n.type==="block-map"?Nv(t,e,n,r,o):n.type==="block-seq"?Tv(t,e,n,r,o):Av(t,e,n,r,o),a=s.constructor;return i==="!"||i===a.tagName?(s.tag=a.tagName,s):(i&&(s.tag=i),s)}function xv(t,e,n,r,i){let o=r?e.directives.tagName(r.source,d=>i(r,"TAG_RESOLVE_FAILED",d)):null,s=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!r||!o||o==="!"||o===de.tagName&&s==="map"||o===pe.tagName&&s==="seq"||!s)return Hf(t,e,n,i,o);let a=e.schema.tags.find(d=>d.tag===o&&d.collection===s);if(!a){let d=e.schema.knownTags[o];if(d&&d.collection===s)e.schema.tags.push(Object.assign({},d,{default:!1})),a=d;else return d?.collection?i(r,"BAD_COLLECTION_TYPE",`${d.tag} used for ${s} collection, but expects ${d.collection}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Hf(t,e,n,i,o)}let l=Hf(t,e,n,i,o,a),c=a.resolve?.(l,d=>i(r,"TAG_RESOLVE_FAILED",d),e.options)??l,u=X(c)?c:new M(c);return u.range=l.range,u.tag=o,a?.format&&(u.format=a.format),u}function qf(t,e,n){let r=t.offset,i=ZS(t,e,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};let o=i.mode===">"?M.BLOCK_FOLDED:M.BLOCK_LITERAL,s=t.source?JS(t.source):[],a=s.length;for(let p=s.length-1;p>=0;--p){let g=s[p][1];if(g===""||g==="\r")a=p;else break}if(a===0){let p=i.chomp==="+"&&s.length>0?`
`.repeat(Math.max(1,s.length-1)):"",g=r+i.length;return t.source&&(g+=t.source.length),{value:p,type:o,comment:i.comment,range:[r,g,g]}}let l=t.indent+i.indent,c=t.offset+i.length,u=0;for(let p=0;p<a;++p){let[g,v]=s[p];if(v===""||v==="\r")i.indent===0&&g.length>l&&(l=g.length);else{g.length<l&&n(c+g.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=g.length),u=p;break}c+=g.length+v.length+1}for(let p=s.length-1;p>=a;--p)s[p][0].length>l&&(a=p+1);let d="",f="",h=!1;for(let p=0;p<u;++p)d+=s[p][0].slice(l)+`
`;for(let p=u;p<a;++p){let[g,v]=s[p];c+=g.length+v.length+1;let w=v[v.length-1]==="\r";if(w&&(v=v.slice(0,-1)),v&&g.length<l){let D=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(c-v.length-(w?2:1),"BAD_INDENT",D),g=""}o===M.BLOCK_LITERAL?(d+=f+g.slice(l)+v,f=`
`):g.length>l||v[0]==="	"?(f===" "?f=`
`:!h&&f===`
`&&(f=`

`),d+=f+g.slice(l)+v,f=`
`,h=!0):v===""?f===`
`?d+=`
`:f=`
`:(d+=f+v,f=" ",h=!1)}switch(i.chomp){case"-":break;case"+":for(let p=a;p<s.length;++p)d+=`
`+s[p][0].slice(l);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let m=r+i.length+t.source.length;return{value:d,type:o,comment:i.comment,range:[r,m,m]}}function ZS({offset:t,props:e},n,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=e[0],o=i[0],s=0,a="",l=-1;for(let f=1;f<i.length;++f){let h=i[f];if(!a&&(h==="-"||h==="+"))a=h;else{let m=Number(h);!s&&m?s=m:l===-1&&(l=t+f)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let c=!1,u="",d=i.length;for(let f=1;f<e.length;++f){let h=e[f];switch(h.type){case"space":c=!0;case"newline":d+=h.source.length;break;case"comment":n&&!c&&r(h,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=h.source.length,u=h.source.substring(1);break;case"error":r(h,"UNEXPECTED_TOKEN",h.message),d+=h.source.length;break;default:{let m=`Unexpected token in block scalar header: ${h.type}`;r(h,"UNEXPECTED_TOKEN",m);let p=h.source;p&&typeof p=="string"&&(d+=p.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:d}}function JS(t){let e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),o=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}function zf(t,e,n){let{offset:r,type:i,source:o,end:s}=t,a,l,c=(f,h,m)=>n(r+f,h,m);switch(i){case"scalar":a=M.PLAIN,l=XS(o,c);break;case"single-quoted-scalar":a=M.QUOTE_SINGLE,l=eM(o,c);break;case"double-quoted-scalar":a=M.QUOTE_DOUBLE,l=tM(o,c);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}let u=r+o.length,d=Yt(s,u,e,n);return{value:l,type:a,comment:d.comment,range:[r,u,d.offset]}}function XS(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Ov(t)}function eM(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Ov(t.slice(1,-1)).replace(/''/g,"'")}function Ov(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let i=r[1],o=" ",s=e.lastIndex;for(n.lastIndex=s;r=n.exec(t);)r[1]===""?o===`
`?i+=o:o=`
`:(i+=o+r[1],o=" "),s=n.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=s,r=a.exec(t),i+o+(r?.[1]??"")}function tM(t,e){let n="";for(let r=1;r<t.length-1;++r){let i=t[r];if(!(i==="\r"&&t[r+1]===`
`))if(i===`
`){let{fold:o,offset:s}=nM(t,r);n+=o,r=s}else if(i==="\\"){let o=t[++r],s=rM[o];if(s)n+=s;else if(o===`
`)for(o=t[r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="\r"&&t[r+1]===`
`)for(o=t[++r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="x"||o==="u"||o==="U"){let a={x:2,u:4,U:8}[o];n+=iM(t,r+1,a,e),r+=a}else{let a=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(i===" "||i==="	"){let o=r,s=t[r+1];for(;s===" "||s==="	";)s=t[++r+1];s!==`
`&&!(s==="\r"&&t[r+2]===`
`)&&(n+=r>o?t.slice(o,r+1):i)}else n+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function nM(t,e){let n="",r=t[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&t[e+2]!==`
`);)r===`
`&&(n+=`
`),e+=1,r=t[e+1];return n||(n=" "),{fold:n,offset:e}}var rM={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function iM(t,e,n,r){let i=t.substr(e,n),s=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){let a=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}function Gf(t,e,n,r){let{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?qf(e,t.options.strict,r):zf(e,t.options.strict,r),l=n?t.directives.tagName(n.source,d=>r(n,"TAG_RESOLVE_FAILED",d)):null,c=n&&l?oM(t.schema,i,l,n,r):e.type==="scalar"?sM(t,i,e,r):t.schema[dt],u;try{let d=c.resolve(i,f=>r(n??e,"TAG_RESOLVE_FAILED",f),t.options);u=U(d)?d:new M(d)}catch(d){let f=d instanceof Error?d.message:String(d);r(n??e,"TAG_RESOLVE_FAILED",f),u=new M(i)}return u.range=a,u.source=i,o&&(u.type=o),l&&(u.tag=l),c.format&&(u.format=c.format),s&&(u.comment=s),u}function oM(t,e,n,r,i){if(n==="!")return t[dt];let o=[];for(let a of t.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)o.push(a);else return a;for(let a of o)if(a.test?.test(e))return a;let s=t.knownTags[n];return s&&!s.collection?(t.tags.push(Object.assign({},s,{default:!1,test:void 0})),s):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[dt])}function sM({directives:t,schema:e},n,r,i){let o=e.tags.find(s=>s.default&&s.test?.test(n))||e[dt];if(e.compat){let s=e.compat.find(a=>a.default&&a.test?.test(n))??e[dt];if(o.tag!==s.tag){let a=t.tagString(o.tag),l=t.tagString(s.tag),c=`Value may be parsed as either ${a} or ${l}`;i(r,"TAG_RESOLVE_FAILED",c,!0)}}return o}function kv(t,e,n){if(e){n===null&&(n=e.length);for(let r=n-1;r>=0;--r){let i=e[r];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++r];i?.type==="space";)t+=i.source.length,i=e[++r];break}}return t}var aM={composeNode:Wf,composeEmptyNode:xl};function Wf(t,e,n,r){let{spaceBefore:i,comment:o,anchor:s,tag:a}=n,l,c=!0;switch(e.type){case"alias":l=lM(t,e,r),(s||a)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=Gf(t,e,a,r),s&&(l.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=xv(aM,t,e,a,r),s&&(l.anchor=s.source.substring(1));break;default:{let u=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",u),l=xl(t,e.offset,void 0,null,n,r),c=!1}}return s&&l.anchor===""&&r(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(l.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?l.comment=o:l.commentBefore=o),t.options.keepSourceTokens&&c&&(l.srcToken=e),l}function xl(t,e,n,r,{spaceBefore:i,comment:o,anchor:s,tag:a,end:l},c){let u={type:"scalar",offset:kv(e,n,r),indent:-1,source:""},d=Gf(t,u,a,c);return s&&(d.anchor=s.source.substring(1),d.anchor===""&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(d.spaceBefore=!0),o&&(d.comment=o,d.range[2]=l),d}function lM({options:t},{offset:e,source:n,end:r},i){let o=new fn(n.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),o.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let s=e+n.length,a=Yt(r,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}function Rv(t,e,{offset:n,start:r,value:i,end:o},s){let a=Object.assign({_directives:e},t),l=new Gt(void 0,a),c={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=Wt(r,{indicator:"doc-start",next:i??o?.[0],offset:n,onError:s,startOnNewline:!0});u.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?Wf(c,i,u,s):xl(c,u.end,r,null,u,s);let d=l.contents.range[2],f=Yt(o,d,!1,s);return f.comment&&(l.comment=f.comment),l.range=[n,d,f.offset],l}function qo(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function Pv(t){let e="",n=!1,r=!1;for(let i=0;i<t.length;++i){let o=t[i];switch(o[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(o.substring(1)||" "),n=!0,r=!1;break;case"%":t[i+1]?.[0]!=="#"&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}var zo=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,o)=>{let s=qo(n);o?this.warnings.push(new Uo(s,r,i)):this.errors.push(new Ot(s,r,i))},this.directives=new pi({version:e.version||"1.2"}),this.options=e}decorate(e,n){let{comment:r,afterEmptyLine:i}=Pv(this.prelude);if(r){let o=e.contents;if(n)e.comment=e.comment?`${e.comment}
${r}`:r;else if(i||e.directives.docStart||!o)e.commentBefore=r;else if(re(o)&&!o.flow&&o.items.length>0){let s=o.items[0];K(s)&&(s=s.key);let a=s.commentBefore;s.commentBefore=a?`${r}
${a}`:r}else{let s=o.commentBefore;o.commentBefore=s?`${r}
${s}`:r}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Pv(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,r=-1){for(let i of e)yield*y(this.next(i));yield*y(this.end(n,r))}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,r,i)=>{let o=qo(e);o[0]+=n,this.onError(o,"BAD_DIRECTIVE",r,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let n=Rv(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new Ot(qo(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){let r="Unexpected doc-end without preceding document";this.errors.push(new Ot(qo(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;let n=Yt(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){let r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Ot(qo(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let r=Object.assign({_directives:this.directives},this.options),i=new Gt(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}};var Yf=Symbol("break visit"),cM=Symbol("skip children"),Fv=Symbol("remove item");function vr(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),Lv(Object.freeze([]),t,e)}vr.BREAK=Yf;vr.SKIP=cM;vr.REMOVE=Fv;vr.itemAtPath=(t,e)=>{let n=t;for(let[r,i]of e){let o=n?.[r];if(o&&"items"in o)n=o.items[i];else return}return n};vr.parentCollection=(t,e)=>{let n=vr.itemAtPath(t,e.slice(0,-1)),r=e[e.length-1][0],i=n?.[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Lv(t,e,n){let r=n(e,t);if(typeof r=="symbol")return r;for(let i of["key","value"]){let o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){let a=Lv(Object.freeze(t.concat([[i,s]])),o.items[s],n);if(typeof a=="number")s=a-1;else{if(a===Yf)return Yf;a===Fv&&(o.items.splice(s,1),s-=1)}}typeof r=="function"&&i==="key"&&(r=r(e,t))}}return typeof r=="function"?r(e,t):r}var Kf="\uFEFF",Qf="",Zf="",Ol="";function Vv(t){switch(t){case Kf:return"byte-order-mark";case Qf:return"doc-mode";case Zf:return"flow-error-end";case Ol:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function ht(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var $v="0123456789ABCDEFabcdef".split(""),dM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),Jf=",[]{}".split(""),fM=` ,[]{}
\r	`.split(""),Xf=t=>!t||fM.includes(t),Go=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*y(this.parseNext(r))}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+e];if(n==="\r"){let i=this.buffer[r+e+1];if(i===`
`||!i&&!this.atEnd)return e+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?e+r:-1}if(n==="-"||n==="."){let r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&ht(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*y(this.parseStream());case"line-start":return yield*y(this.parseLineStart());case"block-start":return yield*y(this.parseBlockStart());case"doc":return yield*y(this.parseDocument());case"flow":return yield*y(this.parseFlowCollection());case"quoted-scalar":return yield*y(this.parseQuotedScalar());case"block-scalar":return yield*y(this.parseBlockScalar());case"plain-scalar":return yield*y(this.parsePlainScalar())}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Kf&&(yield*y(this.pushCount(1)),e=e.substring(1)),e[0]==="%"){let n=e.length,r=e.indexOf("#");if(r!==-1){let o=e[r-1];(o===" "||o==="	")&&(n=r-1)}for(;;){let o=e[n-1];if(o===" "||o==="	")n-=1;else break}let i=(yield*y(this.pushCount(n)))+(yield*y(this.pushSpaces(!0)));return yield*y(this.pushCount(e.length-i)),this.pushNewline(),"stream"}if(this.atLineEnd()){let n=yield*y(this.pushSpaces(!0));return yield*y(this.pushCount(e.length-n)),yield*y(this.pushNewline()),"stream"}return yield Qf,yield*y(this.parseLineStart())}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let n=this.peek(3);if(n==="---"&&ht(this.charAt(3)))return yield*y(this.pushCount(3)),this.indentValue=0,this.indentNext=0,"doc";if(n==="..."&&ht(this.charAt(3)))return yield*y(this.pushCount(3)),"stream"}return this.indentValue=yield*y(this.pushSpaces(!1)),this.indentNext>this.indentValue&&!ht(this.charAt(1))&&(this.indentNext=this.indentValue),yield*y(this.parseBlockStart())}*parseBlockStart(){let[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&ht(n)){let r=(yield*y(this.pushCount(1)))+(yield*y(this.pushSpaces(!0)));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*y(this.parseBlockStart())}return"doc"}*parseDocument(){yield*y(this.pushSpaces(!0));let e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*y(this.pushIndicators());switch(e[n]){case"#":yield*y(this.pushCount(e.length-n));case void 0:return yield*y(this.pushNewline()),yield*y(this.parseLineStart());case"{":case"[":return yield*y(this.pushCount(1)),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*y(this.pushCount(1)),"doc";case"*":return yield*y(this.pushUntil(Xf)),"doc";case'"':case"'":return yield*y(this.parseQuotedScalar());case"|":case">":return n+=yield*y(this.parseBlockScalarHeader()),n+=yield*y(this.pushSpaces(!0)),yield*y(this.pushCount(e.length-n)),yield*y(this.pushNewline()),yield*y(this.parseBlockScalar());default:return yield*y(this.parsePlainScalar())}}*parseFlowCollection(){let e,n,r=-1;do e=yield*y(this.pushNewline()),e>0?(n=yield*y(this.pushSpaces(!1)),this.indentValue=r=n):n=0,n+=yield*y(this.pushSpaces(!0));while(e+n>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&ht(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Zf,yield*y(this.parseLineStart());let o=0;for(;i[o]===",";)o+=yield*y(this.pushCount(1)),o+=yield*y(this.pushSpaces(!0)),this.flowKey=!1;switch(o+=yield*y(this.pushIndicators()),i[o]){case void 0:return"flow";case"#":return yield*y(this.pushCount(i.length-o)),"flow";case"{":case"[":return yield*y(this.pushCount(1)),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*y(this.pushCount(1)),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*y(this.pushUntil(Xf)),"flow";case'"':case"'":return this.flowKey=!0,yield*y(this.parseQuotedScalar());case":":{let s=this.charAt(1);if(this.flowKey||ht(s)||s===",")return this.flowKey=!1,yield*y(this.pushCount(1)),yield*y(this.pushSpaces(!0)),"flow"}default:return this.flowKey=!1,yield*y(this.parsePlainScalar())}}*parseQuotedScalar(){let e=this.charAt(0),n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let o=0;for(;this.buffer[n-1-o]==="\\";)o+=1;if(o%2===0)break;n=this.buffer.indexOf('"',n+1)}let r=this.buffer.substring(0,n),i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let o=this.continueScalar(i+1);if(o===-1)break;i=r.indexOf(`
`,o)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*y(this.pushToIndex(n+1,!1)),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*y(this.pushUntil(n=>ht(n)||n==="#"))}*parseBlockScalar(){let e=this.pos-1,n=0,r;e:for(let i=this.pos;r=this.buffer[i];++i)switch(r){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{let o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{let i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);let s=i;for(;o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>s)e=i;else break}while(!0);return yield Ol,yield*y(this.pushToIndex(e+1,!0)),yield*y(this.parseLineStart())}*parsePlainScalar(){let e=this.flowLevel>0,n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){let o=this.buffer[r+1];if(ht(o)||e&&o===",")break;n=r}else if(ht(i)){let o=this.buffer[r+1];if(i==="\r"&&(o===`
`?(r+=1,i=`
`,o=this.buffer[r+1]):n=r),o==="#"||e&&Jf.includes(o))break;if(i===`
`){let s=this.continueScalar(r+1);if(s===-1)break;r=Math.max(r,s-2)}}else{if(e&&Jf.includes(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Ol,yield*y(this.pushToIndex(n+1,!0)),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){let r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*y(this.pushTag()))+(yield*y(this.pushSpaces(!0)))+(yield*y(this.pushIndicators()));case"&":return(yield*y(this.pushUntil(Xf)))+(yield*y(this.pushSpaces(!0)))+(yield*y(this.pushIndicators()));case"-":case"?":case":":{let e=this.flowLevel>0,n=this.charAt(1);if(ht(n)||e&&Jf.includes(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*y(this.pushCount(1)))+(yield*y(this.pushSpaces(!0)))+(yield*y(this.pushIndicators()))}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!ht(n)&&n!==">";)n=this.buffer[++e];return yield*y(this.pushToIndex(n===">"?e+1:e,!1))}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(dM.includes(n))n=this.buffer[++e];else if(n==="%"&&$v.includes(this.buffer[e+1])&&$v.includes(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*y(this.pushToIndex(e,!1))}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*y(this.pushCount(1)):e==="\r"&&this.charAt(1)===`
`?yield*y(this.pushCount(2)):0}*pushSpaces(e){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||e&&r==="	");let i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(e){let n=this.pos,r=this.buffer[n];for(;!e(r);)r=this.buffer[++n];return yield*y(this.pushToIndex(n,!1))}};var Wo=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,r=this.lineStarts.length;for(;n<r;){let o=n+r>>1;this.lineStarts[o]<e?n=o+1:r=o}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};let i=this.lineStarts[n-1];return{line:n,col:e-i+1}}}};function kt(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function jv(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Uv(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function kl(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function bi(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function Bv(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!kt(e.start,"explicit-key-ind")&&!kt(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,Uv(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var Yo=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Go,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let r of this.lexer.lex(e,n))yield*y(this.next(r));n||(yield*y(this.end()))}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*y(this.step()),this.offset+=e.length;return}let n=Vv(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*y(this.step()),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let r=`Not a YAML token: ${e}`;yield*y(this.pop({type:"error",offset:this.offset,message:r,source:e})),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*y(this.pop())}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*y(this.pop());this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*y(this.stream());switch(e.type){case"document":return yield*y(this.document(e));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*y(this.scalar(e));case"block-scalar":return yield*y(this.blockScalar(e));case"block-map":return yield*y(this.blockMap(e));case"block-seq":return yield*y(this.blockSequence(e));case"flow-collection":return yield*y(this.flowCollection(e));case"doc-end":return yield*y(this.documentEnd(e))}yield*y(this.pop())}peek(e){return this.stack[this.stack.length-e]}*pop(e){let n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{let r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&Bv(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{let i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!kt(i.start,"explicit-key-ind");return}break}case"block-seq":{let i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{let i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*y(this.pop()),yield*y(this.pop(n))}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){let i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&jv(i.start)===-1&&(n.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*y(this.lineEnd(e));switch(this.type){case"doc-start":{jv(e.start)!==-1?(yield*y(this.pop()),yield*y(this.step())):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let n=kl(this.peek(2)),r=bi(n),i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];let o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*y(this.lineEnd(e))}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*y(this.pop());break;default:yield*y(this.pop()),yield*y(this.step())}}*blockMap(e){let n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let r=!this.onKeyLine&&this.indent===e.indent&&n.sep&&this.type!=="seq-item-ind",i=[];if(r&&n.sep&&!n.value){let o=[];for(let s=0;s<n.sep.length;++s){let a=n.sep[s];switch(a.type){case"newline":o.push(s);break;case"space":break;case"comment":a.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!kt(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):r||n.value?(i.push(this.sourceToken),e.items.push({start:i})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(kt(n.start,"explicit-key-ind"))if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(kt(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(Uv(n.key)&&!kt(n.sep,"newline")){let o=bi(n.start),s=n.key,a=n.sep;a.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:s,sep:a}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(kt(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{let o=bi(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):kt(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);r||n.value?(e.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){r&&o.type!=="block-seq"&&kt(n.start,"explicit-key-ind")&&e.items.push({start:i}),this.stack.push(o);return}}}}yield*y(this.pop()),yield*y(this.step())}*blockSequence(e){let n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){let r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||kt(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){let r=this.startBlockValue(e);if(r){this.stack.push(r);return}}yield*y(this.pop()),yield*y(this.step())}*flowCollection(e){let n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*y(this.pop()),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):(yield*y(this.pop()),yield*y(this.step()))}else{let r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*y(this.pop()),yield*y(this.step());else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){let i=kl(r),o=bi(i);Bv(e);let s=e.end.splice(1,e.end.length);s.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*y(this.lineEnd(e))}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let n=kl(e),r=bi(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r}]}}case"map-value-ind":{this.onKeyLine=!0;let n=kl(e),r=bi(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*y(this.pop())))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*y(this.pop()),yield*y(this.step());break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*y(this.pop()))}}};function hM(t){let e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Wo||null,prettyErrors:e}}function eh(t,e={}){let{lineCounter:n,prettyErrors:r}=hM(e),i=new Yo(n?.addNewLine),o=new zo(e),s=null;for(let a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Ot(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(s.errors.forEach(jf(t,n)),s.warnings.forEach(jf(t,n))),s}var Qv=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(z(Gr),z($t))},e.\u0275dir=Je({type:e});let t=e;return t})(),mM=(()=>{let e=class e extends Qv{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Xi(e)))(o||e)}})(),e.\u0275dir=Je({type:e,features:[an]});let t=e;return t})(),nh=new $("");var gM={provide:nh,useExisting:nr(()=>Fn),multi:!0};function yM(){let t=cn()?cn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var vM=new $(""),Fn=(()=>{let e=class e extends Qv{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!yM())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(z(Gr),z($t),z(vM,8))},e.\u0275dir=Je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&ne("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[no([gM]),an]});let t=e;return t})();var rh=new $(""),ih=new $("");function Zv(t){return t!=null}function Jv(t){return cr(t)?ve(t):t}function Xv(t){let e={};return t.forEach(n=>{e=n!=null?_(_({},e),n):e}),Object.keys(e).length===0?null:e}function ew(t,e){return e.map(n=>n(t))}function wM(t){return!t.validate}function tw(t){return t.map(e=>wM(e)?e:n=>e.validate(n))}function bM(t){if(!t)return null;let e=t.filter(Zv);return e.length==0?null:function(n){return Xv(ew(n,e))}}function oh(t){return t!=null?bM(tw(t)):null}function CM(t){if(!t)return null;let e=t.filter(Zv);return e.length==0?null:function(n){let r=ew(n,e).map(Jv);return hc(r).pipe(Y(Xv))}}function sh(t){return t!=null?CM(tw(t)):null}function Hv(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function nw(t){return t._rawValidators}function rw(t){return t._rawAsyncValidators}function th(t){return t?Array.isArray(t)?t:[t]:[]}function Pl(t,e){return Array.isArray(t)?t.includes(e):t===e}function qv(t,e){let n=th(e);return th(t).forEach(i=>{Pl(n,i)||n.push(i)}),n}function zv(t,e){return th(e).filter(n=>!Pl(t,n))}var Fl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},_i=class extends Fl{get formDirective(){return null}get path(){return null}},wr=class extends Fl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ll=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},_M={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},F2=B(_({},_M),{"[class.ng-submitted]":"isSubmitted"}),Di=(()=>{let e=class e extends Ll{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(wr,2))},e.\u0275dir=Je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&va("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[an]});let t=e;return t})(),iw=(()=>{let e=class e extends Ll{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(_i,10))},e.\u0275dir=Je({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&va("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[an]});let t=e;return t})();var Ko="VALID",Rl="INVALID",Ci="PENDING",Qo="DISABLED";function ow(t){return(Bl(t)?t.validators:t)||null}function DM(t){return Array.isArray(t)?oh(t):t||null}function sw(t,e){return(Bl(e)?e.asyncValidators:t)||null}function EM(t){return Array.isArray(t)?sh(t):t||null}function Bl(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function IM(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new x(1e3,"");if(!r[n])throw new x(1001,"")}function SM(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new x(1002,"")})}var Vl=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ko}get invalid(){return this.status===Rl}get pending(){return this.status==Ci}get disabled(){return this.status===Qo}get enabled(){return this.status!==Qo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zv(e,this._rawAsyncValidators))}hasValidator(e){return Pl(this._rawValidators,e)}hasAsyncValidator(e){return Pl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ci,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Qo,this.errors=null,this._forEachChild(r=>{r.disable(B(_({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(B(_({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ko,this._forEachChild(r=>{r.enable(B(_({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(B(_({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ko||this.status===Ci)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qo:Ko}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ci,this._hasOwnPendingAsyncValidator=!0;let n=Jv(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?Qo:this.errors?Rl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ci)?Ci:this._anyControlsHaveStatus(Rl)?Rl:Ko}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=EM(this._rawAsyncValidators)}},$l=class extends Vl{constructor(e,n,r){super(ow(n),sw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){SM(this,!0,e),Object.keys(e).forEach(r=>{IM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Jo=new $("CallSetDisabledState",{providedIn:"root",factory:()=>Ul}),Ul="always";function MM(t,e){return[...e.path,t]}function ah(t,e,n=Ul){aw(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),AM(t,e),OM(t,e),xM(t,e),NM(t,e)}function Gv(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),TM(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function jl(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function NM(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function aw(t,e){let n=nw(t);e.validator!==null?t.setValidators(Hv(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=rw(t);e.asyncValidator!==null?t.setAsyncValidators(Hv(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();jl(e._rawValidators,i),jl(e._rawAsyncValidators,i)}function TM(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=nw(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=rw(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return jl(e._rawValidators,r),jl(e._rawAsyncValidators,r),n}function AM(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&lw(t,e)})}function xM(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&lw(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function lw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function OM(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function kM(t,e){t==null,aw(t,e)}function cw(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function RM(t){return Object.getPrototypeOf(t.constructor)===mM}function PM(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function uw(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Fn?n=o:RM(o)?r=o:i=o}),i||r||n||null}var FM={provide:_i,useExisting:nr(()=>lh)},Zo=Promise.resolve(),lh=(()=>{let e=class e extends _i{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Te,this.form=new $l({},oh(r),sh(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Zo.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),ah(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Zo.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Zo.then(()=>{let i=this._findContainer(r.path),o=new $l({});kM(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Zo.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Zo.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,PM(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(z(rh,10),z(ih,10),z(Jo,8))},e.\u0275dir=Je({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&ne("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[Le.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[no([FM]),an]});let t=e;return t})();function Wv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Yv(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Xo=class extends Vl{constructor(e=null,n,r){super(ow(n),sw(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Yv(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Wv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Wv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Yv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var LM={provide:wr,useExisting:nr(()=>ch)},Kv=Promise.resolve(),ch=(()=>{let e=class e extends wr{constructor(r,i,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Xo,this._registered=!1,this.name="",this.update=new Te,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=uw(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),cw(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ah(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Kv.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Ca(i);Kv.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?MM(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(z(_i,9),z(rh,10),z(ih,10),z(nh,10),z(sr,8),z(Jo,8))},e.\u0275dir=Je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Le.None,"disabled","isDisabled"],model:[Le.None,"ngModel","model"],options:[Le.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[no([LM]),an,ir]});let t=e;return t})(),dw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Je({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var fw=new $(""),VM={provide:wr,useExisting:nr(()=>es)},es=(()=>{let e=class e extends wr{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new Te,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uw(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&Gv(i,this,!1),ah(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}cw(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Gv(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(z(rh,10),z(ih,10),z(nh,10),z(fw,8),z(Jo,8))},e.\u0275dir=Je({type:e,selectors:[["","formControl",""]],inputs:{form:[Le.None,"formControl","form"],isDisabled:[Le.None,"disabled","isDisabled"],model:[Le.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[no([VM]),an,ir]});let t=e;return t})();var hw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xn({type:e}),e.\u0275inj=tr({});let t=e;return t})();var Ei=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Jo,useValue:r.callSetDisabledState??Ul}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xn({type:e}),e.\u0275inj=tr({imports:[hw]});let t=e;return t})(),Hl=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:fw,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Jo,useValue:r.callSetDisabledState??Ul}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xn({type:e}),e.\u0275inj=tr({imports:[hw]});let t=e;return t})();function $M(t,e){t&1&&(I(0,"div",8),E(1,"Edit the radio's configuration as a Yaml file."),S())}function jM(t,e){if(t&1&&(I(0,"div",9),E(1),S()),t&2){let n=O(2);ue(),$e(" ",n.yamlError," ")}}function BM(t,e){if(t&1){let n=qe();I(0,"div",1)(1,"div",2)(2,"h2"),E(3,"Yaml Editor"),S(),ge(4,$M,2,0,"div",3)(5,jM,2,1),I(6,"div",4),Oe(7,"textarea",5),S(),I(8,"div",6)(9,"button",7),ne("click",function(){le(n);let i=O();return ce(i.cancel())}),E(10,"Cancel"),S(),I(11,"button",7),ne("click",function(){le(n);let i=O();return ce(i.save())}),E(12,"Save"),S()()()()}if(t&2){let n=O();ue(4),Se(4,n.yamlError?5:4),ue(3),ln("formControl",n.yamlControl)}}var pw=(()=>{let e=class e{constructor(r){this.shown=!1,this.yamlControl=new Xo("Uninitialized"),this.configSession=r.configSession}ngOnInit(){this.configSession.deviceTaskState$.subscribe(r=>{r=="yaml-edit"?(this.yamlControl.setValue(this.configSession.yamlText.getValue()),this.shown=!0):this.shown=!1}),this.configSession.yamlError$.subscribe(r=>{this.yamlError=r})}save(){this.yamlControl.value&&this.configSession.saveYaml(this.yamlControl.value)}cancel(){this.configSession.cancelYamlEdit()}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["yaml-sheet"]],standalone:!0,features:[je],decls:1,vars:1,consts:[["class","veil"],[1,"veil"],[1,"modal"],["class","info"],[1,"contents"],[3,"formControl"],[1,"controls"],[3,"click"],[1,"info"],[1,"error"]],template:function(i,o){i&1&&ge(0,BM,13,2,"div",0),i&2&&Se(0,o.shown?0:-1)},dependencies:[Ei,Fn,Di,Hl,es],styles:[".veil[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000040}.modal[_ngcontent-%COMP%]{position:fixed;top:10%;left:0%;width:100%;height:90%;background-color:#fff;padding:20px;border-radius:5px;display:flex;flex-direction:column;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{margin-top:10px}.contents[_ngcontent-%COMP%]{width:600px;flex:1}.contents[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100%;width:100%;box-sizing:border-box}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:1.5rem}.info[_ngcontent-%COMP%]{max-width:600px;font-size:12px;padding:0 2em .5em;box-sizing:border-box}.error[_ngcontent-%COMP%]{width:600px;font-size:12px;padding:.5em 2em;margin:0 0 .5em;box-sizing:border-box;background-color:#ffb6c1}"]});let t=e;return t})();function UM(t,e){var n=t.split(`
`),r=0;for(let i=0;i<n.length;i++){if(r+n[i].length+1>=e)return{line:i+1,column:e-r+1};r+=n[i].length+1}}var ee=class extends Error{constructor(e,n){super(e),this.msg=e,this.location=n}toUserMessage(e){let n=UM(e,this.location);return n?`${this.msg} (at line ${n.line}, column ${n.column})`:`${this.msg} (at ${this.location})`}};var HM=[{name:"HX890",individualMmsiNamesAddress:17664,individualMmsiNumbersAddress:16896,individualMmsiNum:100,groupMmsiNamesAddress:20736,groupMmsiNumbersAddress:20480,groupMmsiNum:20},{name:"HX870",individualMmsiNamesAddress:14128,individualMmsiNumbersAddress:13568,individualMmsiNum:100,groupMmsiNamesAddress:16e3,groupMmsiNumbersAddress:15872,groupMmsiNum:20}],ql=class{constructor(e){let n=HM.find(r=>r.name==e);if(!n)throw new Error(`Unsupported device ${e}`);this.deviceConfig=n,this.individualMmsiNamesSize=Et*this.deviceConfig.individualMmsiNum,this.individualMmsiNumbersSize=It(this.deviceConfig.individualMmsiNum),this.groupMmsiNamesSize=Et*this.deviceConfig.groupMmsiNum,this.groupMmsiNumbersSize=It(this.deviceConfig.groupMmsiNum)}maybeVisitYamlNode(e,n,r){return this.maybeVisitYamlNodeIndividual(e,n,r)||this.maybeVisitYamlNodeGroup(e,n,r)}maybeVisitYamlNodeIndividual(e,n,r){let i=e.get("dsc_directory");if(i&&i instanceof pe){r.mmsiDirectory||(r.mmsiDirectory=new An(this.deviceConfig.individualMmsiNum,this.deviceConfig.groupMmsiNum)),r.mmsiDirectory.individualMmsis=i.items.map(a=>{if(a instanceof de&&a.items.length==1&&a.items[0].key instanceof M&&a.items[0].value instanceof M){let l=a.items[0].key.value,c=a.items[0].value.value;if(typeof l=="string"&&typeof c=="string")return new Tn(l,c)}throw new ee("Unknown node type",a.range[0])});let o=new Uint8Array(this.individualMmsiNamesSize),s=new Uint8Array(this.individualMmsiNumbersSize);return r.mmsiDirectory.fillIndividualConfig(o,s),n.prepareWrite("individual_mmsi_names",this.deviceConfig.individualMmsiNamesAddress,o),n.prepareWrite("individual_mmsi_numbers",this.deviceConfig.individualMmsiNumbersAddress,s),!0}return!1}maybeVisitYamlNodeGroup(e,n,r){let i=e.get("group_directory");if(i&&i instanceof pe){r.mmsiDirectory||(r.mmsiDirectory=new An(this.deviceConfig.individualMmsiNum,this.deviceConfig.groupMmsiNum)),r.mmsiDirectory.groupMmsis=i.items.map(a=>{if(a instanceof de&&a.items.length==1&&a.items[0].key instanceof M&&a.items[0].value instanceof M){let l=a.items[0].key.value,c=a.items[0].value.value;if(typeof l=="string"&&typeof c=="string")return new Tn(l,c)}throw new Error(`Unknown node type at ${a.range[0]}`)});let o=new Uint8Array(this.groupMmsiNamesSize),s=new Uint8Array(this.groupMmsiNumbersSize);return r.mmsiDirectory.fillGroupConfig(o,s),n.prepareWrite("group_mmsi_names",this.deviceConfig.groupMmsiNamesAddress,o),n.prepareWrite("group_mmsi_numbers",this.deviceConfig.groupMmsiNumbersAddress,s),!0}return!1}addRangesToRead(e){if(!this.deviceConfig)return;let n=this.deviceConfig.individualMmsiNum,r=Et*n,i=It(n),o=this.deviceConfig.groupMmsiNum,s=Et*o,a=It(o);e.addRange("individual_mmsi_names",this.deviceConfig.individualMmsiNamesAddress,this.deviceConfig.individualMmsiNamesAddress+r),e.addRange("individual_mmsi_numbers",this.deviceConfig.individualMmsiNumbersAddress,this.deviceConfig.individualMmsiNumbersAddress+i),e.addRange("group_mmsi_names",this.deviceConfig.groupMmsiNamesAddress,this.deviceConfig.groupMmsiNamesAddress+s),e.addRange("group_mmsi_numbers",this.deviceConfig.groupMmsiNumbersAddress,this.deviceConfig.groupMmsiNumbersAddress+a)}updateConfig(e,n,r){let i=new An(this.deviceConfig.individualMmsiNum,this.deviceConfig.groupMmsiNum);i.initFromConfig(e.get("individual_mmsi_names"),e.get("individual_mmsi_numbers"),e.get("group_mmsi_names"),e.get("group_mmsi_numbers")),n.mmsiDirectory=i;let o=i.individualMmsis.map(c=>({[c.name]:c.number})),s=r.createNode({dsc_directory:o});s.commentBefore=` DSC directory for individual calls. Wrap MMSIs in quotes.
 Example:
 - dsc_directory:
     - Alpha: "123456789"
     - Bravo: "987654321"`,s.spaceBefore=!0,r.add(s);let a=i.groupMmsis.map(c=>({[c.name]:c.number})),l=r.createNode({group_directory:a});l.commentBefore=` DSC directory for group calls. Wrap MMSIs in quotes.
 Example:
 - group_directory:
     - Golf: "012345678"
     - Foxtrot: "098765432"`,l.spaceBefore=!0,r.add(l)}};var qM=[{name:"HX890",startAddress:50944,numRoutes:20,numWaypointsPerRoute:31,routeBytes:64},{name:"HX870",startAddress:23552,numRoutes:20,numWaypointsPerRoute:16,routeBytes:32}],zl=class{constructor(e){this.deviceModel=e,this.deviceConfig=qM.find(n=>n.name=e)}maybeVisitYamlNode(e,n,r,i){let o=e.get("routes");if(!o)return!1;if(!this.deviceConfig)throw new ee(`Routes not supported on ${this.deviceModel}`,e.range[0]);let s=this.deviceConfig;if(!(o instanceof pe))throw new ee("Unexpected routes node type",e.range[0]);let a=o.items.map(c=>YM(c,r,s.numWaypointsPerRoute)).sort((c,u)=>c.route.name.localeCompare(u.route.name)),l=new Uint8Array(s.routeBytes*s.numRoutes);l.fill(255);for(let[c,u]of a.entries())u.fillConfig(l,s.routeBytes*c,s.numWaypointsPerRoute,s.routeBytes);return n.prepareWrite("routes",s.startAddress,l),!0}addRangesToRead(e){this.deviceConfig&&e.addRange("routes",this.deviceConfig.startAddress,this.deviceConfig.startAddress+this.deviceConfig.routeBytes*this.deviceConfig.numRoutes)}updateConfig(e,n,r){if(!this.deviceConfig)return;let i=e.get("routes");if(!i)return;if(!n.waypoints)throw new Error("Waypoints must be parsed before routes.");let o=[];for(let c=0;c<this.deviceConfig.numRoutes;c++){let u=c*this.deviceConfig.routeBytes,d=Qa(i.subarray(u,u+this.deviceConfig.routeBytes),this.deviceConfig.numWaypointsPerRoute);d&&o.push(d)}if(o.length==0)return;let s=n.waypoints,a=o.map(c=>({[c.route.name]:GM(c.route.waypointIds.map(u=>zM(u,s)))})),l=r.createNode({routes:a});l.spaceBefore=!0,l.commentBefore=`
 Routes. Each route is a list of waypoints, from first to last.
 This section must come after waypoints.`,r.add(l)}};function zM(t,e){let n=e.find(r=>r.wp.id==t);return n?n.wp.name:`? (${t})`}function GM(t){return t.slice(1).concat(t.slice(0,1))}function WM(t){return t.slice(-1).concat(t.slice(0,-1))}function YM(t,e,n){if(!(t instanceof de&&t.items.length==1&&t.items[0].key instanceof M&&t.items[0].value instanceof pe))throw new ee("Unexpected route node type",t.range[0]);if(!e.waypoints)throw new ee("Waypoints must be declared before routes",t.range[0]);let r=t.items[0].key.value;if(r.length>15)throw new ee(`Route name too long "${r}"`,t.range[0]);let i=t.items[0].value;if(i.items.length==0)throw new ee(`No waypoints in route "${r}"`,t.range[0]);if(i.items.length>n)throw new ee(`Too many waypoints in route "${r}" (found ${i.items.length}, max is ${n})`,t.range[0]);let o=[];for(let s of i.items){if(!(s instanceof M&&typeof s.value=="string"))throw new ee("Unexpected route waypoint type",s.range[0]);let a=s.value,l=e.waypoints.filter(c=>c.wp.name==a);if(!l||l.length==0)throw new ee(`Waypoint ${a} not found`,s.range[0]);if(l.length>1)throw new ee(`Multiple waypoints named ${a}`,s.range[0]);o.push(l[0].wp.id)}return new Nn({name:r,waypointIds:WM(o)})}var KM=[{name:"HX890",waypointsStartAddress:55040,waypointsNumber:250},{name:"HX870",waypointsStartAddress:17152,waypointsNumber:200}],Gl=class{constructor(e){this.deviceModel=e,this.deviceConfig=KM.find(n=>n.name==e)}maybeVisitYamlNode(e,n,r,i){let o=e.get("waypoints");if(!o)return!1;if(!this.deviceConfig)throw new ee(`Waypoints not supported on ${this.deviceModel}`,e.range[0]);if(!(o instanceof pe))throw new ee("Unexpected waypoints node type",e.range[0]);let s=o.items.map(QM);ZM(s,i.waypoints);let a=new Uint8Array(Mn*this.deviceConfig.waypointsNumber);return a.fill(255),vf(s,this.deviceConfig.waypointsStartAddress,a),n.prepareWrite("waypoints",this.deviceConfig.waypointsStartAddress,a),r.waypoints=s,!0}addRangesToRead(e){this.deviceConfig&&e.addRange("waypoints",this.deviceConfig.waypointsStartAddress,this.deviceConfig.waypointsStartAddress+Mn*this.deviceConfig.waypointsNumber)}updateConfig(e,n,r){let i=e.get("waypoints");if(!i||!this.deviceConfig)return;let o=[];for(var s=0;s<this.deviceConfig.waypointsNumber;s+=1){let c=s*32,u=Ya(i.subarray(c,c+32),this.deviceConfig.waypointsStartAddress+c);u&&o.push(u)}n.waypoints=o;let a=o.map(c=>({[c.wp.name]:`${c.getLat(!0)} ${c.getLon(!0)}`})),l=r.createNode({waypoints:a});l.commentBefore=`
 Waypoints. Example:
 - waypoints
     # Coordinates in degrees and decimal minutes
     - Marina: 33N57.8490 118W27.8290
     # Coordinates in decimal degrees
     - Marina: 33.84905 -118.27829`,l.spaceBefore=!0,r.add(l)}};function QM(t){if(!(t instanceof de&&t.items.length==1&&t.items[0].key instanceof M&&t.items[0].value instanceof M))throw new ee("Unexpected waypoint node type",t.range[0]);let e=t.items[0].key.value,n=t.items[0].value.value;if(typeof e!="string")throw new ee(`Unexpected waypoint name type ${typeof n}`,t.range[0]);if(e.length>15)throw new ee(`Waypoint name too long "${e}"`,t.range[0]);if(typeof n!="string")throw new ee(`Unexpected coordinate type ${typeof n}`,t.range[0]);let r=n.split(" ").map(s=>s.trim());if(r.length!=2)throw new ee(`Expected two coordinates, got ${r.length}`,t.range[0]);let i=si(r[0]);if(!i)throw new ee(`Unable to parse latitude ${i}`,t.range[0]);let o=ai(r[1]);if(!o)throw new ee(`Unable to parse latitude ${o}`,t.range[0]);return new Sn({id:-1,name:e,lat_deg:i.lat_deg,lat_dir:i.lat_dir,lat_min:i.lat_min,lon_deg:o.lon_deg,lon_dir:o.lon_dir,lon_min:o.lon_min})}function ZM(t,e){let n=new Set;for(let r of t){let i=e?.find(o=>o.wp.name==r.wp.name);i&&!n.has(i.wp.id)?(r.wp.id=i.wp.id,n.add(r.wp.id)):r.wp.id=-1}for(let r of t)if(r.wp.id==-1){let i;for(i=1;i<255&&n.has(i);i+=1);r.wp.id=i,n.add(i)}}var dh=[ql,Gl,zl];var Wl=class{constructor(e){this.configProtocol=e,this.data=new Map}prepareWrite(e,n,r){this.data.set(e,[n,r])}write(e){return A(this,null,function*(){let n=0;this.data.forEach(([i,o])=>n+=o.length);let r=0;for(let[i,[o,s]]of this.data)yield this.configProtocol.writeConfigMemory(s,o,a=>{e((r+a)/n)}),r+=s.length})}};var Yl=class{constructor(e){this._configProtocol=e,this.config=new he({}),this.yamlText=new he(""),this._deviceTaskState=new he("idle"),this.deviceTaskState$=this._deviceTaskState.asObservable(),this._progress=new he(0),this.progress$=this._progress.asObservable(),this._yamlError=new he(void 0),this.yamlError$=this._yamlError.asObservable()}reset(e,n){this.config.next({}),this._deviceTaskState.next("idle"),this._configProtocol=n,this._deviceConfig=e}disconnect(){this.config.next({}),this._deviceTaskState.next("idle")}noopConfigCallback(){return()=>this.config.next(this.config.getValue())}readNavInfo(){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't read waypoints from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("nav-read"),this._progress.next(0);let e=64,n=this._deviceConfig.waypointsNumber,r=Mn*n,i=this._deviceConfig.routesNumber,o=this._deviceConfig.routeBytes*i,s=this._deviceConfig.waypointsStartAddress,a=yield this._configProtocol.readConfigMemory(s,r,m=>this._progress.next(m/(r+o))),l=[];for(var c=0;c<n;c+=1){let m=c*32,p=Ya(a.subarray(m,m+32),s+m);p&&l.push(p)}let u=this._deviceConfig.routesStartAddress,d=yield this._configProtocol.readConfigMemory(u,o,m=>this._progress.next((r+m)/(r+o))),f=[];for(var h=0;h<i;h++){let m=h*this._deviceConfig.routeBytes,p=Qa(d.subarray(m,m+this._deviceConfig.routeBytes),this._deviceConfig.numWaypointsPerRoute);p&&f.push(p)}this.config.next(B(_({},this.config.getValue()),{waypoints:l,draftWaypoints:new li(l,f,this._deviceConfig,this.noopConfigCallback())})),this._deviceTaskState.next("nav-edit")})}writeNavInfoDraft(){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="nav-edit")throw new Error(`Can't write draft from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("nav-save"),this._progress.next(0);let e=this.config.getValue().draftWaypoints;if(!e){console.log("No draft waypoints"),this._deviceTaskState.next("idle");return}let n=e?.getBinaryWaypointData(this._deviceConfig.waypointsStartAddress);if(!n)throw new Error("Error getting draft binary data");let r=e?.getBinaryRouteData();if(!r)throw new Error("Error getting route binary data");yield this._configProtocol.writeConfigMemory(n,this._deviceConfig.waypointsStartAddress,i=>this._progress.next(i/(n.length+r.length))),yield this._configProtocol.writeConfigMemory(r,this._deviceConfig.routesStartAddress,i=>this._progress.next((n.length+i)/(n.length+r.length))),this.config.next(B(_({},this.config.getValue()),{waypoints:e.waypoints,draftWaypoints:new li(e.waypoints,[],this._deviceConfig,this.noopConfigCallback())})),this._deviceTaskState.next("idle")})}cancelNavInfoDraft(){if(this._deviceTaskState.getValue()!="nav-edit")throw new Error(`Can't cancel draft from state ${this._deviceTaskState.getValue()}`);let e=this.config.getValue().waypoints;if(!e){console.log("No waypoints yet"),this._deviceTaskState.next("idle");return}this.config.next(B(_({},this.config.getValue()),{draftWaypoints:new li(e,[],this._deviceConfig,this.noopConfigCallback())})),this._deviceTaskState.next("idle")}readMmsiDirectory(){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't read MMSI directory from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("mmsi-read"),this._progress.next(0);let{individualMmsiNamesSize:e,individualMmsiNumbersSize:n,groupMmsiNamesSize:r,groupMmsiNumbersSize:i,totalSize:o}=this.getMmsiMemoryLayout(),s=yield this._configProtocol.readConfigMemory(this._deviceConfig.individualMmsiNamesAddress,e,f=>this._progress.next(f/o)),a=e,l=yield this._configProtocol.readConfigMemory(this._deviceConfig.individualMmsiNumbersAddress,n,f=>this._progress.next((a+f)/o));a+=n;let c=yield this._configProtocol.readConfigMemory(this._deviceConfig.groupMmsiNamesAddress,r,f=>this._progress.next((a+f)/o));a+=r;let u=yield this._configProtocol.readConfigMemory(this._deviceConfig.groupMmsiNumbersAddress,i,f=>this._progress.next((a+f)/o)),d=new An(this._deviceConfig.individualMmsiNum,this._deviceConfig.groupMmsiNum);d.initFromConfig(s,l,c,u),this.config.next(B(_({},this.config.getValue()),{mmsiDirectory:d})),this._deviceTaskState.next("mmsi-edit")})}getMmsiMemoryLayout(){let e=this._deviceConfig.individualMmsiNum,n=Et*e,r=It(e),i=this._deviceConfig.groupMmsiNum,o=Et*i,s=It(i);return{individualMmsiNamesSize:n,individualMmsiNumbersSize:r,groupMmsiNamesSize:o,groupMmsiNumbersSize:s,totalSize:n+r+o+s}}writeMmsiDirectory(){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="mmsi-edit")throw new Error(`Can't read MMSI directory from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("mmsi-save"),this._progress.next(0);let{individualMmsiNamesSize:e,individualMmsiNumbersSize:n,groupMmsiNamesSize:r,groupMmsiNumbersSize:i,totalSize:o}=this.getMmsiMemoryLayout(),s=new Uint8Array(e),a=new Uint8Array(n),l=new Uint8Array(r),c=new Uint8Array(i);this.config.getValue().mmsiDirectory.fillConfig(s,a,l,c),yield this._configProtocol.writeConfigMemory(s,this._deviceConfig.individualMmsiNamesAddress,d=>this._progress.next(d/o));let u=e;yield this._configProtocol.writeConfigMemory(a,this._deviceConfig.individualMmsiNumbersAddress,d=>this._progress.next((u+d)/o)),u+=n,yield this._configProtocol.writeConfigMemory(l,this._deviceConfig.groupMmsiNamesAddress,d=>this._progress.next((u+d)/o)),u+=r,yield this._configProtocol.writeConfigMemory(c,this._deviceConfig.groupMmsiNumbersAddress,d=>this._progress.next((u+d)/o)),this._deviceTaskState.next("idle")})}cancelMmsiDirectory(){this._deviceTaskState.next("idle")}readGpsLog(){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't start reading GPS from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("gpslog-read"),this._progress.next(0),yield this._configProtocol.waitForGps();let e=[];this._configProtocol.sendMessage("$PMTK",["622","1"]);let n=yield this._configProtocol.receiveMessage();if(n.type!="$PMTK"||n.args.length!=3||n.args[0]!="LOX"||n.args[1]!="0")throw new Error(`Unexpected log header ${n.toString()}`);let r=Number(n.args[2]),i=0,o=yield this._configProtocol.receiveMessage();for(;!(o.args.length==2&&o.args[1]=="2");){if(o.type!="$PMTK"||o.args.length<2||o.args[0]!="LOX"||o.args[1]!="1")throw new Error(`Unexpected log line ${o.toString()}`);if(Number(o.args[2])!=i)throw new Error(`Unexpected log line number ${Number(o.args[2])} (was expecting ${i})`);let c=o.args.slice(3).map(Ha);for(let u of c)e.push(u);this._progress.next(i/r),i+=1,o=yield this._configProtocol.receiveMessage()}i!=r&&console.log(`Got ${i} lines, was expecting ${r}. Continuing anyway.`);let s=e.reduce((c,u)=>c+u.length,0),a=new Uint8Array(s),l=0;for(let c of e)a.set(c,l),l+=c.length;if(n=yield this._configProtocol.receiveMessage(),n.type!="$PMTK"||n.args.length!=3||n.args[0]!="001"||n.args[1]!="622"||n.args[2]!="3")throw new Error(`Unexpected ReadLog acknowledgement ${n.toString()}`);this.config.next(B(_({},this.config.getValue()),{gpslog:a})),this._deviceTaskState.next("idle")})}startYaml(){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't start Yaml from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("yaml-read"),this._progress.next(0),this._yamlError.next(""),this.config.next({});let e=dh.map(s=>new s(this._deviceConfig.name)),n=new tl(this._configProtocol);e.forEach(s=>s.addRangesToRead(n));let r=yield n.read(s=>this._progress.next(s)),i=new Gt;i.contents=i.createNode([]);let o={};e.forEach(s=>s.updateConfig(r,o,i)),this.config.next(o),this.yamlText.next(i.toString({}).trim()),this._deviceTaskState.next("yaml-edit")})}saveYaml(e){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="yaml-edit")throw new Error(`Can't save Yaml from state ${this._deviceTaskState.getValue()}`);this._deviceTaskState.next("yaml-save"),this.yamlText.next(e),this._progress.next(0);let n=eh(e),r=dh.map(a=>new a(this._deviceConfig.name)),i=new Wl(this._configProtocol),o={},s=this.config.getValue();try{Ke(n,{Alias(a,l,c){throw new ee("Unexpected alias",l.range[0])},Pair(a,l,c){throw new Error(`Unexpected pair ${l}`)},Scalar(a,l,c){throw new ee(`Unexpected scalar ${l.value}`,l.range[0])},Seq(a,l,c){if(c.length!=1)throw new ee("Unexpected sequence",l.range[0])},Map(a,l,c){if(c.length!=2)throw new ee(`Error processing ${l}`,l.range[0]);let u=!1;for(let d of r)if(u=d.maybeVisitYamlNode(l,i,o,s),u)break;if(!u)throw new ee(`Unknown node ${l.items[0].key}`,l.range[0]);return Ke.SKIP}})}catch(a){this._deviceTaskState.next("yaml-edit"),a instanceof ee?this._yamlError.next(a.toUserMessage(e)):this._yamlError.next(a.toString());return}yield i.write(a=>{this._progress.next(a)}),this._deviceTaskState.next("idle")})}cancelYamlEdit(){this._deviceTaskState.next("idle")}readDat(){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't start reading Dat from state ${this._deviceTaskState.getValue()}`);let e;if(this._configProtocol instanceof di)e=this._configProtocol.datImage;else{if(!this._deviceConfig)throw new Error("No device config");let n=this._deviceConfig;this._deviceTaskState.next("dat-read"),this._progress.next(0),e=yield this._configProtocol.readConfigMemory(0,n.datLength,r=>this._progress.next(r/n.datLength))}return this._deviceTaskState.next("idle"),e})}restoreDat(e){return A(this,null,function*(){if(this._deviceTaskState.getValue()!="idle")throw new Error(`Can't restore DAT from state ${this._deviceTaskState.getValue()}`);if(!(this._configProtocol instanceof ui))throw new Error("Can't restore DAT file to a DAT file.");if(!this._deviceConfig)throw new Error("Missing device config.");let n=this._deviceConfig;if(e.length!=n.datLength)throw new Error(`DAT file does not have the expected size (expected ${n.datLength}, found ${e.length})`);if(!n.datMagic.every((r,i)=>e[i]==r))throw new Error("DAT file does not have the expected magic");this._progress.next(0),this._deviceTaskState.next("dat-restore"),yield this._configProtocol.writeConfigMemory(e,0,r=>this._progress.next(r/n.datLength)),this._deviceTaskState.next("idle")})}};var Ii=function(t){return t[t.Unknown=0]="Unknown",t[t.CP=1]="CP",t[t.NMEA=2]="NMEA",t}(Ii||{}),fh=[{name:"HX890",usbFilter:{usbVendorId:9898,usbProductId:30},waypointsStartAddress:55040,waypointsNumber:250,routesStartAddress:50944,routesNumber:20,numWaypointsPerRoute:31,routeBytes:64,individualMmsiNamesAddress:17664,individualMmsiNumbersAddress:16896,individualMmsiNum:100,groupMmsiNamesAddress:20736,groupMmsiNumbersAddress:20480,groupMmsiNum:20,datLength:65536,datMagic:new Uint8Array([3,122])},{name:"HX870",usbFilter:{usbVendorId:9898,usbProductId:16},waypointsStartAddress:17152,waypointsNumber:200,routesStartAddress:23552,routesNumber:20,numWaypointsPerRoute:16,routeBytes:32,individualMmsiNamesAddress:14128,individualMmsiNumbersAddress:13568,individualMmsiNum:100,groupMmsiNamesAddress:16e3,groupMmsiNumbersAddress:15872,groupMmsiNum:20,datLength:32768,datMagic:new Uint8Array([3,103])}],Kt=(()=>{let e=class e{constructor(){this._connectionState=new he("disconnected"),this.connectionState$=this._connectionState.asObservable(),this.encoder=new TextEncoder,this.decoder=new TextDecoder("utf-8"),this.mode=Ii.Unknown,this._configProtocol=new ui(this),this.configSession=new Yl(this._configProtocol),this.serial=navigator.serial}getConnectionState(){return this._connectionState.getValue()}connectUsb(){return A(this,null,function*(){if(!this.serial)throw new Error("This browser doesn't support the Webserial API. Use Chrome, Edge, or Opera.");if(this.getConnectionState()!="disconnected")throw new Error(`Cannot connect from state: ${this.getConnectionState()}`);try{this._connectionState.next("usb-connecting"),this.port=yield this.serial.requestPort({filters:fh.map(o=>o.usbFilter)});let r=this.port.getInfo(),i=fh.find(o=>o.usbFilter.usbProductId==r.usbProductId&&o.usbFilter.usbVendorId==r.usbVendorId);if(console.log(`Found device ${i.name}`),this.port.addEventListener("disconnect",o=>this.disconnect()),yield this.port.open({baudRate:9600}),this._streamReader=this.port?.readable?.getReader(),this.reader=new Wa(this._streamReader),this.writer=this.port?.writable?.getWriter(),yield this.detectDeviceMode(),this.mode!=Ii.CP)throw new Error("Device must be in CP mode");this._connectionState.next("usb-connected"),this.configSession.reset(i,this._configProtocol),console.log("Connected")}catch(r){throw yield this.disconnect(),r}})}disconnect(){return A(this,null,function*(){if(this._connectionState.getValue()=="dat-connected"){this._connectionState.next("disconnected");return}try{yield this.writer?.close(),yield this._streamReader?.cancel(),this._streamReader?.releaseLock(),this.writer?.releaseLock(),yield this.port?.close(),yield this.port?.forget(),this.port=void 0,this._streamReader=void 0,this.reader=void 0,this.writer=void 0,this.mode=Ii.Unknown,this.configSession.config.next({}),console.log("Disconnected")}catch(r){this.port=void 0,console.error(`Error while disconnecting: ${r}`)}this.configSession.disconnect(),this._connectionState.next("disconnected")})}write(r){return A(this,null,function*(){yield this.writer?.write(this.encoder.encode(r))})}read(r){return A(this,null,function*(){return yield this.reader.read(r)})}readline(){return A(this,null,function*(){return yield this.reader.readline()})}flushInput(){this.reader&&this.reader.flush()}detectDeviceMode(){return A(this,null,function*(){yield this.write("P?");let r=yield this.read(1);r[0]=="@"?this.mode=Ii.CP:(r[0]=="P"||r[0]=="$")&&(this.mode=Ii.NMEA),console.log(`Detected mode ${this.mode}`)})}connectDat(r){if(this.getConnectionState()!="disconnected")throw new Error(`Cannot load DAT from state: ${this.getConnectionState()}`);let i=fh.find(o=>r.length==o.datLength&&o.datMagic.every((s,a)=>r[a]==s));if(!i)throw new Error(`Unknown DAT file format (length ${r.length}, magic ${r.subarray(0,2)}`);console.log(`Detected DAT file for ${i.name}`),this.configSession.reset(i,new di(r)),this._connectionState.next("dat-connected")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JM(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading GPS log (",n.progressPct,"%) ")}}function XM(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading waypoints (",n.progressPct,"%) ")}}function eN(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Saving waypoints (",n.progressPct,"%) ")}}function tN(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading MMSI directory (",n.progressPct,"%) ")}}function nN(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Saving MMSI directory (",n.progressPct,"%) ")}}function rN(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading for YAML edit (",n.progressPct,"%) ")}}function iN(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Saving YAML configuration (",n.progressPct,"%) ")}}function oN(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Reading DAT configuration (",n.progressPct,"%) ")}}function sN(t,e){if(t&1&&E(0),t&2){let n=O(2);$e(" Restoring DAT configuration (",n.progressPct,"%) ")}}function aN(t,e){if(t&1&&(I(0,"div",1)(1,"div",2)(2,"div",3),ge(3,JM,1,1)(4,XM,1,1)(5,eN,1,1)(6,tN,1,1)(7,nN,1,1)(8,rN,1,1)(9,iN,1,1)(10,oN,1,1)(11,sN,1,1),S(),Oe(12,"div",4),S()()),t&2){let n=O();ue(3),Se(3,n.state=="gpslog-read"?3:n.state=="nav-read"?4:n.state=="nav-save"?5:n.state=="mmsi-read"?6:n.state=="mmsi-save"?7:n.state=="yaml-read"?8:n.state=="yaml-save"?9:n.state=="dat-read"?10:n.state=="dat-restore"?11:-1)}}var hh=(()=>{let e=class e{constructor(r){this.state="idle",this.progressPct=0,this.configProtocol=r.configSession}ngOnInit(){this.configProtocol.deviceTaskState$.subscribe(r=>this.state=r),this.configProtocol.progress$.subscribe(r=>this.progressPct=Math.floor(r*100))}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["busy-state-modal"]],standalone:!0,features:[je],decls:1,vars:1,consts:[["class","veil"],[1,"veil"],[1,"modal"],[1,"message"],[1,"spinner"]],template:function(i,o){i&1&&ge(0,aN,13,1,"div",0),i&2&&Se(0,o.state=="gpslog-read"||o.state=="nav-read"||o.state=="nav-save"||o.state=="mmsi-read"||o.state=="mmsi-save"||o.state=="yaml-read"||o.state=="yaml-save"||o.state=="dat-read"||o.state=="dat-restore"?0:-1)},styles:[".veil[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border-radius:5px;min-width:200px;display:flex;flex-direction:column;justify-content:center;align-items:center}.spinner[_ngcontent-%COMP%]{width:64px;height:64px;position:relative;border-radius:50%;border:2px solid transparent;border-top-color:#aaa;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.message[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}"]});let t=e;return t})();function lN(t,e){t&1&&E(0," Edit waypoint ")}function cN(t,e){t&1&&E(0," Add waypoint ")}function uN(t,e){if(t&1&&(I(0,"div",13),E(1),S()),t&2){let n=O(2);ue(),Qr(n.errorMsg)}}function dN(t,e){if(t&1){let n=qe();I(0,"div",1)(1,"h2"),ge(2,lN,1,0)(3,cN,1,0),S(),ge(4,uN,2,1,"div",2),I(5,"form",3,4),ne("ngSubmit",function(){le(n);let i=fd(6),o=O();return ce(o.onSubmit(i))}),I(7,"div",5),E(8," Name: "),I(9,"input",6),to("ngModelChange",function(i){le(n);let o=O();return wa(o.wpFormData.name,i)||(o.wpFormData.name=i),ce(i)}),S()(),I(10,"div",5),E(11," Latitude: "),I(12,"input",7),to("ngModelChange",function(i){le(n);let o=O();return wa(o.wpFormData.lat,i)||(o.wpFormData.lat=i),ce(i)}),S()(),I(13,"div",5),E(14," Longitude: "),I(15,"input",8),to("ngModelChange",function(i){le(n);let o=O();return wa(o.wpFormData.lon,i)||(o.wpFormData.lon=i),ce(i)}),S()(),I(16,"div",9),E(17," Supported formats for latitude / longitude: "),I(18,"li"),E(19,"Degrees and decimal minutes (DMM), e.g. 12 N 34.5678, 12\xB0 34.5678' N"),S(),I(20,"li"),E(21,`Degrees, minutes, seconds (DMS), e.g. 12\xB0 34' 34.1" N`),S(),I(22,"li"),E(23,"Decimal degrees (DD), e.g. 12.57613 (number sign indicates direction)"),S()(),I(24,"div",10)(25,"button",11),ne("click",function(){le(n);let i=fd(6),o=O();return ce(o.onCancel(i))}),E(26,"Cancel"),S(),I(27,"button",12),E(28,"Done"),S()()()()}if(t&2){let n=O();ue(2),Se(2,n.editing?2:3),ue(2),Se(4,n.errorMsg?4:-1),ue(5),eo("ngModel",n.wpFormData.name),ue(3),eo("ngModel",n.wpFormData.lat),ue(3),eo("ngModel",n.wpFormData.lon)}}var ph=(()=>{let e=class e{constructor(){this.editing=!1,this.shown=!0}ngOnInit(){}onSubmit(r){if(!this.wpFormData){this.shown=!1;return}var i=this.wpFormData;try{let o=Ka(i)}catch(o){this.errorMsg=o.toString();return}this.shown=!1,this.wpFormData=void 0,this.errorMsg=void 0,console.log(`Submitted form ${r}`),this.callbackFn&&this.callbackFn(i)}onCancel(r){return console.log(`Canceled form ${r}`),this.shown=!1,this.wpFormData=void 0,this.errorMsg=void 0,!1}editWaypoint(r,i){this.shown=!0,this.editing=!0,this.wpFormData={name:r.wp.name,lat:r.getLat(),lon:r.getLon()},this.callbackFn=i}createWaypoint(r){this.editing=!1,this.wpFormData={name:"",lat:"",lon:""},this.shown=!0,this.callbackFn=r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ve({type:e,selectors:[["waypoint-editor"]],standalone:!0,features:[je],decls:1,vars:1,consts:[["class","dialog"],[1,"dialog"],["class","error"],[3,"ngSubmit"],["f","ngForm"],[1,"input"],["type","text","name","wpName","autocomplete","off",3,"ngModel","ngModelChange"],["type","text","name","wpLat","autocomplete","off",3,"ngModel","ngModelChange"],["type","text","name","wpLon","autocomplete","off",3,"ngModel","ngModelChange"],[1,"desc"],[1,"buttons"],["type","button",3,"click"],["type","submit"],[1,"error"]],template:function(i,o){i&1&&ge(0,dN,29,5,"div",0),i&2&&Se(0,o.shown&&o.wpFormData?0:-1)},dependencies:[Ei,dw,Fn,Di,iw,ch,lh],styles:[".dialog[_ngcontent-%COMP%]{display:block;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;padding:1em;box-shadow:#0000004d 1px 1px 10px;border-radius:5px}h2[_ngcontent-%COMP%]{margin-top:10px}.input[_ngcontent-%COMP%]{margin:.5rem 0;display:flex;flex-direction:row;justify-content:space-between}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:1rem}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.error[_ngcontent-%COMP%]{background-color:#ffd5d5;font-size:80%;padding:.4rem;color:#8b0000}.desc[_ngcontent-%COMP%]{font-size:80%}"]});let t=e;return t})();function fN(t,e){t&1&&E(0," No waypoints! ")}function hN(t,e){if(t&1){let n=qe();I(0,"tr")(1,"td")(2,"a",9),E(3),S()(),I(4,"td"),E(5),S(),I(6,"td"),E(7),S(),I(8,"td",10),ne("click",function(){let o=le(n).$implicit,s=O(3);return ce(s.draftEditWaypoint(o))}),E(9,"\u270E"),S(),I(10,"td",10),ne("click",function(){let o=le(n).$implicit,s=O(3);return ce(s.draftDeleteWaypoint(o))}),E(11,"\u2716"),S()()}if(t&2){let n=e.$implicit;ue(2),dd("href",n.getMapLink(),$m),ue(),$e("",n.wp.name," \u2197"),ue(2),Qr(n.getLat()),ue(2),Qr(n.getLon())}}function pN(t,e){if(t&1&&(I(0,"table")(1,"tr")(2,"th"),E(3,"Name"),S(),I(4,"th"),E(5,"Latitude"),S(),I(6,"th"),E(7,"Longitude"),S()(),Tg(8,hN,12,4,"tr",null,Ng),S()),t&2){let n=O(2);ue(8),Ag(n.getDraftWaypoints().waypoints)}}function mN(t,e){if(t&1){let n=qe();I(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),ge(5,fN,1,0)(6,pN,10,0),I(7,"button",6),ne("click",function(){le(n);let i=O();return ce(i.draftAddWaypoint())}),E(8,"Add waypoint"),S()()(),Oe(9,"waypoint-editor"),S(),I(10,"div",7)(11,"button",6),ne("click",function(){le(n);let i=O();return ce(i.draftCancel())}),E(12,"Cancel"),S(),I(13,"button",8),ne("click",function(){le(n);let i=O();return ce(i.saveDraft())}),E(14," Save "),S()()()()}if(t&2){let n=O(),r;ue(5),Se(5,!((r=n.getDraftWaypoints())==null||r.waypoints==null)&&r.waypoints.length?6:5),ue(8),ln("disabled",!n.isPendingDraft())}}var mh=(()=>{let e=class e{constructor(r){this.deviceMgr=r,this.shown=!1,this.hex=tt}ngOnInit(){this.deviceMgr.configSession.deviceTaskState$.subscribe(r=>{r=="nav-edit"||r=="nav-save"?this.shown=!0:this.shown=!1}),this.configSubscription=this.deviceMgr.configSession.config.asObservable().subscribe()}getDraftWaypoints(){return this.deviceMgr.configSession.config.getValue().draftWaypoints}draftEditWaypoint(r){let i=this.getDraftWaypoints();i&&this.waypointEditor.editWaypoint(r,o=>i?.editWaypoint(r,o.name,o.lat,o.lon))}draftDeleteWaypoint(r){let i=this.getDraftWaypoints();i&&i.deleteWaypoint(r)}draftAddWaypoint(){let r=this.getDraftWaypoints();this.waypointEditor.createWaypoint(i=>r?.addWaypoint(i))}draftCancel(){this.deviceMgr.configSession.cancelNavInfoDraft()}saveDraft(){this.deviceMgr.configSession.writeNavInfoDraft()}isPendingDraft(){return this.getDraftWaypoints()?.dirtyWaypoints}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["waypoint-sheet"]],viewQuery:function(i,o){if(i&1&&Kr(ph,5),i&2){let s;ar(s=lr())&&(o.waypointEditor=s.first)}},standalone:!0,features:[je],decls:1,vars:1,consts:[["class","veil"],[1,"veil"],[1,"modal"],[1,"contents"],[1,"waypoints"],[1,"list"],[3,"click"],[1,"controls"],[3,"disabled","click"],["target","_blank",3,"href"],[1,"action",3,"click"]],template:function(i,o){i&1&&ge(0,mN,15,2,"div",0),i&2&&Se(0,o.shown?0:-1)},dependencies:[ph],styles:[".veil[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000040}.modal[_ngcontent-%COMP%]{position:fixed;top:30%;left:0%;width:100%;height:70%;background-color:#fff;padding:20px;border-radius:5px;display:flex;flex-direction:column;justify-content:center;align-items:center}.contents[_ngcontent-%COMP%]{max-width:600px;overflow:auto;flex:1}.waypoints[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.waypoints[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.waypoints[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.waypoints[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{align-self:center}.waypoints[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{cursor:pointer}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:1.5rem}"]});let t=e;return t})();function gN(t,e){if(t&1){let n=qe();I(0,"div",1)(1,"div",2)(2,"h2"),E(3,"Edit MMSI Directory"),S(),I(4,"div",3),E(5,' Input the MMSI directory as CSV with two columns ("name" and "mmsi"). Prefix group MMSIs with an uppercase "G". Warning: this feature is extra experimental. If there are errors in the CSV (name longer than 16 characters, MMSI not numeric, missing columns) the save will fail silently. '),S(),I(6,"div",4),Oe(7,"textarea",5),S(),I(8,"div",6)(9,"button",7),ne("click",function(){le(n);let i=O();return ce(i.cancel())}),E(10,"Cancel"),S(),I(11,"button",7),ne("click",function(){le(n);let i=O();return ce(i.save())}),E(12,"Save"),S()()()()}if(t&2){let n=O();ue(7),ln("formControl",n.csvControl)}}var gh=(()=>{let e=class e{constructor(r){this.shown=!1,this.csvControl=new Xo("Uninitialized"),this.configProtocol=r.configSession}ngOnInit(){this.configProtocol.deviceTaskState$.subscribe(r=>{r=="mmsi-edit"?(this.shown=!0,this.csvControl.setValue(this.configProtocol.config.getValue().mmsiDirectory.toCsv())):this.shown=!1})}save(){this.csvControl.value&&this.configProtocol.config.getValue().mmsiDirectory.initFromCsv(this.csvControl.value),this.configProtocol.writeMmsiDirectory()}cancel(){this.configProtocol.cancelMmsiDirectory()}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["mmsi-sheet"]],standalone:!0,features:[je],decls:1,vars:1,consts:[["class","veil"],[1,"veil"],[1,"modal"],[1,"info"],[1,"contents"],[3,"formControl"],[1,"controls"],[3,"click"]],template:function(i,o){i&1&&ge(0,gN,13,1,"div",0),i&2&&Se(0,o.shown?0:-1)},dependencies:[Ei,Fn,Di,Hl,es],styles:[".veil[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000040}.modal[_ngcontent-%COMP%]{position:fixed;top:30%;left:0%;width:100%;height:70%;background-color:#fff;padding:20px;border-radius:5px;display:flex;flex-direction:column;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{margin-top:10px}.contents[_ngcontent-%COMP%]{width:600px;flex:1}.contents[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100%;width:100%;box-sizing:border-box}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:1.5rem}.info[_ngcontent-%COMP%]{max-width:600px;font-size:12px;padding:0 2em .5em;box-sizing:border-box}"]});let t=e;return t})();function yN(t,e){if(t&1){let n=qe();I(0,"div",3),E(1,' Connect your HX870 or HX890 radio to this computer with a USB cable, and place it in "CP Mode": '),I(2,"ol")(3,"li"),E(4,"Power the device off"),S(),I(5,"li"),E(6,"Press and hold the Menu key"),S(),I(7,"li"),E(8,"While holding the Menu key, press the power button"),S(),I(9,"li"),E(10,"Release both keys when the screen lights up"),S(),I(11,"li"),E(12,"Click Connect"),S()(),E(13," Alternatively, "),I(14,"a",4),ne("click",function(){le(n);let i=O();return ce(i.showDatPicker())}),E(15,"load a DAT file"),S(),E(16," for your device to edit it. "),S(),I(17,"button",5),ne("click",function(){le(n);let i=O();return ce(i.connectUsb())}),E(18," Connect "),S()}if(t&2){let n=O();ue(17),ln("disabled",n.connectionState==="usb-connecting")}}function vN(t,e){if(t&1){let n=qe();I(0,"button",7),ne("click",function(){le(n);let i=O(2);return ce(i.readGpslog())}),E(1,"Download GPS log"),S()}}function wN(t,e){if(t&1){let n=qe();I(0,"button",7),ne("click",function(){le(n);let i=O(2);return ce(i.restoreDat())}),E(1,"Restore from DAT"),S(),I(2,"button",7),ne("click",function(){le(n);let i=O(2);return ce(i.deviceMgr.disconnect())}),E(3,"Disconnect"),S()}}function bN(t,e){if(t&1){let n=qe();I(0,"button",7),ne("click",function(){le(n);let i=O(2);return ce(i.deviceMgr.disconnect())}),E(1,"Close"),S()}}function CN(t,e){if(t&1){let n=qe();I(0,"div",6)(1,"button",7),ne("click",function(){le(n);let i=O();return ce(i.readWaypoints())}),E(2,"Waypoints"),S(),I(3,"button",7),ne("click",function(){le(n);let i=O();return ce(i.readMmsi())}),E(4,"MMSI Directory"),S(),I(5,"button",7),ne("click",function(){le(n);let i=O();return ce(i.readYaml())}),E(6,"Edit as Yaml"),S(),ge(7,vN,2,0,"button"),I(8,"button",7),ne("click",function(){le(n);let i=O();return ce(i.saveDat())}),E(9,"Save DAT"),S(),ge(10,wN,4,0)(11,bN,2,0),S()}if(t&2){let n=O();ue(7),Se(7,n.connectionState=="usb-connected"?7:-1),ue(3),Se(10,n.connectionState=="usb-connected"?10:n.connectionState=="dat-connected"?11:-1)}}var mw=(()=>{let e=class e{constructor(r){this.deviceMgr=r,this.hex=tt,this.connectionState=r.getConnectionState(),this.config=this.deviceMgr.configSession.config,this.deviceTaskState="idle"}ngOnInit(){this.connectionStateSubscription=this.deviceMgr.connectionState$.subscribe(r=>this.connectionState=r),this.configSubscription=this.deviceMgr.configSession.config.asObservable().subscribe(),this.deviceMgr.configSession.deviceTaskState$.subscribe(r=>this.deviceTaskState=r)}readWaypoints(){return A(this,null,function*(){yield this.deviceMgr.configSession.readNavInfo()})}readMmsi(){return A(this,null,function*(){yield this.deviceMgr.configSession.readMmsiDirectory()})}readYaml(){return A(this,null,function*(){yield this.deviceMgr.configSession.startYaml()})}readGpslog(){return A(this,null,function*(){yield this.deviceMgr.configSession.readGpsLog();let r=new Ga(this.deviceMgr.configSession.config.getValue().gpslog).getGpx(),i=new Blob(r,{type:"application/xml"});(0,yh.saveAs)(i,"gpslog.gpx")})}connectUsb(){return A(this,null,function*(){if(!this.deviceMgr.serial){window.alert("This functionality requires Chrome, Edge, or Opera.");return}try{yield this.deviceMgr.connectUsb()}catch(r){window.alert(r)}})}showDatPicker(){return A(this,null,function*(){if(!window.showOpenFilePicker){window.alert("This functionality requires Chrome, Edge, or Opera.");return}let[r]=yield window.showOpenFilePicker({multiple:!1,types:[{description:"DAT files",accept:{"application/octet-stream":[".dat",".bin",".DAT",".bin"]}}]}),o=yield(yield r.getFile()).arrayBuffer();try{this.deviceMgr.connectDat(new Uint8Array(o))}catch(s){window.alert(s)}})}saveDat(){return A(this,null,function*(){let r=yield this.deviceMgr.configSession.readDat(),i=new Blob([r],{type:"application/octet-stream"});(0,yh.saveAs)(i,"hx.dat")})}restoreDat(){return A(this,null,function*(){let[r]=yield window.showOpenFilePicker({multiple:!1,types:[{description:"DAT files",accept:{"application/octet-stream":[".dat",".bin",".DAT",".bin"]}}]});try{let i=yield r.getFile(),o=new Uint8Array(yield i.arrayBuffer());yield this.deviceMgr.configSession.restoreDat(o)}catch(i){window.alert(i)}})}};e.\u0275fac=function(i){return new(i||e)(z(Kt))},e.\u0275cmp=Ve({type:e,selectors:[["app-device"]],viewQuery:function(i,o){if(i&1&&(Kr(mh,5),Kr(gh,5),Kr(hh,5)),i&2){let s;ar(s=lr())&&(o.waypointSheet=s.first),ar(s=lr())&&(o.mmsiSheet=s.first),ar(s=lr())&&(o.busyStateModal=s.first)}},standalone:!0,features:[je],decls:9,vars:1,consts:[[1,"device-panel"],["src","assets/radio.jpeg",1,"device-picture"],[1,"controls"],[1,"desc"],["href","#",3,"click"],[3,"disabled","click"],[1,"connected-buttons"],[3,"click"]],template:function(i,o){i&1&&(I(0,"div",0),Oe(1,"img",1),I(2,"div",2),ge(3,yN,19,1)(4,CN,12,2),S()(),Oe(5,"waypoint-sheet")(6,"mmsi-sheet")(7,"yaml-sheet")(8,"busy-state-modal")),i&2&&(ue(3),Se(3,o.connectionState!="usb-connected"&&o.connectionState!="dat-connected"?3:4))},dependencies:[hh,mh,gh,pw],styles:[".device-panel[_ngcontent-%COMP%]{display:flex}.device-picture[_ngcontent-%COMP%]{width:150px;height:150px}.status-lights[_ngcontent-%COMP%]{width:100px;height:auto;display:flex;flex-direction:column;align-items:center;justify-content:center}.status-lights[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:14px;border:solid 1px #444;margin:5px;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_on-light{0%{background-color:#1c881c}50%{background-color:#36ae36}to{background-color:#1c881c}}.status-lights[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{background-color:#1c881c;color:#fff;animation-name:_ngcontent-%COMP%_on-light;animation-duration:1s;animation-iteration-count:infinite}.controls[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;align-items:center;justify-content:center}.connected-buttons[_ngcontent-%COMP%]{flex-flow:wrap}"]});let t=e;return t})();var gw=(()=>{let e=class e{constructor(){this.title="hxsync"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ve({type:e,selectors:[["app-root"]],standalone:!0,features:[je],decls:10,vars:0,consts:[[1,"main"],[1,"content"],[1,"desc"]],template:function(i,o){i&1&&(I(0,"main",0)(1,"div",1)(2,"h1"),E(3,"HxSync"),S(),I(4,"div",2),E(5," With this utility, you'll be able to edit waypoints on your HX870 or HX890, and download its GPS log in GPX format. "),S(),I(6,"div",2),E(7," This experimental utility is not provided by Standard Horizon. Use at your own risk! "),S(),Oe(8,"app-device"),S()(),Oe(9,"router-outlet"))},dependencies:[sf,mw],styles:['[_nghost-%COMP%]{--bright-blue: oklch(51.01% .274 263.83);--electric-violet: oklch(53.18% .28 296.97);--french-violet: oklch(47.66% .246 305.88);--vivid-pink: oklch(69.02% .277 332.77);--hot-red: oklch(61.42% .238 15.34);--orange-red: oklch(63.32% .24 31.68);--gray-900: oklch(19.37% .006 300.98);--gray-700: oklch(36.98% .014 302.71);--gray-400: oklch(70.9% .015 304.04);--red-to-pink-to-purple-vertical-gradient: linear-gradient( 180deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--red-to-pink-to-purple-horizontal-gradient: linear-gradient( 90deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--pill-accent: var(--bright-blue);box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:3.125rem;color:var(--gray-900);font-weight:500;line-height:100%;letter-spacing:-.125rem;margin:0;font-family:Inter Tight,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}p[_ngcontent-%COMP%]{margin:0;color:var(--gray-700)}main[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;justify-content:center;align-items:center;padding:1rem;box-sizing:inherit;position:relative}.angular-logo[_ngcontent-%COMP%]{max-width:9.2rem}.content[_ngcontent-%COMP%]{justify-content:space-around;width:100%;max-width:700px;margin-bottom:3rem}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1.75rem;margin-bottom:1rem}.content[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:.5rem 0}.divider[_ngcontent-%COMP%]{width:1px;background:var(--red-to-pink-to-purple-vertical-gradient);margin-inline:.5rem}.pill-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex-wrap:wrap;gap:1.25rem}.pill[_ngcontent-%COMP%]{display:flex;align-items:center;--pill-accent: var(--bright-blue);background:color-mix(in srgb,var(--pill-accent) 5%,transparent);color:var(--pill-accent);padding-inline:.75rem;padding-block:.375rem;border-radius:2.75rem;border:0;transition:background .3s ease;font-family:var(--inter-font);font-size:.875rem;font-style:normal;font-weight:500;line-height:1.4rem;letter-spacing:-.00875rem;text-decoration:none}.pill[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--pill-accent) 15%,transparent)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+1){--pill-accent: var(--bright-blue)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+2){--pill-accent: var(--french-violet)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+5){--pill-accent: var(--hot-red)}.pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-inline-start:.25rem}.social-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.73rem;margin-top:1.5rem}.social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:fill .3s ease;fill:var(--gray-400)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--gray-900)}@media screen and (max-width: 650px){.content[_ngcontent-%COMP%]{flex-direction:column;width:max-content}.divider[_ngcontent-%COMP%]{height:1px;width:100%;background:var(--red-to-pink-to-purple-horizontal-gradient);margin-block:1.5rem}}']});let t=e;return t})();ny(gw,jy).catch(t=>console.error(t));
